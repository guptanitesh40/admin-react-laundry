import{r as c,B as q,V as F,G as J,j as e,X as W,N as X,t as Z,b as Q,q as ee,m as te,H as se,e as ae,L as ne,R as D,a0 as le,h as re}from"./index-DkEVCDP-.js";import{u as U}from"./useGetuser-WqP0Eo4Q.js";import{g as G}from"./roleClasses-Csi9BfE6.js";import{g as H}from"./paymentStatusClasses-BddHAg9R.js";import{g as de}from"./orderStatusClasses-HfHBGnti.js";import{u as ie}from"./useRestoreUser--vASk0pF.js";import{S as E}from"./sweetalert2.esm.all-B0Dix5B2.js";import{u as ce,P as oe,a as me,d as V}from"./index-Dfk2awm5.js";const xe=()=>{const[h,m]=c.useState(!1);return{clearDueAmount:async(w,P)=>{const N=localStorage.getItem("authToken");m(!0);try{const y=await fetch(`${q}/orders/payments/clear-due`,{method:"POST",headers:{Authorization:`Bearer ${N}`,"Content-Type":"application/json"},body:JSON.stringify({user_id:w,orders:P})}),_=await y.json();return y.ok?(F.success(_.message,{position:"top-center"}),!0):(F.error(_.message,{position:"top-center"}),!1)}catch{return F.error("Error clearing due amount",{position:"top-center"}),!1}finally{m(!1)}},loading:h}};function K(h){return J({attr:{viewBox:"0 0 32 32"},child:[{tag:"path",attr:{d:"M 8 5 L 8 7 L 12 7 C 13.703125 7 15.941406 8.039063 16.71875 10 L 8 10 L 8 12 L 16.96875 12 C 16.660156 14.609375 13.972656 16 12 16 L 8 16 L 8 18.46875 L 18.25 27 L 21.375 27 L 10.5625 18 L 12 18 C 15.234375 18 18.675781 15.609375 18.96875 12 L 24 12 L 24 10 L 18.8125 10 C 18.507813 8.816406 17.859375 7.804688 17 7 L 24 7 L 24 5 Z"},child:[]}]})(h)}const ue=({modalOpen:h,onClose:m,userId:j,setRefetch:w,count:P})=>{const{userData:N,fetchUser:y,loading:_}=U(),{clearDueAmount:f,loading:o}=xe(),[l,p]=c.useState([]),[L,r]=c.useState([]),[d,k]=c.useState(),S=1,a=N==null?void 0:N.user;c.useEffect(()=>{h&&y(j,S,P)},[h,j]),c.useEffect(()=>{if(a!=null&&a.orders){const s=a.orders.filter(n=>![2].includes(n.payment_status)&&![12,13].includes(n.order_status));s.map(n=>({...n,kasar_amount:n.kasar_amount||null,payment_status:n.payment_status||null,current_total:0})),p(s)}},[a]);const i=(s,n,v)=>{const x=l.map(g=>{if(g.order_id===s){const u={...g,[n]:v};return u.current_total=(u.current_paid||0)+(u.kasar_amount||0)||0,u.current_total===0?u.payment_status=1:u.current_total===g.total||u.current_total===g.total-g.paid_amount?(k(!0),u.payment_status=2):(k(!1),u.payment_status=3),u}return g});p(x);const A=x.find(g=>g.order_id===s);A&&r(g=>{const u=g.findIndex(C=>C.order_id===s);if(u>-1){const C=[...g];return C[u]=A,C}return[...g,A]})},t=async()=>{if(L.length===0){m();return}const s={filteredOrders:L.map(({order_id:v,payment_status:x,kasar_amount:A,current_paid:g})=>({order_id:v,paid_amount:g||0,payment_status:x,kasar_amount:A}))};await f(j,s.filteredOrders)&&(m(),r([])),w(!0)};return h?e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:[e.jsx("div",{className:"fixed inset-0 bg-black opacity-50",onClick:m}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg w-[1000px] z-10 relative max-h-[80vh] overflow-auto",children:[e.jsx("button",{className:"btn btn-sm btn-icon btn-light btn-outline absolute top-0 right-0 mr-5 mt-5 lg:mr-5 shadow-default","data-modal-dismiss":"true",onClick:m,children:e.jsx("i",{className:"ki-filled ki-cross"})}),e.jsxs("div",{className:"flex justify-between items-center mb-6 lgscreen:flex-col lgscreen:gap-2 lgscreen:items-start",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Orders"}),e.jsx("div",{className:"flex items-start gap-2 lgscreen:w-full lgscreen:justify-between lgscreen:!items-center",children:e.jsx("button",{className:"btn btn-primary btn-lg flex flex-end mt-10 lgscreen:mt-0",onClick:t,disabled:o,children:o?"Saving...":"Save"})})]}),e.jsx("div",{className:"grid gap-5 lg:gap-5.5",children:e.jsx("div",{className:"card card-grid min-w-full",children:e.jsx("div",{className:"card-body",children:e.jsx("div",{className:"scrollable-x-auto",children:e.jsxs("table",{className:"table table-auto table-border",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"min-w-[30px]",children:"Id"}),e.jsx("th",{className:"min-w-[120px]",children:"Total"}),e.jsx("th",{className:"min-w-[120px]",children:"Paid Amount"}),e.jsx("th",{className:"min-w-[120px]",children:"Kasar Amount"}),e.jsx("th",{className:"min-w-[120px]",children:"Current Paid"}),e.jsx("th",{className:"min-w-[190px]",children:"Current Total"}),e.jsx("th",{className:"min-w-[120px]",children:"Payment Status"})]})}),_?e.jsx("tbody",{children:Array.from({length:4}).map((s,n)=>e.jsx("tr",{children:Array.from({length:7}).map((v,x)=>e.jsx("td",{className:"!px-3 !py-3",children:e.jsx("span",{className:"inline-block w-full bg-gray-200 animate-pulse rounded-md text-xl",children:" "})},x))},n))}):e.jsx("tbody",{children:l.map(s=>{const n=(s.paid_amount||0)+(s.kasar_amount||0)+(s.current_paid||0),v=H(s.payment_status,!0);return e.jsxs("tr",{className:"custom-row",children:[e.jsxs("td",{children:["#",s.order_id]}),e.jsxs("td",{children:["₹",s.total||0]}),e.jsxs("td",{children:["₹",s.paid_amount||0]}),e.jsx("td",{children:e.jsx("input",{type:"text",className:"input input-bordered",value:s.kasar_amount||0,onChange:x=>i(s.order_id,"kasar_amount",Number(x.target.value))})}),e.jsx("td",{children:e.jsx("input",{type:"text",className:"input input-bordered",value:s.current_paid||0,onChange:x=>i(s.order_id,"current_paid",Number(x.target.value))})}),e.jsxs("td",{className:n>(s.total||0)?"text-red-500":"",children:[e.jsxs("span",{children:["₹",s.current_total||0]}),n>(s.total||0)?e.jsx("span",{className:"flex mt-1 font-serif",children:"greater then pending amount"}):""]}),e.jsx("td",{children:e.jsxs("div",{children:[e.jsxs("select",{className:`select select-lg w-[170px] text-sm ${v}`,"data-datatable-size":"true","data-tooltip":"#custom_tooltip",value:s.payment_status,onChange:x=>i(s.order_id,"payment_status",Number(x.target.value)),children:[e.jsx("option",{value:"1",className:`${v}`,disabled:d||!d,children:"Pending"}),e.jsx("option",{value:"2",disabled:!d||s.paid_amount===0,children:"Received"}),e.jsx("option",{value:"3",disabled:d,children:"Partial Received"})]}),e.jsx("div",{className:"hidden rounded-xl shadow-default p-3 bg-light border border-gray-200 text-gray-700 text-xs font-normal",id:"custom_tooltip",children:"Change Payment Status"})]})})]},s.order_id)})})]})})})})})]})]}):null},he=({user:h,userId:m,count:j})=>{const[w,P]=c.useState(1),[N,y]=c.useState(100),{fetchUser:_,loading:f}=U(),[o,l]=c.useState([]);c.useEffect(()=>{l(h==null?void 0:h.orders)},[h]),c.useEffect(()=>{(async()=>{const d=await _(m,w,N);d&&l(k=>{const S=new Set(k.map(i=>i.order_id)),a=d==null?void 0:d.filter(i=>!S.has(i.order_id));return[...k,...a]})})()},[w]);const p=r=>{window.open(`/order/${r}`,"_blank")},L=()=>{P(w+1)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid gap-5 lg:gap-7.5 mt-5",children:e.jsxs("div",{className:"card card-grid min-w-full",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h3",{className:"text-xl font-semibold mb-1",children:"Orders"}),e.jsxs("span",{className:"text-gray-700 text-lg font-semibold px-3 py-1 rounded-lg",children:["Total Orders: ",j]})]}),e.jsx("div",{className:"scrollable-x-auto",children:e.jsxs("table",{className:"table table-auto table-border",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Id"}),e.jsx("th",{className:"min-w-[220px]",children:"Status"}),e.jsx("th",{className:"min-w-[60px]",children:"Item Count"}),e.jsx("th",{children:"Total"}),e.jsx("th",{className:"min-w-[80px]",children:"Paid Amount"}),e.jsx("th",{className:"",children:"Kasar Amount"}),e.jsx("th",{className:"min-w-[140px]",children:"Payment Type"}),e.jsx("th",{className:"min-w-[135px]",children:"Payment Status"}),e.jsx("th",{className:"min-w-[130px]",children:"Actions"})]})}),(o==null?void 0:o.length)>0?e.jsx("tbody",{children:o==null?void 0:o.map(r=>{const d=H(r.payment_status),k=de(r.admin_order_status.admin_label),S=r.items.length;return e.jsxs("tr",{children:[e.jsxs("td",{children:["#",r.order_id]}),e.jsx("td",{children:e.jsx("span",{className:`${k} badge-outline badge-xl rounded-[30px]`,children:r.admin_order_status.admin_label})}),e.jsx("td",{children:S}),e.jsxs("td",{children:["₹",r.total]}),e.jsxs("td",{children:["₹",r.paid_amount===""?0:r.paid_amount]}),e.jsxs("td",{children:["₹",r.kasar_amount===""?0:r.kasar_amount]}),e.jsx("td",{children:e.jsx("span",{className:"badge badge-outline",children:W[r.payment_type]})}),e.jsx("td",{children:e.jsx("span",{className:`${d} badge-outline`,children:X[r.payment_status]})}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>p(r.order_id),children:"View Order"})})]},r.order_id)})}):e.jsx("tbody",{children:e.jsx("tr",{children:e.jsx("td",{colSpan:9,className:"text-center",children:"No Orders available"})})})]})})]})}),(o==null?void 0:o.length)<j&&e.jsx("div",{className:"mt-2 flex justify-center items-center",children:e.jsx("button",{className:"btn btn-primary custom-rounded",onClick:L,disabled:f,children:f?e.jsxs(e.Fragment,{children:["Loading ",e.jsx(Z,{})]}):e.jsx(e.Fragment,{children:"Load More"})})})]})},pe=({isOpen:h,onClose:m,userId:j,setIsSubmit:w,onAddressAdded:P,fullname:N})=>{console.log(j),console.log(N);const{addAddress:y,loading:_}=ce(),[f,o]=c.useState({}),[l,p]=c.useState({building_number:"",area:"",lat:null,long:null,landmark:"",pincode:"",city:"",state:"",country:"",user_id:null,address_type:null,full_name:""}),[L,r]=c.useState(!1);c.useEffect(()=>{h?j&&p(a=>({...a,user_id:j,full_name:N})):(p({building_number:"",area:"",landmark:"",pincode:"",city:"",lat:null,long:null,state:"",country:"",user_id:null,address_type:null,full_name:""}),o({}))},[h,j]);const d=a=>{p({...l,area:a}),r(!0)},k=async a=>{console.log(a);try{const i=await V.geocodeByAddress(a),t=await V.getLatLng(i[0]),s=i[0].address_components;console.log(s);const n=u=>{const C=s.find(R=>u.some(T=>R.types.includes(T)));return(C==null?void 0:C.long_name)||""},v=n(["locality"])||n(["administrative_area_level_2"])||n(["postal_town"]),x=n(["administrative_area_level_1"]),A=n(["country"]),g=n(["postal_code"]);p(u=>({...u,area:i[0].formatted_address,lat:t.lat,long:t.lng,city:v,state:x,country:A,pincode:g}))}catch{F.error("Failed to fetch full address details",{className:"toast-error"})}},S=async a=>{a.preventDefault();const i={...l};i.pincode||delete i.pincode,i.landmark||delete i.landmark;try{await me.validate(l,{abortEarly:!1}),o({}),console.log(i),!i.lat&&!i.long&&F.error("Please search your address and  select it from dropdown"),j&&await y(i)&&m()}catch(t){if(t instanceof Q){const s={};t.inner.forEach(n=>{s[n.path||""]=n.message}),o(s)}else F.error("Failed to submit the form. Please try again.")}};if(h)return e.jsxs("div",{className:"fixed inset-0 grid overflow-auto items-center justify-center z-50 p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black opacity-50",onClick:m}),e.jsxs("div",{className:"bg-white p-5 rounded-lg shadow-lg min-w-[450px] !max-w-full z-10 relative",children:[e.jsx("button",{className:"btn btn-sm btn-icon btn-light btn-outline absolute top-0 right-0 mr-5 mt-5 lg:mr-5 shadow-default",onClick:m,children:e.jsx("i",{className:"ki-filled ki-cross"})}),e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Add New Address"}),e.jsxs("form",{onSubmit:S,children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"country",className:"block text-gray-700 font-semibold",children:"Address Type"}),e.jsxs("select",{className:"select select-lg text-sm",defaultValue:"",onChange:a=>p({...l,address_type:Number(a.target.value)}),children:[e.jsx("option",{value:"",disabled:!0,className:"badge-danger badge-outline",children:"Select Address Type"}),e.jsx("option",{value:"1",children:"Home"}),e.jsx("option",{value:"2",children:"Office"}),e.jsx("option",{value:"3",children:"Other"})]}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:f.address_type||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"area",className:"block text-gray-700 font-semibold",children:"Search Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"relative",children:e.jsx(oe,{value:l.area,onChange:d,onSelect:k,children:({getInputProps:a,suggestions:i,getSuggestionItemProps:t,loading:s})=>e.jsxs(e.Fragment,{children:[e.jsx("input",{...a({className:"w-full input border border-gray-300 rounded-md p-2",id:"area",type:"text",onFocus:()=>r(!0),onBlur:()=>r(!1)})}),L&&i.length>0&&e.jsx("div",{className:"absolute bg-white border z-10 border-gray-200 rounded-lg w-full text-sm max-h-[150px] overflow-y-auto",children:e.jsxs("ul",{className:"custom-ul",children:[s&&e.jsx("li",{className:"block px-4 py-[0.8rem] hover:bg-gray-100 w-full",children:"Loading..."}),!s&&i.map((n,v)=>{const{...x}=t(n);return e.jsx("li",{...x,className:"block px-2 py-[0.8rem] hover:bg-gray-100 w-full cursor-pointer font-style",children:n==null?void 0:n.description},v)})]})})]})})}),f.area&&e.jsx("p",{className:"w-full text-red-500 text-sm",children:f.area||" "})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"building_number",className:"block text-gray-700 font-semibold",children:"House Number and Society"}),e.jsx("input",{type:"text",id:"building_number",name:"building_number",autoComplete:"off",value:l.building_number,onChange:a=>p({...l,building_number:a.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:f.building_number||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"landmark",className:"block text-gray-700 font-semibold",children:"Landmark"}),e.jsx("input",{type:"text",id:"landmark",name:"landmark",autoComplete:"off",value:l.landmark,onChange:a=>p({...l,landmark:a.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:f.landmark||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"city",className:"block text-gray-700 font-semibold",children:"City"}),e.jsx("input",{type:"text",id:"city",name:"city",autoComplete:"off",value:l.city,onChange:a=>p({...l,city:a.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:f.city||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"pincode",className:"block text-gray-700 font-semibold",children:"Pin code"}),e.jsx("input",{type:"text",id:"pincode",name:"pincode",autoComplete:"off",value:l.pincode,onChange:a=>p({...l,pincode:a.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:f.pincode||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"state",className:"block text-gray-700 font-semibold",children:"State"}),e.jsx("input",{type:"text",id:"state",name:"state",autoComplete:"off",value:l.state,onChange:a=>p({...l,state:a.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:f.state||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"country",className:"block text-gray-700 font-semibold",children:"Country"}),e.jsx("input",{type:"text",id:"country",name:"country",autoComplete:"off",value:l.country,onChange:a=>p({...l,country:a.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:f.country||" "})]})]}),e.jsxs("div",{className:"flex justify-end mt-6",children:[e.jsx("button",{type:"button",onClick:m,className:"btn btn-light mr-2",disabled:_,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:_,className:`btn btn-primary ${_?"opacity-50 cursor-not-allowed":""}`,children:_?"Submitting...":"Submit"})]})]})]})]})},we=()=>{var R,T,$,B,I,z;const{id:h}=ee(),m=Number(h),j=te(),w=se(),[P,N]=c.useState(),[y,_]=c.useState(!1),[f,o]=c.useState(!1),[l,p]=c.useState(!1),[L,r]=c.useState(!1),{userData:d,fetchUser:k,count:S,loading:a}=U(),{restoreUser:i}=ie(),t=d==null?void 0:d.user,{hasPermission:s}=ae();if(c.useEffect(()=>{k(m),o(!1)},[m,f]),c.useEffect(()=>{_(w.pathname.split("/")[1]==="customer")},[w.pathname]),!t)return;const n=(R=t==null?void 0:t.orders)==null?void 0:R.reduce((b,O)=>b+O.kasar_amount,0),v=(T=t==null?void 0:t.orders)==null?void 0:T.reduce((b,O)=>b+O.total,0),x=()=>{N(!0)},A=b=>{j(y?`/customer/edit/${b}`:`/user/edit/${b}`)},g=async b=>{try{if((await E.fire({title:"Are you sure?",text:y?"You want to restore this customer?":"You want to restore this user?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#28a745",cancelButtonColor:"#6c757d",confirmButtonText:"Yes, restore it!",cancelButtonText:"No, cancel"})).isConfirmed){E.fire({title:y?"Restoring customer...":"Restoring user...",allowOutsideClick:!1,allowEscapeKey:!1,didOpen:()=>{E.showLoading()}});const{success:Y,message:M}=await i(b);o(!0),Y?E.fire("Restored!",M,"success"):E.fire("Failed",M,"error")}}catch(O){E.fire({title:"Error",text:O.message,icon:"error"})}},u=b=>{};if(!t&&a)return e.jsx(ne,{});const C=!!(t!=null&&t.deleted_at);return e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsx("div",{className:"flex flex-col bg-gray-50 p-5 rounded-md shadow-md",children:e.jsxs("div",{className:"flex justify-between gap-4 items-center",children:[e.jsxs("h1",{className:"text-xl font-semibold text-gray-900",children:[t==null?void 0:t.first_name," ",t==null?void 0:t.last_name]}),(d==null?void 0:d.total_pending_amount)!==0&&e.jsxs("div",{className:"flex flex-end items-center gap-2",children:[e.jsxs("span",{className:"text-sm font-medium text-red-700",children:["Total Pending Amount: ₹",d==null?void 0:d.total_pending_amount]}),e.jsxs("button",{className:"font-extralight btn btn-lg btn-light",onClick:x,children:["Pay ",e.jsx(K,{size:20})]})]}),C?e.jsxs("button",{className:"btn btn-sm btn-danger",onClick:()=>g(t==null?void 0:t.user_id),children:["Restore ",y?"Customer":"User"]}):t.role_id!==5&&e.jsx("span",{className:`mt-1 p-2 rounded-md text-sm ${G(t.role_id)}`,children:D[t.role_id]})]})}),e.jsx("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-5 lg:gap-7.5 mt-5",children:e.jsx("div",{className:"col-span-1",children:e.jsxs("div",{className:"card pb-2.5",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h3",{className:"card-title",children:"Personal Information"}),!C&&s(8,"update")&&e.jsxs("div",{className:"relative group",children:[e.jsxs("div",{className:"tooltip absolute bottom-full left-1/2 transform -translate-x-1/2 mb-1 hidden group-hover:flex items-center justify-center whitespace-nowrap",id:"tooltip_hover",children:["Edit ",y?"Customer":"User"]}),e.jsx("button",{className:"btn btn-light flex justify-center items-center rounded-full p-0 !h-8 !w-8","data-tooltip":"#tooltip_hover","data-tooltip-trigger":"hover",onClick:()=>A(t==null?void 0:t.user_id),children:e.jsx(le,{className:"h-5 w-5 text-gray-600 group-hover:text-gray-800 transition-colors duration-300"})})]})]}),e.jsx("div",{className:"card-body pt-4 pb-3",children:e.jsx("table",{className:"table-auto",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"text-sm font-medium text-gray-500 min-w-36 pb-5 pe-6",children:"Name:"}),e.jsxs("td",{className:"flex items-center gap-2.5 text-sm font-medium text-gray-700",children:[t==null?void 0:t.first_name," ",t==null?void 0:t.last_name]})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"text-sm font-medium text-gray-500 min-w-36 pb-5 pe-6",children:"Email:"}),e.jsx("td",{className:"flex items-center gap-2.5 text-sm font-medium text-gray-700",children:t==null?void 0:t.email})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"text-sm font-medium text-gray-500 min-w-36 pb-5 pe-6",children:"Mobile Number:"}),e.jsx("td",{className:"flex items-center gap-2.5 text-sm font-medium text-gray-700",children:t==null?void 0:t.mobile_number})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"text-sm font-medium text-gray-500 min-w-36 pb-5 pe-6",children:"Gender:"}),e.jsx("td",{className:"flex items-center gap-2.5 text-sm font-medium text-gray-700",children:re[t==null?void 0:t.gender]})]}),(t==null?void 0:t.image)!==""&&e.jsxs("tr",{children:[e.jsx("td",{className:"text-sm font-medium text-gray-500 min-w-36 pb-5 pe-6",children:"Profile Photo :"}),e.jsx("td",{className:"flex items-center gap-2.5 text-sm font-medium text-gray-700",children:e.jsx("span",{children:e.jsx("img",{className:"h-14 w-14 rounded-full",src:t==null?void 0:t.image})})})]}),(t==null?void 0:t.role_id)!==5&&e.jsxs("tr",{children:[e.jsx("td",{className:"text-sm font-medium text-gray-500 min-w-36 pb-5 pe-6",children:"Role:"}),e.jsx("td",{className:"flex items-center gap-2.5 text-sm font-medium text-gray-700",children:e.jsx("span",{className:`p-2 rounded-md text-sm ${G(t==null?void 0:t.role_id)}`,children:D[t==null?void 0:t.role_id]})})]}),(($=t==null?void 0:t.companies)==null?void 0:$.length)>0&&e.jsxs("tr",{children:[e.jsx("td",{className:"text-sm font-medium text-gray-500 min-w-36 pb-5 pe-6",children:"Company:"}),e.jsx("td",{className:"flex items-center gap-2.5 text-sm font-medium text-gray-700",children:Array.isArray(t==null?void 0:t.companies)&&t.companies.length>0?t.companies.map(b=>b).join(","):""})]}),((B=t==null?void 0:t.branches)==null?void 0:B.length)>0&&e.jsxs("tr",{children:[e.jsx("td",{className:"text-sm font-medium text-gray-500 min-w-36 pb-5 pe-6",children:"Branch:"}),e.jsx("td",{className:"flex items-center gap-2.5 text-sm font-medium text-gray-700",children:Array.isArray(t.branches)&&t.branches.length>0?t.branches.map(b=>b).join(", "):""})]}),((I=t==null?void 0:t.workshops)==null?void 0:I.length)>0&&e.jsxs("tr",{children:[e.jsx("td",{className:"text-sm font-medium text-gray-500 min-w-36 pb-5 pe-6",children:"Workshop:"}),e.jsx("td",{className:"flex items-center gap-2.5 text-sm font-medium text-gray-700",children:Array.isArray(t.workshops)&&t.workshops.length>0?t.workshops.map(b=>b).join(", "):""})]})]})})})]})})}),(t==null?void 0:t.role_id)===5&&t&&e.jsx(e.Fragment,{children:e.jsx(he,{user:t,userId:m,count:S})}),((z=t==null?void 0:t.orders)==null?void 0:z.length)>0&&e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6",children:e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"col-span-2 lg:col-span-1 flex",children:e.jsxs("div",{className:"card grow",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:"Orders Summary"})}),e.jsx("div",{className:"card-body pt-4 pb-3",children:e.jsx("div",{className:"scrollable-x-auto",children:e.jsx("table",{className:"table-auto",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"text-sm font-medium text-gray-500 min-w-36 pb-5 pe-6",children:"Total Kasar Amount:"}),e.jsxs("td",{className:"flex items-center gap-2.5 text-sm font-medium text-gray-700",children:["₹",n]})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"text-sm font-medium text-gray-500 min-w-36 pb-5 pe-6",children:"Total Order Amount:"}),e.jsxs("td",{className:"flex items-center gap-2.5 text-sm font-medium text-gray-700",children:["₹",v]})]}),d.total_pending_amount>0&&e.jsxs("tr",{children:[e.jsx("td",{className:"text-sm font-medium text-gray-500 min-w-36 pb-5 pe-6",children:"Total Pending Amount:"}),e.jsxs("td",{className:"flex items-center gap-2.5 text-sm font-medium text-gray-700",children:["₹",d.total_pending_amount]}),e.jsx("td",{children:e.jsx("span",{className:"relative bottom-2 left-4",children:e.jsxs("button",{className:"flex items-center gap-2.5 font-extralight btn btn-light ",onClick:x,children:["Pay ",e.jsx(K,{size:20})]})})})]})]})})})})]})})})}),e.jsx(ue,{modalOpen:P,onClose:()=>N(!1),userId:m,setRefetch:o,count:S}),l&&e.jsx(pe,{isOpen:l,onAddressAdded:u,setIsSubmit:r,onClose:()=>p(!1),userId:t==null?void 0:t.user_id,fullname:`${t==null?void 0:t.first_name} ${t==null?void 0:t.last_name}`})]})};export{we as default};
