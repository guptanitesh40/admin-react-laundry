import{i as C,w,r as s,e as T,j as e,R as A,x as B}from"./index-5pjO95yH.js";import{O as R}from"./OrderTable-DhHS0zKZ.js";import{O as I}from"./OrderTableFilter-DGeX2-Th.js";import{O as P}from"./enums-B2C1EGNG.js";import"./useGenerateInvoice-CPkFEBiM.js";import"./sweetalert2.esm.all-B0Dix5B2.js";import"./orderStatusClasses-HfHBGnti.js";import"./DueDetailsModel-PXvcocp8.js";import"./useGetWorkshops-OGAPluGG.js";import"./MultiSelect-DW9g1kZ9.js";const M=()=>{var p;const x=C(),t=w(),[l,d]=s.useState(!1),{hasPermission:y}=T(),[f,b]=s.useState([]),[i,g]=s.useState(null),[n,h]=s.useState(null),[j,c]=s.useState(null),[v,o]=s.useState(!1),[m,u]=s.useState({paymentStatusFilter:[],orderStatusFilter:[],paymentTypeFilter:void 0,customerFilter:[],pickupBoyFilter:[],deliveryBoyFilter:[],branchFilter:[]}),O=()=>{x("/order/add",{state:{prevUrl:t.pathname}})},S=r=>{u(r)};s.useEffect(()=>{var r;(r=t==null?void 0:t.state)!=null&&r.paymentType&&(d(!0),u(a=>({...a,paymentTypeFilter:t.state.paymentType==="Cash On Delivery"?1:2})))},[(p=t==null?void 0:t.state)==null?void 0:p.paymentType]);const F=(r=>Object.entries(P).filter(([a])=>r.includes(a)).map(([a,k])=>({label:a,value:k})))(["Order Placed","Branch Assigned","Pickup Boy Assigned","Pickup Complete","Items Received at Branch","Workshop Assigned","Order Received at Workshop","Order Work In Progress","Order Completed","Ready for delivery","Cancelled By Admin","Cancelled By Customer"]),N=()=>{n&&c(n)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"container-fixed",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-5 pb-7.5",children:[e.jsx("div",{className:"flex flex-col justify-center gap-2",children:e.jsx("h1",{className:"text-xl font-semibold leading-none text-gray-900",children:"Orders"})}),y(3,"create")&&e.jsx("div",{className:"flex items-center gap-2.5",children:e.jsxs("button",{onClick:O,className:"btn btn-primary",children:[e.jsx("i",{className:"ki-filled ki-plus-squared"}),"Add Order"]})})]}),e.jsxs("div",{className:"flex flex-auto items-center justify-between gap-2.5 mb-4 shadow-none",children:[e.jsxs("button",{className:"btn btn-sm btn-primary shadow-none",onClick:()=>d(!l),children:["Filters",l?e.jsx(A,{size:23}):e.jsx(B,{color:"skyblue",size:23})]}),e.jsxs("div",{className:"flex justify-center items-center gap-4",children:[i&&e.jsx("button",{className:"btn btn-sm btn-outline btn-success",onClick:N,children:i}),i==="Assign Delivery boy"&&e.jsx("button",{className:"btn btn-sm btn-light badge badge-delivered relative badge-outline badge-xl !bg-transparent !hover:[var(--tw-delivered)]",onClick:()=>o(!0),children:e.jsx("strong",{children:"Delivered"})})]})]})]}),e.jsx("div",{className:"container-fixed",children:e.jsx("div",{className:"grid gap-5 lg:gap-7.5",children:e.jsxs("div",{className:"card card-grid min-w-full",children:[l&&e.jsx(I,{filters:m,updateFilters:S,orderStatusOptions:F}),e.jsx(R,{filters:m,setSelectedOrderIds:b,selectedOrderIds:f,setNextStatus:g,selectedStatus:n,setSelectedStatus:h,nextStatus:i,trackingState:j,setTrackingState:c,isEarlyDelivery:v,setIsEarlyDelivery:o})]})})})]})};export{M as default};
