import{r as x,B as fe,V as k,a as $e,d as ee,m as K,y as kt,z as je,A as Ct,C as At,D as It,j as e,b as qe,n as Pt,v as Ot,t as Tt,E as Et,w as Ft,g as Dt,i as $t,L as qt,p as Lt,H as Rt,f as Mt,o as Ut,I as Bt}from"./index-CDPrEP8m.js";import{u as Gt}from"./useGetCategories-Cm0TulU0.js";import{u as Kt}from"./useGetPrice-BIL3Shoj.js";import{u as zt}from"./useGetCompanies-gW6Pbgvg.js";import{u as Vt}from"./useGetOrder-DVZl05jJ.js";import{u as Ht,c as Wt}from"./userSchema-BvRFUlv-.js";import{u as Jt}from"./useGetuser-CkV1Jiwk.js";const Zt=()=>{const[l,u]=x.useState(!1);return{loading:l,fetchProductsOnId:async b=>{const y=localStorage.getItem("authToken");u(!0);try{const i=await fetch(`${fe}/category/${b}/product`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${y}`}}),h=await i.json();if(!i.ok){k.error(h.message,{position:"top-center"}),u(!1);return}return(h==null?void 0:h.data)||[]}catch(i){return k.error((i==null?void 0:i.message)||"Network error: Failed to fetch.",{position:"top-center"}),[]}finally{u(!1)}}}},Qt=()=>{const[l,u]=x.useState(!1);return{loading:l,fetchServicesOnId:async(b,y)=>{const i=localStorage.getItem("authToken");u(!0);try{const h=await fetch(`${fe}/category/${b}/product/${y}/service`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`}}),c=await h.json();if(!h.ok){k.error(c.message,{position:"top-center"}),u(!1);return}return(c==null?void 0:c.data)||[]}catch(h){return k.error((h==null?void 0:h.message)||"Network error: Failed to fetch.",{position:"top-center"}),[]}finally{u(!1)}}}},Xt="http://35.154.167.170:3000/admin/coupon/apply",Yt=()=>{const[l,u]=x.useState(!1);return{applyCoupon:async(b,y,i)=>{const h=localStorage.getItem("authToken");u(!0);try{const c=await fetch(Xt,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${h}`},body:JSON.stringify({user_id:b,order_Total:y,coupon_code:i})}),m=await c.json();return c.ok?m.data:(k.error(m.message,{position:"top-center"}),!1)}catch{k.error("Unable to apply coupon code!")}finally{u(!1)}},loading:l}},es=()=>{const[l,u]=x.useState([]),[v,b]=x.useState(!1),y=async i=>{const h=localStorage.getItem("authToken");b(!0);try{const c=await fetch(`${fe}/admin/valid-coupons?${i}`,{method:"GET",headers:{Authorization:h?`Bearer ${h}`:""}}),m=await c.json();if(!c.ok){k.error(m.message,{position:"top-center"}),b(!1);return}u(m==null?void 0:m.data)}catch{k.error("Network error: Failed to fetch coupons.")}finally{b(!1)}};return x.useEffect(()=>{y()},[]),{validCoupons:l,fetchValidCoupons:y,loading:v}},ts="http://35.154.167.170:3000",ss=`${ts}/admin/orders`,as=()=>{const[l,u]=x.useState(!1);return{addOrder:async b=>{const y=localStorage.getItem("authToken");u(!0);try{const i=await fetch(ss,{method:"POST",headers:{Authorization:`Bearer ${y}`,"Content-Type":"application/json"},body:JSON.stringify(b)});if(!i.ok){const c=await i.json();return k.error(c.message,{position:"top-center"}),!1}const h=await i.json();return k.success(h.message,{position:"top-center"}),!0}catch(i){return k.error((i==null?void 0:i.message)||"Network error: Failed to fetch.",{position:"top-center"}),!1}finally{u(!1)}},loading:l}},rs=()=>{const[l,u]=x.useState(!1);return{updateOrder:async(b,y)=>{const i=localStorage.getItem("authToken"),h=`http://35.154.167.170:3000/admin/orders/${b}`;u(!0);try{const c=await fetch(h,{method:"PUT",headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"},body:JSON.stringify(y)});if(c.ok){const P=await c.json();return k.success(P.message,{position:"top-center"}),!0}const m=await c.json();return k.error(m.message,{position:"top-center"}),!1}catch(c){return k.error((c==null?void 0:c.message)||"Network error: Failed to fetch.",{position:"top-center"}),!1}finally{u(!1)}},loading:l}},ns=()=>{const[l,u]=x.useState([]),[v,b]=x.useState(!1);return{address:l,loading:v,fetchAddress:async i=>{var m;const h=localStorage.getItem("authToken"),c=`http://35.154.167.170:3000/address/${i}/user`;try{const P=await fetch(c,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${h}`}});if(!P.ok){const j=await P.json();k.error(j.message,{position:"top-center"});return}const S=await P.json(),E=((m=S==null?void 0:S.data)==null?void 0:m.result)||[];u(E)}catch(P){k.error((P==null?void 0:P.message)||"Network error: Failed to fetch.",{position:"top-center"})}finally{b(!1)}}}},os=$e().shape({category_id:K().nullable().required("Please select a category").test("required","Please select a category",l=>!!l),product_id:K().nullable().required("Please select a product").test("required","Please select a product",l=>!!l),service_id:K().nullable().required("Please select a service").test("required","Please select a service",l=>!!l),price:K().nullable().when(["category_id","product_id","service_id"],([l,u,v],b)=>l&&u&&v?b.required("Price is not available for the combination, please add a price"):b.nullable())}),ls=$e().shape({username:ee().required("Please enter username"),address_id:K().required("Please select address").test("required","Please select address",l=>!!l),express_delivery_charges:K().typeError("Express delivery charges must be a number").min(0,"Express delivery charges must be a positive number"),shipping_charges:K().typeError("Shipping charge must be a number").min(0,"Shipping charge must be a positive number"),payment_type:K().required("Please choose payment type").test("required","Please choose payment type",l=>!!l),payment_status:K().required("Please choose payment status").test("required","Please choose payment status",l=>!!l),paid_amount:K().typeError("Paid amount must be a number").min(0,"Paid amount must be a positive number").test("max-paid","Paid amount cannot be greater than the total amount",function(l){var u;return l==null||l===0?!0:l<=((u=this.options.context)==null?void 0:u.total)}),branch_id:K().required("Please select branch").test("required","Please select branch",l=>!!l),items:kt().of(os),company_id:K().typeError("Company must be selected").required("Company is required"),gstin:ee().transform(l=>l===""?null:l).nullable().matches(/^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/,"Please enter a valid GSTIN"),gst_company_name:ee().when("gstin",{is:l=>!!l,then:l=>l.required("Company name is required when GSTIN is provided"),otherwise:l=>l.notRequired()})}),Xe=()=>{const[l,u]=x.useState(!1);return{addAddress:async(b,y=!0)=>{var h;const i=localStorage.getItem("authToken");u(!0);try{const c=await fetch(`${fe}/address/admin`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},body:JSON.stringify(b)}),m=await c.json();return c.ok?(y&&k.success(m.message,{position:"top-center"}),(h=m==null?void 0:m.data)==null?void 0:h.result):(y&&k.error(m.message,{position:"top-center"}),!1)}catch(c){return k.error((c==null?void 0:c.message)||"Error adding banner",{position:"top-center"}),!1}finally{u(!1)}},loading:l}},Ye=$e().shape({pincode:ee().required("Pin Code is required").matches(/^[0-9]{6}$/,"Pincode must be 6 digit"),address_type:K().required("Address type is required"),building_number:ee().required("Building number is required"),area:ee().required("Area is required"),city:ee().required("City is required"),state:ee().required("State is required"),country:ee().required("Country is required"),landmark:ee().required("Landmark is required")});var Y={},Ne={},De,He;function is(){if(He)return De;He=1;var l="Expected a function",u=NaN,v="[object Symbol]",b=/^\s+|\s+$/g,y=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,h=/^0o[0-7]+$/i,c=parseInt,m=typeof je=="object"&&je&&je.Object===Object&&je,P=typeof self=="object"&&self&&self.Object===Object&&self,S=m||P||Function("return this")(),E=Object.prototype,j=E.toString,F=Math.max,V=Math.min,w=function(){return S.Date.now()};function g(n,p,C){var D,U,te,H,M,W,ae=0,re=!1,ne=!1,z=!0;if(typeof n!="function")throw new TypeError(l);p=_(p)||0,O(C)&&(re=!!C.leading,ne="maxWait"in C,te=ne?F(_(C.maxWait)||0,p):te,z="trailing"in C?!!C.trailing:z);function de($){var J=D,Z=U;return D=U=void 0,ae=$,H=n.apply(Z,J),H}function I($){return ae=$,M=setTimeout(B,p),re?de($):H}function we($){var J=$-W,Z=$-ae,pe=p-J;return ne?V(pe,te-Z):pe}function xe($){var J=$-W,Z=$-ae;return W===void 0||J>=p||J<0||ne&&Z>=te}function B(){var $=w();if(xe($))return ce($);M=setTimeout(B,we($))}function ce($){return M=void 0,z&&D?de($):(D=U=void 0,H)}function Se(){M!==void 0&&clearTimeout(M),ae=0,D=W=U=M=void 0}function ue(){return M===void 0?H:ce(w())}function me(){var $=w(),J=xe($);if(D=arguments,U=this,W=$,J){if(M===void 0)return I(W);if(ne)return M=setTimeout(B,p),de(W)}return M===void 0&&(M=setTimeout(B,p)),H}return me.cancel=Se,me.flush=ue,me}function O(n){var p=typeof n;return!!n&&(p=="object"||p=="function")}function s(n){return!!n&&typeof n=="object"}function r(n){return typeof n=="symbol"||s(n)&&j.call(n)==v}function _(n){if(typeof n=="number")return n;if(r(n))return u;if(O(n)){var p=typeof n.valueOf=="function"?n.valueOf():n;n=O(p)?p+"":p}if(typeof n!="string")return n===0?n:+n;n=n.replace(b,"");var C=i.test(n);return C||h.test(n)?c(n.slice(2),C?2:8):y.test(n)?u:+n}return De=g,De}var ge={},We;function ds(){return We||(We=1,Object.defineProperty(ge,"__esModule",{value:!0}),ge.compose=function(){for(var u=arguments.length,v=Array(u),b=0;b<u;b++)v[b]=arguments[b];return function(){for(var y=arguments.length,i=Array(y),h=0;h<y;h++)i[h]=arguments[h];v.forEach(function(c){return c&&c.apply(void 0,i)})}},ge.pick=function(u){for(var v=arguments.length,b=Array(v>1?v-1:0),y=1;y<v;y++)b[y-1]=arguments[y];return b.reduce(function(i,h){return u&&u.hasOwnProperty(h)&&(i[h]=u[h]),i},{})}),ge}var Je;function cs(){if(Je)return Ne;Je=1,Object.defineProperty(Ne,"__esModule",{value:!0});var l=Object.assign||function(w){for(var g=1;g<arguments.length;g++){var O=arguments[g];for(var s in O)Object.prototype.hasOwnProperty.call(O,s)&&(w[s]=O[s])}return w},u=function(){function w(g,O){for(var s=0;s<O.length;s++){var r=O[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(g,r.key,r)}}return function(g,O,s){return O&&w(g.prototype,O),s&&w(g,s),g}}(),v=Ct(),b=P(v),y=At(),i=P(y),h=is(),c=P(h),m=ds();function P(w){return w&&w.__esModule?w:{default:w}}function S(w,g){if(!(w instanceof g))throw new TypeError("Cannot call a class as a function")}function E(w,g){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:w}function j(w,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);w.prototype=Object.create(g&&g.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(w,g):w.__proto__=g)}var F=function(g){return{mainText:g.main_text,secondaryText:g.secondary_text}},V=function(w){j(g,w);function g(O){S(this,g);var s=E(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,O));return s.init=function(){if(!window.google)throw new Error("[react-places-autocomplete]: Google Maps JavaScript API library must be loaded. See: https://github.com/kenny-hibino/react-places-autocomplete#load-google-library");if(!window.google.maps.places)throw new Error("[react-places-autocomplete]: Google Maps Places library must be loaded. Please add `libraries=places` to the src URL. See: https://github.com/kenny-hibino/react-places-autocomplete#load-google-library");s.autocompleteService=new window.google.maps.places.AutocompleteService,s.autocompleteOK=window.google.maps.places.PlacesServiceStatus.OK,s.setState(function(r){return r.ready?null:{ready:!0}})},s.autocompleteCallback=function(r,_){if(s.setState({loading:!1}),_!==s.autocompleteOK){s.props.onError(_,s.clearSuggestions);return}var n=s.props.highlightFirstSuggestion;s.setState({suggestions:r.map(function(p,C){return{id:p.id,description:p.description,placeId:p.place_id,active:!!(n&&C===0),index:C,formattedSuggestion:F(p.structured_formatting),matchedSubstrings:p.matched_substrings,terms:p.terms,types:p.types}})})},s.fetchPredictions=function(){var r=s.props.value;r.length&&(s.setState({loading:!0}),s.autocompleteService.getPlacePredictions(l({},s.props.searchOptions,{input:r}),s.autocompleteCallback))},s.clearSuggestions=function(){s.setState({suggestions:[]})},s.clearActive=function(){s.setState({suggestions:s.state.suggestions.map(function(r){return l({},r,{active:!1})})})},s.handleSelect=function(r,_,n){s.clearSuggestions(),s.props.onSelect?s.props.onSelect(r,_,n):s.props.onChange(r)},s.getActiveSuggestion=function(){return s.state.suggestions.find(function(r){return r.active})},s.selectActiveAtIndex=function(r){var _=s.state.suggestions.find(function(n){return n.index===r}).description;s.setActiveAtIndex(r),s.props.onChange(_)},s.selectUserInputValue=function(){s.clearActive(),s.props.onChange(s.state.userInputValue)},s.handleEnterKey=function(){var r=s.getActiveSuggestion();r===void 0?s.handleSelect(s.props.value,null,null):s.handleSelect(r.description,r.placeId,r)},s.handleDownKey=function(){if(s.state.suggestions.length!==0){var r=s.getActiveSuggestion();r===void 0?s.selectActiveAtIndex(0):r.index===s.state.suggestions.length-1?s.selectUserInputValue():s.selectActiveAtIndex(r.index+1)}},s.handleUpKey=function(){if(s.state.suggestions.length!==0){var r=s.getActiveSuggestion();r===void 0?s.selectActiveAtIndex(s.state.suggestions.length-1):r.index===0?s.selectUserInputValue():s.selectActiveAtIndex(r.index-1)}},s.handleInputKeyDown=function(r){switch(r.key){case"Enter":r.preventDefault(),s.handleEnterKey();break;case"ArrowDown":r.preventDefault(),s.handleDownKey();break;case"ArrowUp":r.preventDefault(),s.handleUpKey();break;case"Escape":s.clearSuggestions();break}},s.setActiveAtIndex=function(r){s.setState({suggestions:s.state.suggestions.map(function(_,n){return n===r?l({},_,{active:!0}):l({},_,{active:!1})})})},s.handleInputChange=function(r){var _=r.target.value;if(s.props.onChange(_),s.setState({userInputValue:_}),!_){s.clearSuggestions();return}s.props.shouldFetchSuggestions&&s.debouncedFetchPredictions()},s.handleInputOnBlur=function(){s.mousedownOnSuggestion||s.clearSuggestions()},s.getActiveSuggestionId=function(){var r=s.getActiveSuggestion();return r?"PlacesAutocomplete__suggestion-"+r.placeId:void 0},s.getIsExpanded=function(){return s.state.suggestions.length>0},s.getInputProps=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(r.hasOwnProperty("value"))throw new Error("[react-places-autocomplete]: getInputProps does not accept `value`. Use `value` prop instead");if(r.hasOwnProperty("onChange"))throw new Error("[react-places-autocomplete]: getInputProps does not accept `onChange`. Use `onChange` prop instead");var _={type:"text",autoComplete:"off",role:"combobox","aria-autocomplete":"list","aria-expanded":s.getIsExpanded(),"aria-activedescendant":s.getActiveSuggestionId(),disabled:!s.state.ready};return l({},_,r,{onKeyDown:(0,m.compose)(s.handleInputKeyDown,r.onKeyDown),onBlur:(0,m.compose)(s.handleInputOnBlur,r.onBlur),value:s.props.value,onChange:function(p){s.handleInputChange(p)}})},s.getSuggestionItemProps=function(r){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=s.handleSuggestionMouseEnter.bind(s,r.index),p=s.handleSuggestionClick.bind(s,r);return l({},_,{key:r.id,id:s.getActiveSuggestionId(),role:"option",onMouseEnter:(0,m.compose)(n,_.onMouseEnter),onMouseLeave:(0,m.compose)(s.handleSuggestionMouseLeave,_.onMouseLeave),onMouseDown:(0,m.compose)(s.handleSuggestionMouseDown,_.onMouseDown),onMouseUp:(0,m.compose)(s.handleSuggestionMouseUp,_.onMouseUp),onTouchStart:(0,m.compose)(s.handleSuggestionTouchStart,_.onTouchStart),onTouchEnd:(0,m.compose)(s.handleSuggestionMouseUp,_.onTouchEnd),onClick:(0,m.compose)(p,_.onClick)})},s.handleSuggestionMouseEnter=function(r){s.setActiveAtIndex(r)},s.handleSuggestionMouseLeave=function(){s.mousedownOnSuggestion=!1,s.clearActive()},s.handleSuggestionMouseDown=function(r){r.preventDefault(),s.mousedownOnSuggestion=!0},s.handleSuggestionTouchStart=function(){s.mousedownOnSuggestion=!0},s.handleSuggestionMouseUp=function(){s.mousedownOnSuggestion=!1},s.handleSuggestionClick=function(r,_){_&&_.preventDefault&&_.preventDefault();var n=r.description,p=r.placeId;s.handleSelect(n,p,r),setTimeout(function(){s.mousedownOnSuggestion=!1})},s.state={loading:!1,suggestions:[],userInputValue:O.value,ready:!O.googleCallbackName},s.debouncedFetchPredictions=(0,c.default)(s.fetchPredictions,O.debounce),s}return u(g,[{key:"componentDidMount",value:function(){var s=this.props.googleCallbackName;if(s){var r=window.google&&window.google.maps&&window.google.maps.places;r?this.init():window[s]=this.init}else this.init()}},{key:"componentWillUnmount",value:function(){var s=this.props.googleCallbackName;s&&window[s]&&delete window[s]}},{key:"render",value:function(){return this.props.children({getInputProps:this.getInputProps,getSuggestionItemProps:this.getSuggestionItemProps,loading:this.state.loading,suggestions:this.state.suggestions})}}]),g}(b.default.Component);return V.propTypes={onChange:i.default.func.isRequired,value:i.default.string.isRequired,children:i.default.func.isRequired,onError:i.default.func,onSelect:i.default.func,searchOptions:i.default.shape({bounds:i.default.object,componentRestrictions:i.default.object,location:i.default.object,offset:i.default.oneOfType([i.default.number,i.default.string]),radius:i.default.oneOfType([i.default.number,i.default.string]),types:i.default.array}),debounce:i.default.number,highlightFirstSuggestion:i.default.bool,shouldFetchSuggestions:i.default.bool,googleCallbackName:i.default.string},V.defaultProps={onError:function(g,O){return console.error(`[react-places-autocomplete]: error happened when fetching data from Google Maps API.
Please check the docs here (https://developers.google.com/maps/documentation/javascript/places#place_details_responses)
Status: `,g)},searchOptions:{},debounce:200,highlightFirstSuggestion:!1,shouldFetchSuggestions:!0},Ne.default=V,Ne}var ie={},Ze;function us(){return Ze||(Ze=1,Object.defineProperty(ie,"__esModule",{value:!0}),ie.geocodeByAddress=function(u){var v=new window.google.maps.Geocoder,b=window.google.maps.GeocoderStatus.OK;return new Promise(function(y,i){v.geocode({address:u},function(h,c){c!==b&&i(c),y(h)})})},ie.getLatLng=function(u){return new Promise(function(v,b){try{var y={lat:u.geometry.location.lat(),lng:u.geometry.location.lng()};v(y)}catch(i){b(i)}})},ie.geocodeByPlaceId=function(u){var v=new window.google.maps.Geocoder,b=window.google.maps.GeocoderStatus.OK;return new Promise(function(y,i){v.geocode({placeId:u},function(h,c){c!==b&&i(c),y(h)})})}),ie}var Qe;function ms(){if(Qe)return Y;Qe=1,Object.defineProperty(Y,"__esModule",{value:!0}),Y.getLatLng=Y.geocodeByPlaceId=Y.geocodeByAddress=void 0;var l=cs(),u=b(l),v=us();function b(y){return y&&y.__esModule?y:{default:y}}return Y.geocodeByAddress=v.geocodeByAddress,Y.geocodeByPlaceId=v.geocodeByPlaceId,Y.getLatLng=v.getLatLng,Y.default=u.default,Y}var he=ms();const et=It(he),ps=({isOpen:l,onClose:u,userId:v,setIsSubmit:b,onAddressAdded:y,fullname:i})=>{const{addAddress:h,loading:c}=Xe(),[m,P]=x.useState({}),[S,E]=x.useState(!1),[j,F]=x.useState({building_number:"",area:"",lat:null,long:null,landmark:"",pincode:"",city:"",state:"",country:"",user_id:null,address_type:null,full_name:""}),[V,w]=x.useState(!1);x.useEffect(()=>{l?v&&F(r=>({...r,user_id:v,full_name:i})):(F({building_number:"",area:"",landmark:"",pincode:"",city:"",lat:null,long:null,state:"",country:"",user_id:null,address_type:null,full_name:""}),P({}))},[l,v]);const g=r=>{F({...j,area:r}),w(!0)},O=async r=>{F({...j,area:r});try{const _=await he.geocodeByAddress(r),n=await he.getLatLng(_[0]);n&&F(p=>({...p,lat:n==null?void 0:n.lat,long:n==null?void 0:n.lng}))}catch{k.error("Failed to fetch address detail",{className:"toast-error"})}},s=async r=>{r.preventDefault();try{if(await Ye.validate(j,{abortEarly:!1}),v){const _=await h(j);_&&(y(_),u(),b(!0))}}catch(_){if(_ instanceof qe){const n={};_.inner.forEach(p=>{n[p.path||""]=p.message}),P(n)}else k.error("Failed to submit the form. Please try again.")}};if(l)return e.jsxs("div",{className:"fixed inset-0 grid overflow-auto items-center justify-center z-50 p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black opacity-50",onClick:u}),e.jsxs("div",{className:"bg-white p-5 rounded-lg shadow-lg max-w-lg smobile:min-w-[85%] z-10 relative",children:[e.jsx("button",{className:"btn btn-sm btn-icon btn-light btn-outline absolute top-0 right-0 mr-5 mt-5 lg:mr-5 shadow-default",onClick:u,children:e.jsx("i",{className:"ki-filled ki-cross"})}),e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Add New Address"}),e.jsxs("form",{onSubmit:s,children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"country",className:"block text-gray-700 font-semibold",children:"Address Type"}),e.jsxs("select",{className:"select select-lg text-sm",onChange:r=>F({...j,address_type:Number(r.target.value)}),children:[e.jsx("option",{value:"",selected:!0,disabled:!0,className:"badge-danger badge-outline",children:"Select Address Type"}),e.jsx("option",{value:"1",children:"Home"}),e.jsx("option",{value:"2",children:"Office"}),e.jsx("option",{value:"3",children:"Other"})]}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:m.address_type||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"building_number",className:"block text-gray-700 font-semibold",children:"Building Number"}),e.jsx("input",{type:"text",id:"building_number",name:"building_number",autoComplete:"off",value:j.building_number,onChange:r=>F({...j,building_number:r.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:m.building_number||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"area",className:"block text-gray-700 font-semibold",children:"Area"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"relative",children:e.jsx(et,{value:j.area,onChange:g,onSelect:O,children:({getInputProps:r,suggestions:_,getSuggestionItemProps:n,loading:p})=>e.jsxs(e.Fragment,{children:[e.jsx("input",{...r({className:"w-full input border border-gray-300 rounded-md p-2",id:"area",type:"text",onFocus:()=>w(!0),onBlur:()=>w(!1)})}),V&&_.length>0&&e.jsx("div",{className:"absolute bg-white border z-10 border-gray-200 rounded-lg w-full text-sm max-h-[150px] overflow-y-auto",children:e.jsxs("ul",{className:"custom-ul",children:[p&&e.jsx("li",{className:"block px-4 py-[0.8rem] hover:bg-gray-100 w-full",children:"Loading..."}),!p&&_.map((C,D)=>{const{...U}=n(C);return e.jsx("li",{...U,className:"block px-2 py-[0.8rem] hover:bg-gray-100 w-full cursor-pointer font-style",children:C==null?void 0:C.description},D)})]})})]})})}),m.area&&e.jsx("p",{className:"w-full text-red-500 text-sm",children:m.area||" "})||S&&e.jsx("p",{className:"aam-error-label",children:"please select valid area from dropdown"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"landmark",className:"block text-gray-700 font-semibold",children:"Landmark"}),e.jsx("input",{type:"text",id:"landmark",name:"landmark",autoComplete:"off",value:j.landmark,onChange:r=>F({...j,landmark:r.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:m.landmark||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"pincode",className:"block text-gray-700 font-semibold",children:"Pin code"}),e.jsx("input",{type:"text",id:"pincode",name:"pincode",autoComplete:"off",value:j.pincode,onChange:r=>F({...j,pincode:r.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:m.pincode||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"city",className:"block text-gray-700 font-semibold",children:"City"}),e.jsx("input",{type:"text",id:"city",name:"city",autoComplete:"off",value:j.city,onChange:r=>F({...j,city:r.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:m.city||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"state",className:"block text-gray-700 font-semibold",children:"State"}),e.jsx("input",{type:"text",id:"state",name:"state",autoComplete:"off",value:j.state,onChange:r=>F({...j,state:r.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:m.state||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"country",className:"block text-gray-700 font-semibold",children:"Country"}),e.jsx("input",{type:"text",id:"country",name:"country",autoComplete:"off",value:j.country,onChange:r=>F({...j,country:r.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:m.country||" "})]})]}),e.jsxs("div",{className:"flex justify-end mt-6",children:[e.jsx("button",{type:"button",onClick:u,className:"btn btn-light mr-2",disabled:c,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:c,className:`btn btn-primary ${c?"opacity-50 cursor-not-allowed":""}`,children:c?"Submitting...":"Submit"})]})]})]})]})},gs=({isOpen:l,onClose:u,setIsSubmit:v,onCustomerCreated:b})=>{const{addUser:y,loading:i}=Ht(),{addAddress:h,loading:c}=Xe(),[m,P]=x.useState({first_name:"",last_name:"",email:"",mobile_number:"",gender:null,role_id:5}),[S,E]=x.useState({building_number:"",area:"",landmark:"",pincode:"",city:"",state:"",country:"",user_id:null,full_name:"",address_type:null}),[j,F]=x.useState({}),[V,w]=x.useState(!1),[g,O]=x.useState(!1);x.useEffect(()=>{l||(P({first_name:"",last_name:"",email:"",mobile_number:"",gender:null,role_id:5}),E({building_number:"",area:"",landmark:"",pincode:"",city:"",state:"",country:"",user_id:null,full_name:"",address_type:null}),F({}))},[l]);const s=n=>{E({...S,area:n}),O(!0)},r=async n=>{E({...S,area:n});try{const p=await he.geocodeByAddress(n),C=await he.getLatLng(p[0]);C&&E(D=>({...D,lat:C==null?void 0:C.lat,long:C==null?void 0:C.lng}))}catch{k.error("Failed to fetch address detail",{className:"toast-error"})}},_=async n=>{n.preventDefault();try{await Wt().validate(m,{abortEarly:!1}),await Ye.validate(S,{abortEarly:!1});const p=await y(m);if(p!=null&&p.user_id){const C={...S,user_id:p.user_id,full_name:`${p.first_name} ${p.last_name}`},D=await h(C,!1);D&&(b(p,D),u(),v(!0))}}catch(p){if(p instanceof qe){const C={};p.inner.forEach(D=>{C[D.path||""]=D.message}),F(C)}else k.error("Failed to submit the form. Please try again.")}};return l?e.jsxs("div",{className:"fixed inset-0 grid overflow-auto items-center justify-center z-50 p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black opacity-50",onClick:u}),e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg max-w-5xl w-full smobile:min-w-[85%] z-10 relative",children:[e.jsx("button",{className:"btn btn-sm btn-icon btn-light btn-outline absolute top-0 right-0 mr-5 mt-5 lg:mr-5 shadow-default",onClick:u,children:e.jsx("i",{className:"ki-filled ki-cross"})}),e.jsxs("form",{children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Customer Info"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-1",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"first_name",className:"block text-gray-700 font-semibold",children:"First name"}),e.jsx("input",{type:"text",id:"first_name",name:"first_name",autoComplete:"off",value:m.first_name||"",onChange:n=>P({...m,first_name:n.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"text-red-500 text-sm",children:j.first_name||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"last_name",className:"block text-gray-700 font-semibold",children:"Last name"}),e.jsx("input",{type:"text",id:"last_name",name:"last_name",autoComplete:"off",value:m.last_name,onChange:n=>P({...m,last_name:n.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"text-red-500 text-sm",children:j.last_name||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-gray-700 font-semibold",children:"Email"}),e.jsx("input",{type:"text",id:"email",name:"email",autoComplete:"off",value:m.email,onChange:n=>P({...m,email:n.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"text-red-500 text-sm",children:j.email||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"mobile_number",className:"block text-gray-700 font-semibold",children:"Mobile Number"}),e.jsx("input",{type:"text",id:"mobile_number",name:"mobile_number",autoComplete:"off",value:m.mobile_number,onChange:n=>P({...m,mobile_number:n.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"text-red-500 text-sm",children:j.mobile_number||" "})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"mb-2 block text-gray-700 font-semibold",children:"Gender"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:"gender",value:1,checked:m.gender===1,onChange:n=>P({...m,gender:parseInt(n.target.value)}),className:"radio radio-primary"}),e.jsx("span",{className:"text-sm",children:"Male"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:"gender",value:2,checked:m.gender===2,onChange:n=>P({...m,gender:parseInt(n.target.value)}),className:"radio radio-primary"}),e.jsx("span",{className:"text-sm",children:"Female"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:"gender",value:3,checked:m.gender===3,onChange:n=>P({...m,gender:parseInt(n.target.value)}),className:"radio radio-primary"}),e.jsx("span",{className:"text-sm",children:"Other"})]})]}),e.jsx("p",{className:"text-red-500 text-sm",children:j.gender||" "})]})]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Address"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-1",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"country",className:"block text-gray-700 font-semibold",children:"Address Type"}),e.jsxs("select",{className:"select select-lg text-sm w-full p-2 border border-gray-300 rounded-md",onChange:n=>E({...S,address_type:Number(n.target.value)}),children:[e.jsx("option",{value:"",selected:!0,disabled:!0,className:"badge-danger badge-outline",children:"Select Address Type"}),e.jsx("option",{value:"1",children:"Home"}),e.jsx("option",{value:"2",children:"Office"}),e.jsx("option",{value:"3",children:"Other"})]}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:j.address_type||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"building_number",className:"block text-gray-700 font-semibold",children:"Building Number"}),e.jsx("input",{type:"text",id:"building_number",name:"building_number",autoComplete:"off",value:S.building_number,onChange:n=>E({...S,building_number:n.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:j.building_number||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"area",className:"block text-gray-700 font-semibold",children:"Area"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"relative",children:e.jsx(et,{value:S.area,onChange:s,onSelect:r,children:({getInputProps:n,suggestions:p,getSuggestionItemProps:C,loading:D})=>e.jsxs(e.Fragment,{children:[e.jsx("input",{...n({className:"w-full input border border-gray-300 rounded-md p-2",id:"area",type:"text",onFocus:()=>O(!0),onBlur:()=>O(!1)})}),g&&p.length>0&&e.jsx("div",{className:"absolute bg-white border z-10 border-gray-200 rounded-lg w-full text-sm max-h-[150px] overflow-y-auto",children:e.jsxs("ul",{className:"custom-ul",children:[D&&e.jsx("li",{className:"block px-4 py-[0.8rem] hover:bg-gray-100 w-full",children:"Loading..."}),!D&&p.map((U,te)=>{const{...H}=C(U);return e.jsx("li",{...H,className:"block px-2 py-[0.8rem] hover:bg-gray-100 w-full cursor-pointer font-style",children:U==null?void 0:U.description},te)})]})})]})})}),j.area&&e.jsx("p",{className:"w-full text-red-500 text-sm",children:j.area||" "})||V&&e.jsx("p",{className:"aam-error-label",children:"please select valid area from dropdown"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"landmark",className:"block text-gray-700 font-semibold",children:"Landmark"}),e.jsx("input",{type:"text",id:"landmark",name:"landmark",autoComplete:"off",value:S.landmark,onChange:n=>E({...S,landmark:n.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:j.landmark||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"pincode",className:"block text-gray-700 font-semibold",children:"Pin code"}),e.jsx("input",{type:"text",id:"pincode",name:"pincode",autoComplete:"off",value:S.pincode,onChange:n=>E({...S,pincode:n.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:j.pincode||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"city",className:"block text-gray-700 font-semibold",children:"City"}),e.jsx("input",{type:"text",id:"city",name:"city",autoComplete:"off",value:S.city,onChange:n=>E({...S,city:n.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:j.city||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"state",className:"block text-gray-700 font-semibold",children:"State"}),e.jsx("input",{type:"text",id:"state",name:"state",autoComplete:"off",value:S.state,onChange:n=>E({...S,state:n.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:j.state||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"country",className:"block text-gray-700 font-semibold",children:"Country"}),e.jsx("input",{type:"text",id:"country",name:"country",autoComplete:"off",value:S.country,onChange:n=>E({...S,country:n.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:j.country||" "})]})]})]})]}),e.jsxs("div",{className:"flex justify-end mt-6",children:[e.jsx("button",{type:"button",onClick:u,className:"btn btn-light mr-2",disabled:i||c,children:"Cancel"}),e.jsx("button",{type:"button",onClick:_,disabled:i||c,className:`btn btn-primary ${i||c?"opacity-50 cursor-not-allowed":""}`,children:i||c?"Submitting...":"Submit"})]})]})]})]}):null},hs=()=>{const[l,u]=x.useState(null),[v,b]=x.useState(!0),y=async()=>{const i=localStorage.getItem("authToken");if(!i){k.error("Authentication token not found!"),b(!1);return}try{const h=await fetch(`${fe}/admin/settings`,{method:"GET",headers:{Authorization:`Bearer ${i}`}}),c=await h.json();if(!h.ok){k.error((c==null?void 0:c.message)||"Failed to fetch settings",{position:"top-center"});return}u((c==null?void 0:c.data)||{})}catch{k.error("Network Error: Failed to fetch settings")}finally{b(!1)}};return x.useEffect(()=>{y()},[]),{settings:l,loading:v}},Ns=()=>{var Be;const{prices:l}=Kt(),{categories:u,loading:v}=Gt(),{fetchProductsOnId:b,loading:y}=Zt(),{fetchServicesOnId:i,loading:h}=Qt(),[c,m]=x.useState(""),[P,S]=x.useState(!0),{id:E}=Pt(),{updateOrder:j,loading:F}=rs(),{addOrder:V,loading:w}=as(),g=Number(E),O=1e3,s=1,{companies:r,loading:_}=zt(s,O),[n,p]=x.useState(!1),[C,D]=x.useState(!1),[U,te]=x.useState(!1),[H,M]=x.useState(!1),{users:W,fetchUsersByRole:ae}=Ot(),{validCoupons:re,fetchValidCoupons:ne}=es(),{branches:z,loading:de}=Tt(s,O),{order:I,loading:we,fetchOrder:xe}=Vt(),{address:B,fetchAddress:ce}=ns(),{applyCoupon:Se}=Yt(),{userData:ue,fetchUser:me}=Jt(),{generatePaymentLink:$,loading:J}=Et(),{settings:Z,loading:pe}=hs(),oe=ue==null?void 0:ue.user,ke=Ft(),Ce=((Be=ke==null?void 0:ke.state)==null?void 0:Be.prevUrl)||"/orders",Ae=x.useRef(null),[Ie,tt]=x.useState({}),[Pe,st]=x.useState({}),Oe=x.useRef(null),[Le,Re]=x.useState(!1),[Me,Te]=x.useState(null),Ee=Dt(t=>t==null?void 0:t.user),be=$t(),[a,A]=x.useState({coupon_code:"",coupon_discount:null,express_delivery_charges:null,express_delivery_hour:null,normal_delivery_charges:null,delivery_by:2,payment_type:1,payment_status:null,sub_total:0,paid_amount:null,kasar_amount:null,transaction_id:"",address_id:null,username:"",user_id:null,items:[{category_id:null,product_id:null,service_id:null,product_name:"",service_name:"",description:null,price:null,quantity:1,item_Total:null,showDescription:!1}],total:0,branch_id:null,order_status:null,company_id:null,gstin:"",gst_company_name:""}),[at,rt]=x.useState({coupon_code:"",coupon_discount:null,express_delivery_charges:null,express_delivery_hour:null,normal_delivery_charges:null,delivery_by:null,payment_type:null,payment_status:null,sub_total:0,paid_amount:null,kasar_amount:null,transaction_id:"",address_id:null,username:"",user_id:null,items:[{category_id:null,product_id:null,service_id:null,product_name:"",service_name:"",description:null,price:null,quantity:1,item_Total:null,showDescription:!1}],total:0,branch_id:null,order_status:null,company_id:null,gstin:"",gst_company_name:""}),[R,nt]=x.useState({});x.useEffect(()=>{const t=o=>{Oe.current&&!Oe.current.contains(o.target)&&Ae.current&&!Ae.current.contains(o.target)&&(S(!1),Re(!1))};return document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[]),x.useEffect(()=>{(async()=>{await xe(g)})()},[g]),x.useEffect(()=>{if(B!=null&&B.length){const t=B.find(o=>o.is_default)||B[0];A(o=>({...o,address_id:t?t.address_id:null}))}},[B]),x.useEffect(()=>{(async()=>{a.user_id&&(await ce(a.user_id),await ne(a.user_id),await me(a.user_id)),H&&(await ce(a.user_id),M(!1))})()},[a.user_id,H]),x.useEffect(()=>{g||A(t=>({...t,payment_status:a.payment_type===1?1:null}))},[a.payment_type]),x.useEffect(()=>{(async()=>{Le&&(!c||c.trim()==="")?(S(!0),await ae(5)):c&&P&&await ae(5,c)})()},[Le,c,P]),x.useEffect(()=>{if(I){const t=`${I.user.first_name} ${I.user.last_name}`;m(t),S(!1);const o={coupon_code:I.coupon_code||"",coupon_discount:I.coupon_discount||null,express_delivery_charges:I.express_delivery_charges||null,express_delivery_hour:I.express_delivery_hour||null,normal_delivery_charges:I.normal_delivery_charges||null,payment_type:I.payment_type||null,payment_status:I.payment_status||null,sub_total:I.sub_total||0,paid_amount:I.paid_amount||null,kasar_amount:I.kasar_amount||null,transaction_id:I.transaction_id||"",address_id:I.address_id,username:t,user_id:I.user_id||null,items:I.items.map(d=>{var X,le,ye,L;const N=d.category.category_id,f=((X=d.product)==null?void 0:X.product_id)||null,T=((le=d.service)==null?void 0:le.service_id)||null,q=((ye=d.product)==null?void 0:ye.name)||"",G=((L=d.service)==null?void 0:L.name)||"";return{category_id:N,product_id:f,service_id:T,product_name:q,service_name:G,description:d.description||null,price:d.price,quantity:d.quantity,item_Total:d.price*d.quantity,showDescription:!!d.description}}),total:(I.sub_total||0)+(I.express_delivery_charges||0)+(I.normal_delivery_charges||0),branch_id:I.branch_id,order_status:I.order_status,delivery_by:I.delivery_by,company_id:I.company_id,gstin:I.gstin,gst_company_name:I.gst_company_name};A(o),rt(o),I.gst_company_name&&I.gstin&&p(!0)}},[I]),x.useEffect(()=>{const t=(a.paid_amount||0)+(a.kasar_amount||0),o=a.total-t;let d=a.payment_status;a.total>0&&t===a.total?(d=2,Te(0)):t>0&&t<a.total?(d=3,Te(o)):t===0&&a.total>0&&(d=1,Te(o)),A(N=>({...N,payment_status:d}))},[a.paid_amount,a.kasar_amount,a.total]);const ot=async t=>{t.preventDefault();try{const o=a.items.map(q=>({category_id:Number(q.category_id),product_id:Number(q.product_id),service_id:Number(q.service_id),description:q.description,price:Number(q.price),quantity:Number(q.quantity)})),d={...a,address_id:Number(a.address_id),coupon_discount:Number(a.coupon_discount),normal_delivery_charges:Number(a.normal_delivery_charges),kasar_amount:Number(a.kasar_amount),paid_amount:Number(a.paid_amount),express_delivery_charges:Number(a.express_delivery_charges),payment_type:Number(a.payment_type),payment_status:Number(a.payment_status),order_status:g?a.order_status:4,items:o,company_id:a.company_id,gstin:a.gstin,gst_company_name:a.gst_company_name},N=a.total;if(await ls.validate(d,{abortEarly:!1,context:{total:N}}),!Object.keys(a).some(q=>a[q]!==at[q])){be(`${Ce}`);return}let T;I?T=await j(g,d):T=await V(d),T&&be(`${Ce}`)}catch(o){if(o instanceof qe){const d={};o.inner.forEach(N=>{d[N.path||""]=N.message}),nt(d)}else k.error("Failed to submit the form. Please try again.")}},lt=t=>{t.target.value===""&&A(o=>({...o,address_id:null})),m(t.target.value),S(!0)},it=t=>{const o=`${t.first_name} ${t.last_name}`;m(o),S(!1),A({...a,username:o,user_id:t.user_id})},dt=()=>{be(`${Ce}`)},ct=()=>{A(t=>({...t,items:[...t.items,{category_id:null,product_id:null,product_name:"",service_id:null,service_name:"",description:null,price:null,quantity:1,item_Total:null,showDescription:!1}]}))},ut=t=>{A(o=>{const d=o.items.filter((q,G)=>G!==t),N={...o,items:d,coupon_code:"",coupon_discount:0},f=Fe(N),T=f+Number(a.express_delivery_charges||0)+Number(a.normal_delivery_charges||0);return{...N,sub_total:f,total:T}})},Q=async(t,o,d)=>{["category_id","product_id","service_id","price","quantity"].includes(o)&&A(N=>({...N,coupon_code:"",coupon_discount:0})),A(N=>{const f=N.items.map((le,ye)=>{if(ye===t){const L={...le,[o]:d};o==="showDescription"&&(L.showDescription=d);const Ge=Number(L.category_id),Ke=Number(L.product_id),ze=Number(L.service_id),Ve=Number(L.quantity)||1;if(o==="category_id"){const se=Number(d);Ie[se]||b(se).then(_e=>{tt(ve=>({...ve,[se]:_e}))}),L.product_id=null,L.service_id=null}if(o==="product_id"){const se=Number(le.category_id),_e=Number(d),ve=`${se}_${_e}`;Pe[ve]||i(se,_e).then(wt=>{st(St=>({...St,[ve]:wt}))}),L.service_id=null}if(["category_id","product_id","service_id"].includes(o))if(Ge&&Ke&&ze){const se=mt(Ge,Ke,ze);L.price=se,L.item_Total=se*Ve}else L.price=null,L.item_Total=null;else o==="price"?L.item_Total=d*Ve:o==="quantity"&&(L.item_Total=L.price*Number(d));return L}return le}),T={...N,items:f},G=Fe(T)-N.coupon_discount,X=G+Number(N.express_delivery_charges||0)+Number(N.normal_delivery_charges||0);return{...T,sub_total:G,total:X}})},mt=(t,o,d)=>{const N=`${t}_${o}_${d}`;return l[N]||0},pt=async t=>{const o=Fe(a);if(!o){k.error("Please add items first to apply the coupon code.");return}const d=await Se(a.user_id,o,t),N=Number(d.finalTotal||0)+Number(a.express_delivery_charges||0)+Number(a.normal_delivery_charges||0);if(d&&(d&&A(f=>({...f,coupon_code:t,coupon_discount:d.discountAmount,sub_total:d.finalTotal,total:N})),a.express_delivery_hour)){const f=`express_delivery_${a.express_delivery_hour}hrs`,T=Z[f],q=Number(T)/100;if(isNaN(q)){k.error("Invalid delivery charge percentage!");return}A(G=>{const X=Math.floor(G.sub_total*q);return{...G,express_delivery_charges:X,total:G.sub_total+X}})}},Fe=t=>t.items.reduce((o,d)=>o+(d.item_Total||0),0),Ue=(t,o)=>{A(d=>{const N={...d,[t]:o},f=Number(N.sub_total||0)+Number(N.express_delivery_charges||0)+Number(N.normal_delivery_charges||0);return{...N,total:f}})},gt=t=>{const o=t.target.value;A(d=>({...d,address_id:Number(o)}))},ht=t=>{t.preventDefault(),a.user_id?D(!0):k.error("Please select the user to add address")},ft=t=>{t.preventDefault(),te(!0)},xt=()=>{be(`/order/${g}`)},bt=async()=>{const t=[];if(a.total||t.push("item total"),a.username||t.push("customer name"),t.length>0){k.error(`Please add required fields: ${t.join(", ")}`);return}const o={amount:a.total,currency:"INR",user_id:a.user_id,customer:{name:a.username,contact:oe==null?void 0:oe.mobile_number,email:oe==null?void 0:oe.email}};await $(o)},yt=(t,o)=>{if(t){const d=`${t.first_name} ${t.last_name}`;m(d),S(!1),A({...a,username:d,user_id:t.user_id})}o&&A(d=>({...d,address_id:o.address_id}))},_t=t=>{t&&A(o=>({...o,address_id:t.address_id}))},vt=()=>{var o,d;const t=(d=(o=a==null?void 0:a.items)==null?void 0:o[0])==null?void 0:d.item_Total;return typeof t=="number"&&t>0?a.items.length:0},jt=()=>{var o,d,N;return Number((d=(o=a==null?void 0:a.items)==null?void 0:o[0])==null?void 0:d.item_Total)>0?(N=a==null?void 0:a.items)==null?void 0:N.reduce((f,T)=>f+Number(T.quantity||0),0):0},Nt=t=>{if(!a.sub_total){k.error("Please add items first");return}if(Z&&!pe){if(a.normal_delivery_charges&&A(T=>({...T,normal_delivery_charges:null})),!t){A(T=>({...T,total:T.total-T.express_delivery_charges,express_delivery_hour:null,express_delivery_charges:null,normal_delivery_charges:null}));return}const o=`express_delivery_${t}hrs`,d=Z[o],N=Number(d)/100;if(isNaN(N)){k.error("Invalid delivery charge percentage!");return}const f=Math.floor(a.sub_total*N);A(T=>({...T,express_delivery_hour:t,express_delivery_charges:f,total:T.sub_total+f}))}else k("Settings data not found!")};return x.useEffect(()=>{if(a.express_delivery_hour&&Z&&!pe&&a.sub_total>0){const t=`express_delivery_${a.express_delivery_hour}hrs`,o=Z[t],d=Number(o)/100;if(!isNaN(d)){const N=Math.floor(a.sub_total*d);A(f=>({...f,express_delivery_charges:N,total:f.sub_total+N}))}}},[a.sub_total]),x.useEffect(()=>{if(!E&&(z!=null&&z.length)&&Ee&&!de){const t=Ee.user_branch||[];if(t.length){const o=z.find(d=>d.branch_id===t[0]);o?A(d=>({...d,branch_id:o.branch_id})):k("This branch manager has no valid branch")}else A(o=>({...o,branch_id:z[0].branch_id}))}},[E,z,Ee]),x.useEffect(()=>{if(!_&&r.length>0&&!E){const t=r.find(o=>o.gst_percentage===6);t&&A({...a,company_id:t.company_id})}},[r]),we&&E?e.jsx(qt,{}):e.jsx("div",{className:"container-fixed",children:e.jsxs("div",{className:"card max-w-5xl mx-auto p-6 bg-white shadow-md",children:[e.jsxs("div",{className:"flex",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:I?"Edit Order":"Add Order"}),!isNaN(g)&&e.jsxs("button",{className:"btn bg-gray-200 ml-4 text-gray-700 text-sm font-bold rounded-md",onClick:xt,children:[e.jsx(Lt,{size:20}),"View Order"]})]}),e.jsxs("form",{onSubmit:ot,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-y-5 gap-x-6 mt-4",children:[e.jsxs("div",{className:"col-span-2 grid grid-cols-3 gap-x-6 items-start",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"branch",className:"block text-gray-700 text-sm font-bold mb-2",children:"Branch"}),e.jsxs("select",{id:"branch",className:"select border border-gray-300 rounded-md p-2 w-full text-sm",value:a.branch_id||"",onChange:t=>A({...a,branch_id:t.target.value?Number(t.target.value):null}),children:[e.jsx("option",{value:"",disabled:!0,children:"Select Branch"}),z.length>0?z.map(t=>e.jsx("option",{value:t.branch_id,children:t.branch_name},t.branch_id)):e.jsx("option",{children:"No Data Available"})]}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:R.branch_id||" "})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"company_id",children:"Company"}),e.jsxs("select",{id:"company_id",className:"select border border-gray-300 rounded-md p-2 w-full text-sm",value:a.company_id||"",onChange:t=>{A({...a,company_id:t.target.value?Number(t.target.value):null})},children:[e.jsx("option",{value:"",disabled:!0,children:"Select Company"}),_?e.jsx("option",{children:"loading..."}):r.length>0?r.map(t=>e.jsx("option",{value:t.company_id,children:`${t.company_name} (${t.gst_percentage}%)`},t.company_id)):e.jsx("option",{children:"No Data available"})]}),e.jsx("p",{className:"text-red-500 text-sm",children:R.company_id||" "})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"delivery_by",className:"block text-gray-700 text-sm font-bold mb-2",children:"Delivery By"}),e.jsxs("select",{className:"select border border-gray-300 rounded-md p-2 w-full text-sm",id:"delivery_by",value:a.delivery_by||"",onChange:t=>{A({...a,delivery_by:Number(t.target.value)})},children:[e.jsx("option",{value:"",disabled:!0,children:"Select Delivery By"}),e.jsx("option",{value:1,children:"Home"}),e.jsx("option",{value:2,children:"Shop"})]})]})]}),e.jsxs("div",{className:"relative col-span-1",children:[e.jsxs("span",{className:"flex justify-between items-center",children:[e.jsx("label",{htmlFor:"username",className:"block text-gray-700 text-sm font-bold mb-2",children:"Customer name"}),e.jsx("button",{type:"button",className:"btn btn-sm btn-primary -mt-6 sm:btn-lg",onClick:ft,children:"Add Customer"})]}),e.jsx("input",{type:"text",id:"username",ref:Ae,autoComplete:"off",value:c||"",onChange:lt,className:"input border border-gray-300 rounded-md p-2 w-full mb-2",placeholder:"Search customer...",onFocus:()=>{Re(!0),S(!0)}}),W&&P&&e.jsx("ul",{ref:Oe,className:"absolute -mt-2 bg-white border z-10 border-gray-300 rounded-md p-2 w-full text-sm max-h-[400px] overflow-y-auto",children:W.length>0?W.map(t=>e.jsxs("li",{className:"p-2 hover:bg-gray-200 cursor-pointer rounded",onClick:()=>it(t),children:[t.first_name," ",t.last_name," (",t.mobile_number,")"]},t.user_id)):e.jsx("li",{className:"p-2 text-gray-500",children:"No users found"})}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:R.username||" "})]}),e.jsxs("div",{className:"relative col-span-1",children:[e.jsxs("span",{className:"flex justify-between items-center",children:[e.jsx("label",{htmlFor:"address",className:"block text-gray-700 text-sm font-bold mb-2",children:"Customer address"}),e.jsx("button",{type:"button",className:"btn btn-sm btn-primary -mt-6",onClick:ht,children:"Add address"})]}),e.jsxs("select",{id:"address",value:a.address_id??"",defaultValue:"",onChange:gt,className:"select border border-gray-300 rounded-md w-full text-sm",children:[e.jsx("option",{value:"",disabled:!0,children:"Select Address"}),B.length>0?B.map(t=>e.jsxs("option",{value:t.address_id,children:[t.building_number,", ",t.area,", ",t.landmark,","," ",t.city,", ",t.state,",",t.country,", ",t.pincode]},t.address_id)):e.jsx("option",{disabled:!0,children:"No Address Available"})]}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:R.address_id||" "})]})]}),e.jsx("div",{className:"flex flex-wrap",children:e.jsx("h1",{className:"text-xl font-semibold leading-none text-gray-900 mt-6 mb-5 ml-1",children:"Item"})}),a.items.map((t,o)=>{var d,N;return e.jsx(Rt.Fragment,{children:e.jsxs("div",{className:"border border-gray-200 rounded-xl mt-4 p-4 space-y-2",children:[e.jsx("div",{children:e.jsxs("div",{className:"grid grid-cols-[minmax(150px,1fr)_minmax(150px,1fr)_minmax(150px,1fr)_minmax(50px,1fr)_minmax(50px,1fr)_minmax(50px,1fr)_minmax(35px,0.75fr)_minmax(35px,0.5fr)] gap-x-5 gap-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"category",className:"block text-gray-700 text-sm font-bold mb-2",children:"Category"}),e.jsxs("select",{id:"category",value:t.category_id??"",onChange:f=>Q(o,"category_id",f.target.value),className:"select border border-gray-300 rounded-md p-2 w-full text-sm",children:[e.jsx("option",{value:"",disabled:!0,children:"Select Category"}),v?e.jsx(e.Fragment,{children:e.jsx("option",{children:"Loading..."})}):u.length>0?u.sort((f,T)=>{const q=["men","women","kids","household"],G=q.indexOf(f.name.toLowerCase()),X=q.indexOf(T.name.toLowerCase());return(G===-1?1/0:G)-(X===-1?1/0:X)}).map(f=>e.jsx("option",{value:f.category_id,children:f.name},f.category_id)):e.jsx("option",{children:"No Category Available"})]}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:R[`items[${o}].category_id`]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"product",className:"block text-gray-700 text-sm font-bold mb-2",children:"Product"}),e.jsxs("select",{id:"product",value:t.product_id??"",onChange:f=>Q(o,"product_id",f.target.value),className:"select border border-gray-300 rounded-md p-2 w-full text-sm",children:[e.jsx("option",{value:"",disabled:!0,children:"Select Product"}),t.category_id?y?e.jsx("option",{children:"Loading..."}):((d=Ie[t.category_id])==null?void 0:d.length)>0?Ie[t.category_id].map(f=>e.jsx("option",{value:f.product_product_id,children:f.product_name},f.product_product_id)):t.product_id?e.jsx("option",{value:t.product_id,children:t.product_name},t.product_id):e.jsx("option",{children:"No Product Available"}):e.jsx("option",{disabled:!0,children:"Please select a category"})]}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:R[`items[${o}].product_id`]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"service",className:"block text-gray-700 text-sm font-bold mb-2",children:"Service"}),e.jsxs("select",{id:"service",value:t.service_id??"",onChange:f=>Q(o,"service_id",f.target.value),className:"select border border-gray-300 rounded-md p-2 w-full text-sm",children:[e.jsx("option",{value:"",disabled:!0,children:"Select Service"}),t.product_id?h?e.jsx("option",{children:"Loading..."}):((N=Pe[`${t.category_id}_${t.product_id}`])==null?void 0:N.length)>0?Pe[`${t.category_id}_${t.product_id}`].map(f=>e.jsx("option",{value:f.service_service_id,children:f.service_name},f.service_service_id)):t.service_id?e.jsx("option",{value:t.service_id,children:t.service_name},t.service_id):e.jsx("option",{children:"No service available"}):e.jsx("option",{disabled:!0,children:"Please select a product"})]}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:R[`items[${o}].service_id`]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Price"}),e.jsx("input",{type:"text",value:t.price||"",onChange:f=>Q(o,"price",f.target.value),className:`input border rounded-md p-2 w-full ${isNaN(g)?"border-gray-300 bg-gray-100 text-sm text-gray-600 cursor-not-allowed focus:outline-none":"border-gray-300"}`,readOnly:isNaN(g)}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:R[`items[${o}].price`]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"quantity",children:"Quantity"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",id:"quantity",autoComplete:"off",value:t.quantity??1,onChange:f=>Q(o,"quantity",Number(f.target.value)),className:"w-full p-2 text-sm focus:outline-none input text-center"}),e.jsx("button",{type:"button",className:"absolute top-1/2 left-1.5 -translate-y-1/2 p-1 rounded hover:bg-gray-200 transition",onClick:()=>Q(o,"quantity",Math.max(1,(t.quantity??1)-1)),children:e.jsx("i",{className:"ki-filled ki-minus text-gray-600 text-base"})}),e.jsx("button",{type:"button",className:"absolute top-1/2 right-1.5 -translate-y-1/2 p-1 rounded hover:bg-gray-200 transition",onClick:()=>Q(o,"quantity",(t.quantity??1)+1),children:e.jsx("i",{className:"ki-filled ki-plus text-gray-500 text-base"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Item total"}),e.jsx("input",{type:"text",value:t.item_Total??"",onChange:f=>Q(o,"item_Total",f.target.value),min:"0",step:"0.01",readOnly:!0,className:"input w-full border border-gray-300 bg-gray-100 text-sm text-gray-600 rounded-md p-2 cursor-not-allowed focus:outline-none"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"description_checkbox",className:"block text-gray-700 text-sm font-bold mb-2",children:"Remarks"}),e.jsx("div",{className:"h-full flex items-center",children:e.jsx("input",{className:"checkbox checkbox-lg ml-5",id:"description_checkbox","data-datatable-check":"true",type:"checkbox",checked:t.showDescription,onChange:f=>Q(o,"showDescription",f.target.checked)})})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:" "}),e.jsx("div",{className:"grow flex justify-center items-center",children:e.jsx("button",{type:"button",className:`p-2 rounded-full ${a.items.length>1?"bg-red-100 hover:bg-red-200":"bg-gray-200 cursor-not-allowed"}`,onClick:()=>ut(o),disabled:a.items.length===1,children:e.jsx(Mt,{className:`${a.items.length>1?"text-red-500":"text-gray-400"}`})})})]})]})}),e.jsx("div",{className:"flex justify-between sm:items-center smmobile:flex-col gap-y-2 smmobile:w-full",children:e.jsx("div",{children:t.showDescription&&e.jsx("div",{children:e.jsxs("div",{className:"flex mt-2 smmobile:w-[100%] smmobile:justify-self-start flex-col md:w-[350px] lg:w-[420px] sm:w-[300px] h-[80px] mb-2",children:[e.jsx("label",{htmlFor:"description",className:"block text-gray-700 text-sm font-bold mb-2",children:"Description"}),e.jsx("textarea",{id:"description",value:t.description||"",onChange:f=>Q(o,"description",f.target.value),className:"h-full input border border-gray-300 rounded-md p-2 w-full"})]})})})})]})},o)}),e.jsxs("div",{className:"flex items-center justify-start gap-12 flex-wrap",children:[e.jsx("button",{type:"button",onClick:ct,className:"btn btn-primary mb-6 mt-4",children:"Add Item"}),e.jsxs("p",{className:"block text-gray-900 text-sm font-bold",children:["Total Items : ",vt()]}),e.jsxs("p",{className:"block text-gray-900 text-sm font-bold",children:["Total Quantity : ",jt()]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"coupon_code",children:"Coupon Code"}),e.jsxs("select",{id:"coupon_code",className:"select border border-gray-300 rounded-md p-2 w-full text-sm",value:a.coupon_code??"",onChange:t=>{const o=re.find(d=>d.code===t.target.value);pt(o==null?void 0:o.code)},children:[e.jsx("option",{value:"",disabled:!0,children:"Select Coupon Code"}),re&&re.length>0?re.map(t=>e.jsxs("option",{value:t.code,children:[t.code," ",a.coupon_code===t.code?"":`(min: ${t.min_cart_value||0})`]},t.coupon_id)):e.jsx("option",{children:"No Coupons available"})]}),e.jsx("p",{className:"text-red-500 text-sm",children:R.coupon_code||" "})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Coupon Discount"}),e.jsx("input",{type:"text",value:a.coupon_discount||"",readOnly:!0,className:"input border border-gray-300 bg-gray-100 text-sm text-gray-600 rounded-md p-2 cursor-not-allowed focus:outline-none"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:R.coupon_discount||" "})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Sub Total"}),e.jsx("input",{type:"text",value:a.sub_total||"",readOnly:!0,className:"input border border-gray-300 bg-gray-100 text-sm text-gray-600 rounded-md p-2 cursor-not-allowed focus:outline-none"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:R.sub_total||" "})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"kasar_amount",className:"block text-gray-700 text-sm font-bold mb-2",children:"Kasar amount"}),e.jsx("input",{type:"text",id:"kasar_amount",autoComplete:"off",value:a.kasar_amount||"",onChange:t=>{A({...a,kasar_amount:Number(t.target.value)})},className:"input border border-gray-300 rounded-md p-2",min:"0",step:"0.01"})]}),e.jsxs("div",{className:"col-span-2 grid grid-cols-3 gap-6",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"exp_delivery_time",className:"block text-gray-700 text-sm font-bold mb-2",children:"Express Delivery Time"}),e.jsxs("select",{className:"select border border-gray-300 rounded-md p-2 w-full text-sm",id:"exp_delivery_time",value:a.express_delivery_hour||"",onChange:t=>{Nt(Number(t.target.value))},children:[e.jsx("option",{value:"",children:"Select Express Delivery Time"}),e.jsx("option",{value:24,children:"24 Hrs"}),e.jsx("option",{value:48,children:"48 Hrs"}),e.jsx("option",{value:72,children:"72 Hrs"})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"express_delivery_charges",className:"block text-gray-700 text-sm font-bold mb-2",children:"Express Delivery Charge"}),e.jsx("input",{type:"text",id:"express_delivery_charges",autoComplete:"off",min:"0",value:a.express_delivery_charges||"",onChange:t=>Ue("express_delivery_charges",t.target.value),className:`${a.normal_delivery_charges>0?"input border border-gray-300 rounded-md p-2 bg-gray-100 cursor-not-allowed focus:outline-none":"input border border-gray-300 rounded-md p-2"}`,readOnly:a.normal_delivery_charges>0}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:R.express_delivery_charges||" "})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"normal_delivery_charges",className:"block text-gray-700 text-sm font-bold mb-2",children:"Normal Delivery Charge"}),e.jsx("input",{type:"text",id:"normal_delivery_charges",min:"0",autoComplete:"off",value:a.normal_delivery_charges||"",onChange:t=>Ue("normal_delivery_charges",t.target.value),className:`${a.express_delivery_charges>0?"input border border-gray-300 rounded-md p-2 bg-gray-100 cursor-not-allowed focus:outline-none":"input border border-gray-300 rounded-md p-2"}`,readOnly:a.express_delivery_charges>0}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:R.normal_delivery_charges||" "})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Total"}),e.jsx("input",{type:"text",value:a.total||"",readOnly:!0,className:"input border border-gray-300 bg-gray-100 text-sm text-gray-600 rounded-md p-2 cursor-not-allowed focus:outline-none"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"payment_method",className:"block text-gray-700 text-sm font-bold mb-2",children:"Payment Method"}),e.jsxs("select",{className:"select border border-gray-300 rounded-md p-2 w-full text-sm",id:"payment_method",value:a.payment_type??"",onChange:t=>A({...a,payment_type:Number(t.target.value)}),children:[e.jsx("option",{value:"",disabled:!0,children:"Select Payment Type"}),e.jsx("option",{value:1,children:"Cash on Delivery"}),e.jsx("option",{value:2,children:"Online Payment"})]}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:R.payment_type||" "}),!g&&a.payment_type===2&&e.jsx("div",{children:e.jsxs("button",{type:"button",className:"relative min-w-[160px] min-h-[40px] flex items-center gap-2 px-4 py-2 text-sm font-medium text-blue-600 border border-blue-500 rounded-lg hover:bg-blue-100 transition disabled:opacity-50",onClick:bt,disabled:J,children:[e.jsx("div",{className:"w-4 h-4 flex items-center justify-center",children:J?e.jsx(Ut,{}):e.jsx(Bt,{className:"w-4 h-4 text-blue-600"})}),e.jsx("span",{children:"Send Payment Link"})]})})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"paid_amount",className:"block text-gray-700 text-sm font-bold mb-2",children:"Paid amount"}),e.jsx("input",{type:"text",id:"paid_amount",autoComplete:"off",value:a.paid_amount||"",onChange:t=>{A({...a,paid_amount:Number(t.target.value)})},className:"input border border-gray-300 rounded-md p-2",min:"0",step:"0.01"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:R.paid_amount||" "})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"payment_status",className:"block text-gray-700 text-sm font-bold mb-2",children:"Payment Status"}),e.jsxs("select",{className:"select border border-gray-300 rounded-md p-2 w-full text-sm",id:"payment_status",value:a.payment_status??"",onChange:t=>A({...a,payment_status:Number(t.target.value)}),children:[e.jsx("option",{value:"",disabled:!0,children:"Select Payment Status"}),e.jsx("option",{value:1,children:"Pending"}),e.jsx("option",{value:2,children:"Received"}),e.jsx("option",{value:3,children:"Partial Received"})]}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:R.payment_status}),a.payment_status===2&&Me>0&&e.jsx("p",{className:"w-full text-red-500 text-sm",children:`Remaining amount Rs ${Me}`})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"transaction_id",className:"block text-gray-700 text-sm font-bold mb-2",children:"Transaction ID"}),e.jsx("input",{type:"text",id:"transaction_id",autoComplete:"off",value:a.transaction_id??"",onChange:t=>A({...a,transaction_id:t.target.value}),className:"input border border-gray-300 text-sm text-gray-600 rounded-md p-2 focus:outline-none"})]}),e.jsxs("div",{className:"flex flex-col justify-center items-start",children:[e.jsx("label",{htmlFor:"have_gst_cb",className:"block text-gray-700 text-sm font-bold mb-2",children:"Do you have GSTIN ?"}),e.jsx("input",{className:"checkbox",id:"have_gst_cb",name:"check",type:"checkbox",checked:n,onChange:t=>{p(t.target.checked)}})]}),n&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"gstin",className:"block text-gray-700 text-sm font-bold mb-2",children:"GSTIN"}),e.jsx("input",{type:"text",id:"gstin",autoComplete:"off",value:a.gstin,onChange:t=>A({...a,gstin:t.target.value}),className:"uppercase input border border-gray-300 text-sm text-gray-600 rounded-md p-2 focus:outline-none"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:R.gstin||" "})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"gst_company_name",className:"block text-gray-700 text-sm font-bold mb-2",children:"Company Name"}),e.jsx("input",{type:"text",id:"gst_company_name",autoComplete:"off",value:a.gst_company_name,onChange:t=>A({...a,gst_company_name:t.target.value}),className:"input border border-gray-300 text-sm text-gray-600 rounded-md p-2 focus:outline-none"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:R.gst_company_name||" "})]})]})]}),e.jsxs("div",{className:"mt-6 flex gap-4",children:[e.jsx("button",{type:"submit",className:`btn btn-primary ${w||F?"opacity-50 cursor-not-allowed":""}`,disabled:w||F,children:w||F?w?"Adding...":"Updating...":g?"Update Order":"Add Order"}),e.jsx("button",{type:"button",onClick:dt,className:"btn btn-secondary",disabled:w||F,children:"Cancel"})]})]}),e.jsx(ps,{onAddressAdded:_t,isOpen:C,setIsSubmit:M,onClose:()=>D(!1),userId:a.user_id,fullname:a.username}),e.jsx(gs,{onCustomerCreated:yt,isOpen:U,setIsSubmit:M,onClose:()=>te(!1)})]})})};export{Ns as default};
