import{r as p,_ as y,c as M,aP as C,a as re,aZ as we,j as e,V as J,aR as ke,k as Se,b as Ce}from"./index-ekHY3xQj.js";import{u as De}from"./useGetCategories-CKTTd5BG.js";import{u as Te}from"./useGetCoupons-D2zmQ3-9.js";import{u as Pe}from"./useGetPrice-B_08xpuj.js";import{u as Ae}from"./useGetBranches-DCiMEsW0.js";import{u as Fe}from"./useGetOrder-BPRgsYyP.js";import{u as Oe}from"./useGetUsersByRole-Ci7dQjad.js";import{u as Ee,c as $e}from"./userSchema-Cq_T8R1e.js";const Ie=()=>{const[i,u]=p.useState([]),[g,b]=p.useState(!1);return{products:i,loading:g,fetchProductsOnId:async m=>{const l=localStorage.getItem("authToken"),c=`http://35.154.167.170:3000/category/${m}/product`;b(!0);try{const r=await fetch(c,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`}});if(!r.ok){const o=await r.json();y.error(o.message,{position:"top-center"});return}const d=await r.json(),v=(d==null?void 0:d.data)||[];u(v)}catch(r){y.error((r==null?void 0:r.message)||"Network error: Failed to fetch.",{position:"top-center"})}finally{b(!1)}}}},qe=()=>{const[i,u]=p.useState([]),[g,b]=p.useState(!1);return{services:i,loading:g,fetchServicesOnId:async(m,l)=>{const c=localStorage.getItem("authToken"),r=`http://35.154.167.170:3000/category/${m}/product/${l}/service`;try{const d=await fetch(r,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${c}`}});if(!d.ok){const S=await d.json();y.error(S.message,{position:"top-center"});return}const v=await d.json(),o=(v==null?void 0:v.data)||[];u(o)}catch(d){y.error((d==null?void 0:d.message)||"Network error: Failed to fetch.",{position:"top-center"})}finally{b(!1)}}}},Ue="http://35.154.167.170:3000/admin/coupon/apply",Re=()=>{const[i,u]=p.useState(!1);return{applyCoupon:async(b,f,m)=>{const l=localStorage.getItem("authToken");u(!0);try{const c=await fetch(Ue,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`},body:JSON.stringify({user_id:b,order_Total:f,coupon_Code:m})}),r=await c.json();return c.ok?r.data:(y.error(r.message,{position:"top-center"}),!1)}catch{y.error("Unable to apply coupon code!")}finally{u(!1)}},loading:i}},Le="http://35.154.167.170:3000",Ge=`${Le}/admin/orders`,Be=()=>{const[i,u]=p.useState(!1);return{addOrder:async b=>{const f=localStorage.getItem("authToken");u(!0);try{const m=await fetch(Ge,{method:"POST",headers:{Authorization:`Bearer ${f}`,"Content-Type":"application/json"},body:JSON.stringify(b)});if(!m.ok){const c=await m.json();return y.error(c.message,{position:"top-center"}),!1}const l=await m.json();return y.success(l.message,{position:"top-center"}),!0}catch(m){return y.error((m==null?void 0:m.message)||"Network error: Failed to fetch.",{position:"top-center"}),!1}finally{u(!1)}},loading:i}},ze=()=>{const[i,u]=p.useState(!1);return{updateOrder:async(b,f)=>{const m=localStorage.getItem("authToken"),l=`http://35.154.167.170:3000/admin/orders/${b}`;u(!0);try{const c=await fetch(l,{method:"PUT",headers:{Authorization:`Bearer ${m}`,"Content-Type":"application/json"},body:JSON.stringify(f)});if(c.ok){const d=await c.json();return y.success(d.message,{position:"top-center"}),!0}const r=await c.json();return y.error(r.message,{position:"top-center"}),!1}catch(c){return y.error((c==null?void 0:c.message)||"Network error: Failed to fetch.",{position:"top-center"}),!1}finally{u(!1)}},loading:i}},Me=()=>{const[i,u]=p.useState([]),[g,b]=p.useState(!1);return{address:i,loading:g,fetchAddress:async m=>{var r;const l=localStorage.getItem("authToken"),c=`http://35.154.167.170:3000/address/${m}/user`;try{const d=await fetch(c,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`}});if(!d.ok){const S=await d.json();y.error(S.message,{position:"top-center"});return}const v=await d.json(),o=((r=v==null?void 0:v.data)==null?void 0:r.result)||[];u(o)}catch(d){y.error((d==null?void 0:d.message)||"Network error: Failed to fetch.",{position:"top-center"})}finally{b(!1)}}}},Je=M().shape({category_id:C().nullable().required("Please select a category").test("required","Please select a category",i=>!!i),product_id:C().nullable().required("Please select a product").test("required","Please select a product",i=>!!i),service_id:C().nullable().required("Please select a service").test("required","Please select a service",i=>!!i),price:C().nullable().when(["category_id","product_id","service_id"],([i,u,g],b)=>i&&u&&g?b.required("Price is not available for the combination, please add a price"):b.nullable())}),Ve=M().shape({username:re().required("Please enter username"),address_id:C().required("Please select address").test("required","Please select address",i=>!!i),express_delivery_charges:C().typeError("Express delivery charges must be a number").min(0,"Express delivery charges must be a positive number"),shipping_charges:C().typeError("Shipping charge must be a number").min(0,"Shipping charge must be a positive number"),payment_type:C().required("Please choose payment type").test("required","Please choose order status",i=>!!i),payment_status:C().required("Please choose payment status").test("required","Please choose payment status",i=>!!i),paid_amount:C().typeError("Paid amount must be a number").min(0,"Paid amount must be a positive number"),items:we().of(Je)}),Qe=()=>{const[i,u]=p.useState(!1);return{addAddress:async b=>{const f="http://35.154.167.170:3000/address/admin/",m=localStorage.getItem("authToken");u(!0);try{const l=await fetch(f,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${m}`},body:JSON.stringify(b)});if(!l.ok){const r=await l.json();return y.error(r.message,{position:"top-center"}),!1}const c=await l.json();return y.success(c.message,{position:"top-center"}),!0}catch(l){return y.error((l==null?void 0:l.message)||"Error adding banner",{position:"top-center"}),!1}finally{u(!1)}},loading:i}},Ye=M().shape({pincode:re().required("Pin Code is required").matches(/^[0-9]{6}$/,"Pincode must be 6 digit")}),Ze=({isOpen:i,onClose:u,userId:g,setIsSubmit:b})=>{const{addAddress:f,loading:m}=Qe(),[l,c]=p.useState(""),[r,d]=p.useState({building_number:"",area:"",landmark:"",pincode:"",city:"",state:"",country:"",user_id:null});p.useEffect(()=>{i?g&&d(o=>({...o,user_id:g})):(d({building_number:"",area:"",landmark:"",pincode:"",city:"",state:"",country:"",user_id:null}),c(""))},[i,g]);const v=async o=>{o.preventDefault();try{await Ye.validate(r,{abortEarly:!1}),g&&await f(r),b(!0),u()}catch(S){S instanceof J&&c(S.errors[0])}};if(i)return e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:[e.jsx("div",{className:"fixed inset-0 bg-black opacity-50",onClick:u}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-lg z-10 relative",children:[e.jsx("button",{className:"btn btn-sm btn-icon btn-light btn-outline absolute top-0 right-0 mr-5 mt-5 lg:mr-5 shadow-default",onClick:u,children:e.jsx("i",{className:"ki-filled ki-cross"})}),e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Add New Address"}),e.jsxs("form",{onSubmit:v,children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"building_number",className:"block text-gray-700 font-semibold",children:"Building Number"}),e.jsx("input",{type:"text",id:"building_number",name:"building_number",value:r.building_number,onChange:o=>d({...r,building_number:o.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"area",className:"block text-gray-700 font-semibold",children:"Area"}),e.jsx("input",{type:"text",id:"area",name:"area",value:r.area,onChange:o=>d({...r,area:o.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"landmark",className:"block text-gray-700 font-semibold",children:"Landmark"}),e.jsx("input",{type:"text",id:"landmark",name:"landmark",value:r.landmark,onChange:o=>d({...r,landmark:o.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"pincode",className:"block text-gray-700 font-semibold",children:"Pin code"}),e.jsx("input",{type:"text",id:"pincode",name:"pincode",value:r.pincode,onChange:o=>d({...r,pincode:o.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"text-red-500 text-sm",children:l||"Â "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"city",className:"block text-gray-700 font-semibold",children:"City"}),e.jsx("input",{type:"text",id:"city",name:"city",value:r.city,onChange:o=>d({...r,city:o.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"state",className:"block text-gray-700 font-semibold",children:"State"}),e.jsx("input",{type:"text",id:"state",name:"state",value:r.state,onChange:o=>d({...r,state:o.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"country",className:"block text-gray-700 font-semibold",children:"Country"}),e.jsx("input",{type:"text",id:"country",name:"country",value:r.country,onChange:o=>d({...r,country:o.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"})]})]}),e.jsxs("div",{className:"flex justify-end mt-4",children:[e.jsx("button",{type:"button",onClick:u,className:"btn btn-light mr-2",disabled:m,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:m,className:`btn btn-primary ${m?"opacity-50 cursor-not-allowed":""}`,children:m?"Submitting...":"Submit"})]})]})]})]})},He=({isOpen:i,onClose:u,setIsSubmit:g})=>{const{addUser:b,loading:f}=Ee(),m={first_name:"",last_name:"",email:"",password:"",mobile_number:"",gender:null,role_id:5},[l,c]=p.useState(m),[r,d]=p.useState({});p.useEffect(()=>{i||(c({first_name:"",last_name:"",email:"",password:"",mobile_number:"",gender:null,role_id:5}),d({}))},[i]);const v=async o=>{o.preventDefault();try{await $e().validate(l,{abortEarly:!1}),await b(l),g(!0),u()}catch(S){if(S instanceof J){const O={};S.inner.forEach(E=>{O[E.path||""]=E.message}),d(O)}else y.error("Failed to submit the form. Please try again.")}};if(i)return e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:[e.jsx("div",{className:"fixed inset-0 bg-black opacity-50",onClick:u}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-lg z-10 relative",children:[e.jsx("button",{className:"btn btn-sm btn-icon btn-light btn-outline absolute top-0 right-0 mr-5 mt-5 lg:mr-5 shadow-default",onClick:u,children:e.jsx("i",{className:"ki-filled ki-cross"})}),e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Add New Customer"}),e.jsxs("form",{onSubmit:v,children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"first_name",className:"block text-gray-700 font-semibold",children:"First name"}),e.jsx("input",{type:"text",id:"first_name",name:"first_name",value:l.first_name||"",onChange:o=>c({...l,first_name:o.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"text-red-500 text-sm",children:r.first_name||"Â "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"last_name",className:"block text-gray-700 font-semibold",children:"Last name"}),e.jsx("input",{type:"text",id:"last_name",name:"last_name",value:l.last_name,onChange:o=>c({...l,last_name:o.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"text-red-500 text-sm",children:r.last_name||"Â "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-gray-700 font-semibold",children:"Email"}),e.jsx("input",{type:"text",id:"email",name:"email",value:l.email,onChange:o=>c({...l,email:o.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"text-red-500 text-sm",children:r.email||"Â "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"mobile_number",className:"block text-gray-700 font-semibold",children:"Mobile Number"}),e.jsx("input",{type:"text",id:"mobile_number",name:"mobile_number",value:l.mobile_number,onChange:o=>c({...l,mobile_number:o.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"text-red-500 text-sm",children:r.mobile_number||"Â "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-gray-700 font-semibold",children:"Password"}),e.jsx("input",{type:"password",id:"password",name:"password",value:l.password,onChange:o=>c({...l,password:o.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"text-red-500 text-sm",children:r.password||"Â "})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"mb-2 block text-gray-700 font-semibold",children:"Gender"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:"gender",value:1,checked:l.gender===1,onChange:o=>c({...l,gender:parseInt(o.target.value)}),className:"radio radio-primary"}),e.jsx("span",{className:"text-sm",children:"Male"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:"gender",value:2,checked:l.gender===2,onChange:o=>c({...l,gender:parseInt(o.target.value)}),className:"radio radio-primary"}),e.jsx("span",{className:"text-sm",children:"Female"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:"gender",value:3,checked:l.gender===3,onChange:o=>c({...l,gender:parseInt(o.target.value)}),className:"radio radio-primary"}),e.jsx("span",{className:"text-sm",children:"Other"})]})]}),e.jsx("p",{className:"text-red-500 text-sm",children:r.gender||"Â "})]})]}),e.jsxs("div",{className:"flex justify-end mt-4",children:[e.jsx("button",{type:"button",onClick:u,className:"btn btn-light mr-2",disabled:f,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:f,className:`btn btn-primary ${f?"opacity-50 cursor-not-allowed":""}`,children:f?"Submitting...":"Submit"})]})]})]})]})},lt=()=>{const{prices:i}=Pe(),{categories:u}=De(),{products:g,fetchProductsOnId:b}=Ie(),{services:f,fetchServicesOnId:m}=qe(),[l,c]=p.useState(""),[r,d]=p.useState(!0),{id:v}=ke(),{updateOrder:o,loading:S}=ze(),{addOrder:O,loading:E}=Be(),A=Number(v),V=1e3,Q=1,[le,Y]=p.useState(!1),[ne,Z]=p.useState(!1),[H,R]=p.useState(!1),{users:L,fetchUsersByRole:oe}=Oe(),{coupons:$}=Te(Q,V),{branches:K}=Ae(Q,V),{order:x,fetchOrder:de}=Fe(),{address:W,fetchAddress:X}=Me(),{applyCoupon:ie}=Re(),G=Se(),[n,N]=p.useState({coupon_code:"",coupon_discount:null,express_delivery_charges:null,shipping_charges:null,payment_type:null,order_status:1,payment_status:null,sub_total:0,paid_amount:null,transaction_id:"",address_id:null,username:"",user_id:null,items:[{category_id:null,product_id:null,service_id:null,product_name:"",service_name:"",description:null,price:null,quantity:1,item_Total:null,showDescription:!1}],total:0,branch_id:null}),[ce,ue]=p.useState({coupon_code:"",coupon_discount:null,express_delivery_charges:null,shipping_charges:null,payment_type:null,order_status:1,payment_status:null,sub_total:0,paid_amount:null,transaction_id:"",address_id:null,username:"",user_id:null,items:[{category_id:null,product_id:null,service_id:null,product_name:"",service_name:"",description:null,price:null,quantity:1,item_Total:null,showDescription:!1}],total:0,branch_id:null}),[w,me]=p.useState({});p.useEffect(()=>{(async()=>{await de(A)})()},[A]),p.useEffect(()=>{(async()=>{n.user_id&&await X(n.user_id),H&&(await X(n.user_id),R(!1))})()},[n.user_id,H]),p.useEffect(()=>{(async()=>{l&&r&&await oe(5,l)})()},[l,r]),p.useEffect(()=>{if(x){const t=`${x.user.first_name} ${x.user.last_name}`;c(t),d(!1);const a={coupon_code:x.coupon_code||"",coupon_discount:x.coupon_discount||null,express_delivery_charges:x.express_delivery_charges||null,shipping_charges:x.shipping_charges||null,payment_type:x.payment_type||null,order_status:x.order_status||null,payment_status:x.payment_status||null,sub_total:x.sub_total||0,paid_amount:x.paid_amount||null,transaction_id:x.transaction_id||"",address_id:x.address_id,username:t,user_id:x.user_id||null,items:x.items.map(s=>{var I,F,q,j;const h=s.category.category_id,k=((I=s.product)==null?void 0:I.product_id)||null,_=((F=s.service)==null?void 0:F.service_id)||null,z=((q=s.product)==null?void 0:q.name)||"",T=((j=s.service)==null?void 0:j.name)||"";return{category_id:h,product_id:k,service_id:_,product_name:z,service_name:T,description:s.description||null,price:s.price,quantity:s.quantity,item_Total:s.price*s.quantity,showDescription:!!s.description}}),total:(x.sub_total||0)+(x.express_delivery_charges||0)+(x.shipping_charges||0),branch_id:x.branch_id};N(a),ue(a)}},[x]);const pe=async t=>{t.preventDefault();try{const a=n.items.map(_=>({category_id:Number(_.category_id),product_id:Number(_.product_id),service_id:Number(_.service_id),description:_.description,price:Number(_.price),quantity:Number(_.quantity)})),s={...n,address_id:Number(n.address_id),coupon_discount:Number(n.coupon_discount),shipping_charges:Number(n.shipping_charges),paid_amount:Number(n.paid_amount),express_delivery_charges:Number(n.express_delivery_charges),payment_type:Number(n.payment_type),payment_status:Number(n.payment_status),order_status:Number(n.order_status),items:a};if(await Ve.validate(s,{abortEarly:!1}),!Object.keys(n).some(_=>n[_]!==ce[_])){G("/orders");return}let k;x?k=await o(A,s):k=await O(s),k&&G("/orders")}catch(a){if(a instanceof J){const s={};a.inner.forEach(h=>{s[h.path||""]=h.message}),me(s)}else y.error("Failed to submit the form. Please try again.")}},he=t=>{c(t.target.value),d(!0)},xe=t=>{const a=`${t.first_name} ${t.last_name}`;c(a),d(!1),N({...n,username:a,user_id:t.user_id})},be=()=>{G("/orders")},ge=()=>{N(t=>({...t,items:[...t.items,{category_id:null,product_id:null,product_name:"",service_id:null,service_name:"",description:null,price:null,quantity:1,item_Total:null,showDescription:!1}]}))},fe=t=>{N(a=>{const s=a.items.filter((z,T)=>T!==t),h={...a,items:s,coupon_code:"",coupon_discount:0},k=B(h),_=k+Number(n.express_delivery_charges||0)+Number(n.shipping_charges||0);return{...h,sub_total:k,total:_}})},D=async(t,a,s)=>{["category_id","product_id","service_id","price","quantity"].includes(a)&&N(h=>({...h,coupon_code:"",coupon_discount:0})),N(h=>{const k=h.items.map((F,q)=>{if(q===t){const j={...F,[a]:s};a==="showDescription"&&(j.showDescription=s);const P=Number(j.category_id),U=Number(j.product_id),te=Number(j.service_id),se=Number(j.quantity)||1;if(["category_id","product_id"].includes(a)&&(P&&b(P),U&&P&&m(P,U)),["category_id","product_id","service_id"].includes(a))if(P&&U&&te){const ae=ye(P,U,te);j.price=ae,j.item_Total=ae*se}else j.price=null,j.item_Total=null;else a==="price"?j.item_Total=s*se:a==="quantity"&&(j.item_Total=j.price*Number(s));return j}return F}),_={...h,items:k},T=B(_)-h.coupon_discount,I=T+Number(h.express_delivery_charges||0)+Number(h.shipping_charges||0);return{..._,sub_total:T,total:I}})},ye=(t,a,s)=>{const h=`${t}_${a}_${s}`;return i[h]||0},_e=async t=>{const a=B(n),s=await ie(n.user_id,a,t),h=Number(s.finalTotal||0)+Number(n.express_delivery_charges||0)+Number(n.shipping_charges||0);s&&N(k=>({...k,coupon_code:t,coupon_discount:s.discountAmount,sub_total:s.finalTotal,total:h}))},B=t=>t.items.reduce((a,s)=>a+(s.item_Total||0),0),ee=(t,a)=>{N(s=>{const h={...s,[t]:a},k=Number(h.sub_total||0)+Number(h.express_delivery_charges||0)+Number(h.shipping_charges||0);return{...h,total:k}})},je=t=>{const a=t.target.value;N(s=>({...s,address_id:Number(a)}))},ve=t=>{t.preventDefault(),n.user_id?Y(!0):y.error("Please select the user to add address")},Ne=t=>{t.preventDefault(),Z(!0)};return e.jsx("div",{className:"container-fixed",children:e.jsxs("div",{className:"card max-w-5xl mx-auto p-6 bg-white shadow-md",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:x?"Edit Order":"Add Order"}),e.jsxs("form",{onSubmit:pe,children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex flex-col flex-[0_0_40%]",children:[e.jsx("label",{htmlFor:"username",className:"block text-gray-700 text-sm font-bold mb-2",children:"Customer Name"}),e.jsx("input",{type:"text",id:"username",value:l||"",onChange:he,className:"input border border-gray-300 rounded-md p-2 w-full mb-2",placeholder:"Search customer..."}),L&&l&&r&&e.jsx("ul",{className:"absolute mt-20 bg-white z-10 border border-gray-300 rounded-md p-2 w-full text-sm",children:L.length>0?L.map(t=>e.jsxs("li",{className:"p-2 hover:bg-gray-100 cursor-pointer",onClick:()=>xe(t),children:[t.first_name," ",t.last_name," (",t.mobile_number,")"]},t.user_id)):e.jsx("li",{className:"p-2 text-gray-500",children:"No users found"})}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:w.username||"Â "})]}),e.jsx("div",{className:"flex flex-col self-center",children:e.jsx("button",{className:"btn btn-primary w-[88px]",onClick:Ne,children:"New Customer"})}),e.jsxs("div",{className:"grow flex",children:[e.jsxs("div",{className:"grow flex flex-col",children:[e.jsx("label",{htmlFor:"address",className:"block text-gray-700 text-sm font-bold mb-2",children:"Customer Address"}),e.jsxs("select",{id:"address",value:n.address_id??"",onChange:je,className:"select border border-gray-300 rounded-md p-2 w-full text-sm",children:[e.jsx("option",{value:"",disabled:!0,children:"Select Address"}),W.length>0?W.map(t=>e.jsxs("option",{value:t.address_id,children:[t.building_number,", ",t.area,", ",t.landmark,","," ",t.city,", ",t.state,",",t.country,", ",t.pincode]},t.address_id)):e.jsx("option",{children:"No Address available"})]}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:w.address_id||"Â "})]}),e.jsx("div",{className:"flex flex-col self-center",children:e.jsx("button",{className:"btn btn-primary w-20 ml-2",onClick:ve,children:"Add address"})})]})]}),e.jsx("div",{children:e.jsx("h1",{className:"text-xl font-semibold leading-none text-gray-900 mt-10 mb-5",children:"Item"})}),n.items.map((t,a)=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-start md:flex-row md:items-end md:space-x-1",children:[e.jsxs("div",{className:"flex flex-col flex-1 mb-4 md:mb-0",children:[e.jsx("label",{htmlFor:"category",className:"block text-gray-700 text-sm font-bold mb-2",children:"Category"}),e.jsxs("select",{id:"category",value:t.category_id??"",onChange:s=>D(a,"category_id",s.target.value),className:"select border border-gray-300 rounded-md p-2 w-full text-sm",children:[e.jsx("option",{value:"",disabled:!0,children:"Select Category"}),u.map(s=>e.jsx("option",{value:s.category_id,children:s.name},s.category_id))]}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:w[`items[${a}].category_id`]||"Â "})]}),e.jsxs("div",{className:"flex flex-col flex-1 mb-4 md:mb-0",children:[e.jsx("label",{htmlFor:"product",className:"block text-gray-700 text-sm font-bold mb-2",children:"Product"}),e.jsxs("select",{id:"product",value:t.product_id??"",onChange:s=>D(a,"product_id",s.target.value),className:"select border border-gray-300 rounded-md p-2 w-full text-sm",children:[e.jsx("option",{value:"",disabled:!0,children:"Select Product"}),g&&g.length>0?g.map(s=>e.jsx("option",{value:s.product_product_id,children:s.product_name},s.product_product_id)):t.product_id&&e.jsx("option",{value:t.product_id,children:t.product_name},t.product_id)]}),e.jsxs("p",{className:"w-full text-red-500 text-sm",children:[w[`items[${a}].product_id`]||"Â ",e.jsx("br",{})]}),e.jsxs("p",{className:"w-full text-red-500 text-sm",children:["Â ",e.jsx("br",{})]})]}),e.jsxs("div",{className:"flex flex-col flex-1 mb-4 md:mb-0",children:[e.jsx("label",{htmlFor:"service",className:"block text-gray-700 text-sm font-bold mb-2",children:"Service"}),e.jsxs("select",{id:"service",value:t.service_id??"",onChange:s=>D(a,"service_id",s.target.value),className:"select border border-gray-300 rounded-md p-2 w-full text-sm",children:[e.jsx("option",{value:"",disabled:!0,children:"Select Service"}),f&&f.length>0?f.map(s=>e.jsx("option",{value:s.service_service_id,children:s.service_name},s.service_service_id)):t.service_id&&e.jsx("option",{value:t.service_id,children:t.service_name},t.service_id)]}),e.jsxs("p",{className:"w-full text-red-500 text-sm",children:[w[`items[${a}].service_id`]||"Â ",e.jsx("br",{})]}),e.jsxs("p",{className:"w-full text-red-500 text-sm",children:["Â ",e.jsx("br",{})]})]}),e.jsxs("div",{className:"flex flex-col flex-1",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Price"}),e.jsx("input",{type:"text",value:t.price||"",onChange:s=>D(a,"price",s.target.value),className:`input border rounded-md p-2 w-full ${isNaN(A)?"border-gray-300 bg-gray-100 text-sm text-gray-600 cursor-not-allowed focus:outline-none":"border-gray-300"}`,readOnly:isNaN(A)}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:w[`items[${a}].price`]||"Â "})]}),e.jsxs("div",{className:"flex flex-col flex-1 mb-4 md:mb-0",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Quantity"}),e.jsx("input",{type:"text",value:t.quantity??1,onChange:s=>D(a,"quantity",s.target.value),className:"input border border-gray-300 rounded-md p-2 w-full"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:"Â "})]}),e.jsxs("div",{className:"flex flex-col flex-1 mb-4 md:mb-0",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Item total"}),e.jsx("input",{type:"text",value:t.item_Total??"",onChange:s=>D(a,"item_Total",s.target.value),min:"0",step:"0.01",readOnly:!0,className:"input border border-gray-300 bg-gray-100 text-sm text-gray-600 rounded-md p-2 cursor-not-allowed focus:outline-none"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:"Â "})]}),e.jsxs("div",{className:"flex flex-col md:mb-0",children:[e.jsx("label",{htmlFor:"description_checkbox",className:"block text-gray-700 text-sm font-bold mb-2",children:"Description"}),e.jsx("input",{className:"checkbox checkbox-lg m-auto mt-2",id:"description_checkbox","data-datatable-check":"true",type:"checkbox",checked:t.showDescription,onChange:s=>D(a,"showDescription",s.target.checked)}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:"Â "})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{type:"button",className:`p-2 mt-8 rounded-full ${n.items.length>1?"bg-red-100 hover:bg-red-200":"bg-gray-200 cursor-not-allowed"}`,onClick:()=>fe(a),disabled:n.items.length===1,children:e.jsx(Ce,{className:`${n.items.length>1?"text-red-500":"text-gray-400"}`})})})]},a),t.showDescription&&e.jsx("div",{children:e.jsxs("div",{className:"flex flex-col w-80 mb-8",children:[e.jsx("label",{htmlFor:"description",className:"block text-gray-700 text-sm font-bold mb-2",children:"Description"}),e.jsx("textarea",{id:"description",value:t.description||"",onChange:s=>D(a,"description",s.target.value),className:"input border border-gray-300 rounded-md p-2 w-full"})]})})]})),e.jsx("button",{type:"button",onClick:ge,className:"btn btn-secondary mb-6",children:"Add Item"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Coupon Code"}),e.jsxs("select",{id:"coupon_code",className:"select border border-gray-300 rounded-md p-2 w-full text-sm",value:n.coupon_code||"",onChange:t=>{const a=$.find(s=>s.code===t.target.value);_e(a==null?void 0:a.code)},children:[e.jsx("option",{value:"",disabled:!0,children:"Select Coupon Code"}),$&&$.length>0?$.map(t=>e.jsx("option",{value:t.code,children:t.code},t.coupon_id)):e.jsx("option",{children:"No Coupons available"})]}),e.jsx("p",{className:"text-red-500 text-sm",children:w.coupon_code||"Â "})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Coupon Discount"}),e.jsx("input",{type:"text",value:n.coupon_discount||"",readOnly:!0,className:"input border border-gray-300 bg-gray-100 text-sm text-gray-600 rounded-md p-2 cursor-not-allowed focus:outline-none"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:w.coupon_discount||"Â "})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"express_delivery_charges",className:"block text-gray-700 text-sm font-bold mb-2",children:"Express Delivery Charges"}),e.jsx("input",{type:"text",id:"express_delivery_charges",min:"0",value:n.express_delivery_charges||"",onChange:t=>ee("express_delivery_charges",t.target.value),className:"input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:w.express_delivery_charges||"Â "})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"shipping_charges",className:"block text-gray-700 text-sm font-bold mb-2",children:"Shipping Charges"}),e.jsx("input",{type:"text",id:"shipping_charges",min:"0",value:n.shipping_charges||"",onChange:t=>ee("shipping_charges",t.target.value),className:"input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:w.shipping_charges||"Â "})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Sub Total"}),e.jsx("input",{type:"text",value:n.sub_total||"",readOnly:!0,className:"input border border-gray-300 bg-gray-100 text-sm text-gray-600 rounded-md p-2 cursor-not-allowed focus:outline-none"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:w.sub_total||"Â "})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Total"}),e.jsx("input",{type:"text",value:n.total||"",readOnly:!0,className:"input border border-gray-300 bg-gray-100 text-sm text-gray-600 rounded-md p-2 cursor-not-allowed focus:outline-none"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"paid_amount",className:"block text-gray-700 text-sm font-bold mb-2",children:"Paid amount"}),e.jsx("input",{type:"text",id:"paid_amount",value:n.paid_amount||"",onChange:t=>{N({...n,paid_amount:Number(t.target.value)})},className:"input border border-gray-300 rounded-md p-2",min:"0",step:"0.01"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:w.paid_amount||"Â "})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"payment_method",className:"block text-gray-700 text-sm font-bold mb-2",children:"Payment Method"}),e.jsxs("select",{className:"select border border-gray-300 rounded-md p-2 w-full text-sm",id:"payment_method",value:n.payment_type??"",onChange:t=>N({...n,payment_type:Number(t.target.value)}),children:[e.jsx("option",{value:"",disabled:!0,children:"Select Payment Type"}),e.jsx("option",{value:1,children:"Cash on Delivery"}),e.jsx("option",{value:2,children:"Online Payment"})]}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:w.payment_type||"Â "})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"payment_status",className:"block text-gray-700 text-sm font-bold mb-2",children:"Payment Status"}),e.jsxs("select",{className:"select border border-gray-300 rounded-md p-2 w-full text-sm",id:"payment_status",value:n.payment_status??"",onChange:t=>N({...n,payment_status:Number(t.target.value)}),children:[e.jsx("option",{value:"",disabled:!0,children:"Select Payment Status"}),e.jsx("option",{value:1,children:"Pending"}),e.jsx("option",{value:2,children:"Received"}),e.jsx("option",{value:3,children:"Partial Received"})]}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:w.payment_status||"Â "})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"transaction_id",className:"block text-gray-700 text-sm font-bold mb-2",children:"Transaction ID"}),e.jsx("input",{type:"text",id:"transaction_id",value:n.transaction_id||"",onChange:t=>N({...n,transaction_id:t.target.value}),className:"input border border-gray-300 rounded-md p-2"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"payment_status",className:"block text-gray-700 text-sm font-bold mb-2",children:"Select Branch"}),e.jsxs("select",{id:"company_id",className:"select border border-gray-300 rounded-md p-2 w-full text-sm",value:n.branch_id||"",onChange:t=>N({...n,branch_id:t.target.value?Number(t.target.value):null}),children:[e.jsx("option",{value:"",disabled:!0,children:"Select Branch"}),K.length>0?K.map(t=>e.jsx("option",{value:t.branch_id,children:t.branch_name},t.branch_id)):e.jsx("option",{children:"No Data Available"})]})]})]}),e.jsxs("div",{className:"flex justify-start mt-6",children:[e.jsx("button",{type:"submit",className:"btn btn-primary mr-4",disabled:E||S,children:x?"Update Order":"Add Order"}),e.jsx("button",{type:"button",onClick:be,className:"btn btn-secondary",children:"Cancel"})]})]}),e.jsx(Ze,{isOpen:le,setIsSubmit:R,onClose:()=>Y(!1),userId:n.user_id}),e.jsx(He,{isOpen:ne,setIsSubmit:R,onClose:()=>Z(!1)})]})})};export{lt as default};
