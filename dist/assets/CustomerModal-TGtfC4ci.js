import{r as A,V as O,B as ge,a as fe,d as L,p as pe,N as G,Q as he,S as be,U as xe,j as e,b as se}from"./index-BsfZthRi.js";import{u as ye,c as ve}from"./userSchema-BhprlbYe.js";const Ce=()=>{const[f,u]=A.useState([]),[p,y]=A.useState(!1);return{address:f,loading:p,fetchAddress:async o=>{var s;const j=localStorage.getItem("authToken"),g=`http://35.154.167.170:3000/address/${o}/user`;try{const v=await fetch(g,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${j}`}});if(!v.ok){const c=await v.json();O.error(c.message,{position:"top-center"});return}const b=await v.json(),_=((s=b==null?void 0:b.data)==null?void 0:s.result)||[];u(_)}catch(v){O.error((v==null?void 0:v.message)||"Network error: Failed to fetch.",{position:"top-center"})}finally{y(!1)}}}},oe=()=>{const[f,u]=A.useState(!1);return{addAddress:async(y,h=!0)=>{var j;const o=localStorage.getItem("authToken");u(!0);try{const g=await fetch(`${ge}/address/admin`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify(y)}),s=await g.json();return g.ok?(h&&O.success(s.message,{position:"top-center"}),(j=s==null?void 0:s.data)==null?void 0:j.result):(h&&O.error(s.message,{position:"top-center"}),!1)}catch(g){return O.error((g==null?void 0:g.message)||"Error adding banner",{position:"top-center"}),!1}finally{u(!1)}},loading:f}},le=fe().shape({pincode:L().optional().test("is-valid-pincode","Pincode must be exactly 6 digits",f=>!f||/^[0-9]{6}$/.test(f)),address_type:pe().required("Address type is required"),building_number:L().required("House number is required"),area:L().required("Area is required"),city:L().required("City is required"),state:L().required("State is required"),country:L().required("Country is required")});var I={},V={},J,ee;function je(){if(ee)return J;ee=1;var f="Expected a function",u=NaN,p="[object Symbol]",y=/^\s+|\s+$/g,h=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,j=/^0o[0-7]+$/i,g=parseInt,s=typeof G=="object"&&G&&G.Object===Object&&G,v=typeof self=="object"&&self&&self.Object===Object&&self,b=s||v||Function("return this")(),_=Object.prototype,c=_.toString,S=Math.max,P=Math.min,m=function(){return b.Date.now()};function i(n,r,d){var w,k,D,E,C,T,q=0,Q=!1,B=!1,z=!0;if(typeof n!="function")throw new TypeError(f);r=l(r)||0,x(d)&&(Q=!!d.leading,B="maxWait"in d,D=B?S(l(d.maxWait)||0,r):D,z="trailing"in d?!!d.trailing:z);function H(N){var F=w,U=k;return w=k=void 0,q=N,E=n.apply(U,F),E}function de(N){return q=N,C=setTimeout(K,r),Q?H(N):E}function ce(N){var F=N-T,U=N-q,Z=r-F;return B?P(Z,D-U):Z}function X(N){var F=N-T,U=N-q;return T===void 0||F>=r||F<0||B&&U>=D}function K(){var N=m();if(X(N))return Y(N);C=setTimeout(K,ce(N))}function Y(N){return C=void 0,z&&w?H(N):(w=k=void 0,E)}function ue(){C!==void 0&&clearTimeout(C),q=0,w=T=k=C=void 0}function me(){return C===void 0?E:Y(m())}function W(){var N=m(),F=X(N);if(w=arguments,k=this,T=N,F){if(C===void 0)return de(T);if(B)return C=setTimeout(K,r),H(T)}return C===void 0&&(C=setTimeout(K,r)),E}return W.cancel=ue,W.flush=me,W}function x(n){var r=typeof n;return!!n&&(r=="object"||r=="function")}function t(n){return!!n&&typeof n=="object"}function a(n){return typeof n=="symbol"||t(n)&&c.call(n)==p}function l(n){if(typeof n=="number")return n;if(a(n))return u;if(x(n)){var r=typeof n.valueOf=="function"?n.valueOf():n;n=x(r)?r+"":r}if(typeof n!="string")return n===0?n:+n;n=n.replace(y,"");var d=o.test(n);return d||j.test(n)?g(n.slice(2),d?2:8):h.test(n)?u:+n}return J=i,J}var R={},te;function we(){return te||(te=1,Object.defineProperty(R,"__esModule",{value:!0}),R.compose=function(){for(var u=arguments.length,p=Array(u),y=0;y<u;y++)p[y]=arguments[y];return function(){for(var h=arguments.length,o=Array(h),j=0;j<h;j++)o[j]=arguments[j];p.forEach(function(g){return g&&g.apply(void 0,o)})}},R.pick=function(u){for(var p=arguments.length,y=Array(p>1?p-1:0),h=1;h<p;h++)y[h-1]=arguments[h];return y.reduce(function(o,j){return u&&u.hasOwnProperty(j)&&(o[j]=u[j]),o},{})}),R}var ae;function Se(){if(ae)return V;ae=1,Object.defineProperty(V,"__esModule",{value:!0});var f=Object.assign||function(m){for(var i=1;i<arguments.length;i++){var x=arguments[i];for(var t in x)Object.prototype.hasOwnProperty.call(x,t)&&(m[t]=x[t])}return m},u=function(){function m(i,x){for(var t=0;t<x.length;t++){var a=x[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(i,a.key,a)}}return function(i,x,t){return x&&m(i.prototype,x),t&&m(i,t),i}}(),p=he(),y=v(p),h=be(),o=v(h),j=je(),g=v(j),s=we();function v(m){return m&&m.__esModule?m:{default:m}}function b(m,i){if(!(m instanceof i))throw new TypeError("Cannot call a class as a function")}function _(m,i){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i&&(typeof i=="object"||typeof i=="function")?i:m}function c(m,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof i);m.prototype=Object.create(i&&i.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(m,i):m.__proto__=i)}var S=function(i){return{mainText:i.main_text,secondaryText:i.secondary_text}},P=function(m){c(i,m);function i(x){b(this,i);var t=_(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,x));return t.init=function(){if(!window.google)throw new Error("[react-places-autocomplete]: Google Maps JavaScript API library must be loaded. See: https://github.com/kenny-hibino/react-places-autocomplete#load-google-library");if(!window.google.maps.places)throw new Error("[react-places-autocomplete]: Google Maps Places library must be loaded. Please add `libraries=places` to the src URL. See: https://github.com/kenny-hibino/react-places-autocomplete#load-google-library");t.autocompleteService=new window.google.maps.places.AutocompleteService,t.autocompleteOK=window.google.maps.places.PlacesServiceStatus.OK,t.setState(function(a){return a.ready?null:{ready:!0}})},t.autocompleteCallback=function(a,l){if(t.setState({loading:!1}),l!==t.autocompleteOK){t.props.onError(l,t.clearSuggestions);return}var n=t.props.highlightFirstSuggestion;t.setState({suggestions:a.map(function(r,d){return{id:r.id,description:r.description,placeId:r.place_id,active:!!(n&&d===0),index:d,formattedSuggestion:S(r.structured_formatting),matchedSubstrings:r.matched_substrings,terms:r.terms,types:r.types}})})},t.fetchPredictions=function(){var a=t.props.value;a.length&&(t.setState({loading:!0}),t.autocompleteService.getPlacePredictions(f({},t.props.searchOptions,{input:a}),t.autocompleteCallback))},t.clearSuggestions=function(){t.setState({suggestions:[]})},t.clearActive=function(){t.setState({suggestions:t.state.suggestions.map(function(a){return f({},a,{active:!1})})})},t.handleSelect=function(a,l,n){t.clearSuggestions(),t.props.onSelect?t.props.onSelect(a,l,n):t.props.onChange(a)},t.getActiveSuggestion=function(){return t.state.suggestions.find(function(a){return a.active})},t.selectActiveAtIndex=function(a){var l=t.state.suggestions.find(function(n){return n.index===a}).description;t.setActiveAtIndex(a),t.props.onChange(l)},t.selectUserInputValue=function(){t.clearActive(),t.props.onChange(t.state.userInputValue)},t.handleEnterKey=function(){var a=t.getActiveSuggestion();a===void 0?t.handleSelect(t.props.value,null,null):t.handleSelect(a.description,a.placeId,a)},t.handleDownKey=function(){if(t.state.suggestions.length!==0){var a=t.getActiveSuggestion();a===void 0?t.selectActiveAtIndex(0):a.index===t.state.suggestions.length-1?t.selectUserInputValue():t.selectActiveAtIndex(a.index+1)}},t.handleUpKey=function(){if(t.state.suggestions.length!==0){var a=t.getActiveSuggestion();a===void 0?t.selectActiveAtIndex(t.state.suggestions.length-1):a.index===0?t.selectUserInputValue():t.selectActiveAtIndex(a.index-1)}},t.handleInputKeyDown=function(a){switch(a.key){case"Enter":a.preventDefault(),t.handleEnterKey();break;case"ArrowDown":a.preventDefault(),t.handleDownKey();break;case"ArrowUp":a.preventDefault(),t.handleUpKey();break;case"Escape":t.clearSuggestions();break}},t.setActiveAtIndex=function(a){t.setState({suggestions:t.state.suggestions.map(function(l,n){return n===a?f({},l,{active:!0}):f({},l,{active:!1})})})},t.handleInputChange=function(a){var l=a.target.value;if(t.props.onChange(l),t.setState({userInputValue:l}),!l){t.clearSuggestions();return}t.props.shouldFetchSuggestions&&t.debouncedFetchPredictions()},t.handleInputOnBlur=function(){t.mousedownOnSuggestion||t.clearSuggestions()},t.getActiveSuggestionId=function(){var a=t.getActiveSuggestion();return a?"PlacesAutocomplete__suggestion-"+a.placeId:void 0},t.getIsExpanded=function(){return t.state.suggestions.length>0},t.getInputProps=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(a.hasOwnProperty("value"))throw new Error("[react-places-autocomplete]: getInputProps does not accept `value`. Use `value` prop instead");if(a.hasOwnProperty("onChange"))throw new Error("[react-places-autocomplete]: getInputProps does not accept `onChange`. Use `onChange` prop instead");var l={type:"text",autoComplete:"off",role:"combobox","aria-autocomplete":"list","aria-expanded":t.getIsExpanded(),"aria-activedescendant":t.getActiveSuggestionId(),disabled:!t.state.ready};return f({},l,a,{onKeyDown:(0,s.compose)(t.handleInputKeyDown,a.onKeyDown),onBlur:(0,s.compose)(t.handleInputOnBlur,a.onBlur),value:t.props.value,onChange:function(r){t.handleInputChange(r)}})},t.getSuggestionItemProps=function(a){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.handleSuggestionMouseEnter.bind(t,a.index),r=t.handleSuggestionClick.bind(t,a);return f({},l,{key:a.id,id:t.getActiveSuggestionId(),role:"option",onMouseEnter:(0,s.compose)(n,l.onMouseEnter),onMouseLeave:(0,s.compose)(t.handleSuggestionMouseLeave,l.onMouseLeave),onMouseDown:(0,s.compose)(t.handleSuggestionMouseDown,l.onMouseDown),onMouseUp:(0,s.compose)(t.handleSuggestionMouseUp,l.onMouseUp),onTouchStart:(0,s.compose)(t.handleSuggestionTouchStart,l.onTouchStart),onTouchEnd:(0,s.compose)(t.handleSuggestionMouseUp,l.onTouchEnd),onClick:(0,s.compose)(r,l.onClick)})},t.handleSuggestionMouseEnter=function(a){t.setActiveAtIndex(a)},t.handleSuggestionMouseLeave=function(){t.mousedownOnSuggestion=!1,t.clearActive()},t.handleSuggestionMouseDown=function(a){a.preventDefault(),t.mousedownOnSuggestion=!0},t.handleSuggestionTouchStart=function(){t.mousedownOnSuggestion=!0},t.handleSuggestionMouseUp=function(){t.mousedownOnSuggestion=!1},t.handleSuggestionClick=function(a,l){l&&l.preventDefault&&l.preventDefault();var n=a.description,r=a.placeId;t.handleSelect(n,r,a),setTimeout(function(){t.mousedownOnSuggestion=!1})},t.state={loading:!1,suggestions:[],userInputValue:x.value,ready:!x.googleCallbackName},t.debouncedFetchPredictions=(0,g.default)(t.fetchPredictions,x.debounce),t}return u(i,[{key:"componentDidMount",value:function(){var t=this.props.googleCallbackName;if(t){var a=window.google&&window.google.maps&&window.google.maps.places;a?this.init():window[t]=this.init}else this.init()}},{key:"componentWillUnmount",value:function(){var t=this.props.googleCallbackName;t&&window[t]&&delete window[t]}},{key:"render",value:function(){return this.props.children({getInputProps:this.getInputProps,getSuggestionItemProps:this.getSuggestionItemProps,loading:this.state.loading,suggestions:this.state.suggestions})}}]),i}(y.default.Component);return P.propTypes={onChange:o.default.func.isRequired,value:o.default.string.isRequired,children:o.default.func.isRequired,onError:o.default.func,onSelect:o.default.func,searchOptions:o.default.shape({bounds:o.default.object,componentRestrictions:o.default.object,location:o.default.object,offset:o.default.oneOfType([o.default.number,o.default.string]),radius:o.default.oneOfType([o.default.number,o.default.string]),types:o.default.array}),debounce:o.default.number,highlightFirstSuggestion:o.default.bool,shouldFetchSuggestions:o.default.bool,googleCallbackName:o.default.string},P.defaultProps={onError:function(i,x){return console.error(`[react-places-autocomplete]: error happened when fetching data from Google Maps API.
Please check the docs here (https://developers.google.com/maps/documentation/javascript/places#place_details_responses)
Status: `,i)},searchOptions:{},debounce:200,highlightFirstSuggestion:!1,shouldFetchSuggestions:!0},V.default=P,V}var M={},ne;function Ne(){return ne||(ne=1,Object.defineProperty(M,"__esModule",{value:!0}),M.geocodeByAddress=function(u){var p=new window.google.maps.Geocoder,y=window.google.maps.GeocoderStatus.OK;return new Promise(function(h,o){p.geocode({address:u},function(j,g){g!==y&&o(g),h(j)})})},M.getLatLng=function(u){return new Promise(function(p,y){try{var h={lat:u.geometry.location.lat(),lng:u.geometry.location.lng()};p(h)}catch(o){y(o)}})},M.geocodeByPlaceId=function(u){var p=new window.google.maps.Geocoder,y=window.google.maps.GeocoderStatus.OK;return new Promise(function(h,o){p.geocode({placeId:u},function(j,g){g!==y&&o(g),h(j)})})}),M}var re;function _e(){if(re)return I;re=1,Object.defineProperty(I,"__esModule",{value:!0}),I.getLatLng=I.geocodeByPlaceId=I.geocodeByAddress=void 0;var f=Se(),u=y(f),p=Ne();function y(h){return h&&h.__esModule?h:{default:h}}return I.geocodeByAddress=p.geocodeByAddress,I.geocodeByPlaceId=p.geocodeByPlaceId,I.getLatLng=p.getLatLng,I.default=u.default,I}var $=_e();const ie=xe($),Ie=({isOpen:f,onClose:u,userId:p,setIsSubmit:y,onAddressAdded:h,fullname:o})=>{const{addAddress:j,loading:g}=oe(),[s,v]=A.useState({}),[b,_]=A.useState(!1),[c,S]=A.useState({building_number:"",area:"",lat:null,long:null,landmark:"",pincode:"",city:"",state:"",country:"",user_id:null,address_type:null,full_name:""}),[P,m]=A.useState(!1);A.useEffect(()=>{f?p&&S(a=>({...a,user_id:p,full_name:o})):(S({building_number:"",area:"",landmark:"",pincode:"",city:"",lat:null,long:null,state:"",country:"",user_id:null,address_type:null,full_name:""}),v({}))},[f,p]);const i=a=>{S({...c,area:a}),m(!0)},x=async a=>{S({...c,area:a});try{const l=await $.geocodeByAddress(a),n=await $.getLatLng(l[0]);n&&S(r=>({...r,lat:n==null?void 0:n.lat,long:n==null?void 0:n.lng}))}catch{O.error("Failed to fetch address detail",{className:"toast-error"})}},t=async a=>{a.preventDefault();const l={...c};l.pincode||delete l.pincode,l.landmark||delete l.landmark;try{if(await le.validate(c,{abortEarly:!1}),v({}),p){const n=await j(l);n&&(h(n),u(),y(!0))}}catch(n){if(n instanceof se){const r={};n.inner.forEach(d=>{r[d.path||""]=d.message}),v(r)}else O.error("Failed to submit the form. Please try again.")}};if(f)return e.jsxs("div",{className:"fixed inset-0 grid overflow-auto items-center justify-center z-50 p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black opacity-50",onClick:u}),e.jsxs("div",{className:"bg-white p-5 rounded-lg shadow-lg min-w-[450px] !max-w-full z-10 relative",children:[e.jsx("button",{className:"btn btn-sm btn-icon btn-light btn-outline absolute top-0 right-0 mr-5 mt-5 lg:mr-5 shadow-default",onClick:u,children:e.jsx("i",{className:"ki-filled ki-cross"})}),e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Add New Address"}),e.jsxs("form",{onSubmit:t,children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"country",className:"block text-gray-700 font-semibold",children:"Address Type"}),e.jsxs("select",{className:"select select-lg text-sm",onChange:a=>S({...c,address_type:Number(a.target.value)}),children:[e.jsx("option",{value:"",selected:!0,disabled:!0,className:"badge-danger badge-outline",children:"Select Address Type"}),e.jsx("option",{value:"1",children:"Home"}),e.jsx("option",{value:"2",children:"Office"}),e.jsx("option",{value:"3",children:"Other"})]}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:s.address_type||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"area",className:"block text-gray-700 font-semibold",children:"Search Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"relative",children:e.jsx(ie,{value:c.area,onChange:i,onSelect:x,children:({getInputProps:a,suggestions:l,getSuggestionItemProps:n,loading:r})=>e.jsxs(e.Fragment,{children:[e.jsx("input",{...a({className:"w-full input border border-gray-300 rounded-md p-2",id:"area",type:"text",onFocus:()=>m(!0),onBlur:()=>m(!1)})}),P&&l.length>0&&e.jsx("div",{className:"absolute bg-white border z-10 border-gray-200 rounded-lg w-full text-sm max-h-[150px] overflow-y-auto",children:e.jsxs("ul",{className:"custom-ul",children:[r&&e.jsx("li",{className:"block px-4 py-[0.8rem] hover:bg-gray-100 w-full",children:"Loading..."}),!r&&l.map((d,w)=>{const{...k}=n(d);return e.jsx("li",{...k,className:"block px-2 py-[0.8rem] hover:bg-gray-100 w-full cursor-pointer font-style",children:d==null?void 0:d.description},w)})]})})]})})}),s.area&&e.jsx("p",{className:"w-full text-red-500 text-sm",children:s.area||" "})||b&&e.jsx("p",{className:"aam-error-label",children:"please select valid area from dropdown"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"building_number",className:"block text-gray-700 font-semibold",children:"House Number and Society"}),e.jsx("input",{type:"text",id:"building_number",name:"building_number",autoComplete:"off",value:c.building_number,onChange:a=>S({...c,building_number:a.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:s.building_number||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"landmark",className:"block text-gray-700 font-semibold",children:"Landmark"}),e.jsx("input",{type:"text",id:"landmark",name:"landmark",autoComplete:"off",value:c.landmark,onChange:a=>S({...c,landmark:a.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:s.landmark||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"city",className:"block text-gray-700 font-semibold",children:"City"}),e.jsx("input",{type:"text",id:"city",name:"city",autoComplete:"off",value:c.city,onChange:a=>S({...c,city:a.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:s.city||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"pincode",className:"block text-gray-700 font-semibold",children:"Pin code"}),e.jsx("input",{type:"text",id:"pincode",name:"pincode",autoComplete:"off",value:c.pincode,onChange:a=>S({...c,pincode:a.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:s.pincode||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"state",className:"block text-gray-700 font-semibold",children:"State"}),e.jsx("input",{type:"text",id:"state",name:"state",autoComplete:"off",value:c.state,onChange:a=>S({...c,state:a.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:s.state||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"country",className:"block text-gray-700 font-semibold",children:"Country"}),e.jsx("input",{type:"text",id:"country",name:"country",autoComplete:"off",value:c.country,onChange:a=>S({...c,country:a.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:s.country||" "})]})]}),e.jsxs("div",{className:"flex justify-end mt-6",children:[e.jsx("button",{type:"button",onClick:u,className:"btn btn-light mr-2",disabled:g,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:g,className:`btn btn-primary ${g?"opacity-50 cursor-not-allowed":""}`,children:g?"Submitting...":"Submit"})]})]})]})]})},Pe=({isOpen:f,onClose:u,setIsSubmit:p,onCustomerCreated:y})=>{const{addUser:h,loading:o}=ye(),{addAddress:j,loading:g}=oe(),[s,v]=A.useState({first_name:"",last_name:"",email:"",mobile_number:"",gender:null,role_id:5}),[b,_]=A.useState({building_number:"",area:"",landmark:"",pincode:"",city:"",state:"",country:"",user_id:null,full_name:"",address_type:null}),[c,S]=A.useState({}),[P,m]=A.useState(!1),[i,x]=A.useState(!1);A.useEffect(()=>{f||(v({first_name:"",last_name:"",email:"",mobile_number:"",gender:null,role_id:5}),_({building_number:"",area:"",landmark:"",pincode:"",city:"",state:"",country:"",user_id:null,full_name:"",address_type:null}),S({}))},[f]);const t=n=>{_({...b,area:n}),x(!0)},a=async n=>{_({...b,area:n});try{const r=await $.geocodeByAddress(n),d=await $.getLatLng(r[0]);d&&_(w=>({...w,lat:d==null?void 0:d.lat,long:d==null?void 0:d.lng}))}catch{O.error("Failed to fetch address detail",{className:"toast-error"})}},l=async n=>{n.preventDefault();try{await ve().validate(s,{abortEarly:!1}),await le.validate(b,{abortEarly:!1}),S({});const r={...s};r.email||delete r.email;const d=await h(r);if(d!=null&&d.user_id){const w={...b,user_id:d.user_id,full_name:`${d.first_name} ${d.last_name}`};w.landmark||delete w.landmark,w.pincode||delete w.pincode;const k=await j(w,!1);k&&(y(d,k),u(),p(!0))}}catch(r){if(r instanceof se){const d={};r.inner.forEach(w=>{d[w.path||""]=w.message}),S(d)}else O.error("Failed to submit the form. Please try again.")}};return f?e.jsxs("div",{className:"fixed inset-0 grid overflow-auto items-center justify-center z-50 p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black opacity-50",onClick:u}),e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg max-w-5xl w-full smobile:min-w-[85%] z-10 relative",children:[e.jsx("button",{className:"btn btn-sm btn-icon btn-light btn-outline absolute top-0 right-0 mr-5 mt-5 lg:mr-5 shadow-default",onClick:u,children:e.jsx("i",{className:"ki-filled ki-cross"})}),e.jsxs("form",{children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Customer Info"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-1",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"first_name",className:"block text-gray-700 font-semibold",children:"First name"}),e.jsx("input",{type:"text",id:"first_name",name:"first_name",autoComplete:"off",value:s.first_name||"",onChange:n=>v({...s,first_name:n.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"text-red-500 text-sm",children:c.first_name||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"last_name",className:"block text-gray-700 font-semibold",children:"Last name"}),e.jsx("input",{type:"text",id:"last_name",name:"last_name",autoComplete:"off",value:s.last_name,onChange:n=>v({...s,last_name:n.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"text-red-500 text-sm",children:c.last_name||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-gray-700 font-semibold",children:"Email"}),e.jsx("input",{type:"text",id:"email",name:"email",autoComplete:"off",value:s.email,onChange:n=>v({...s,email:n.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"text-red-500 text-sm",children:c.email||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"mobile_number",className:"block text-gray-700 font-semibold",children:"Mobile Number"}),e.jsx("input",{type:"text",id:"mobile_number",name:"mobile_number",autoComplete:"off",value:s.mobile_number,onChange:n=>v({...s,mobile_number:n.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"text-red-500 text-sm",children:c.mobile_number||" "})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"mb-2 block text-gray-700 font-semibold",children:"Gender"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:"gender",value:1,checked:s.gender===1,onChange:n=>v({...s,gender:parseInt(n.target.value)}),className:"radio radio-primary"}),e.jsx("span",{className:"text-sm",children:"Male"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:"gender",value:2,checked:s.gender===2,onChange:n=>v({...s,gender:parseInt(n.target.value)}),className:"radio radio-primary"}),e.jsx("span",{className:"text-sm",children:"Female"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:"gender",value:3,checked:s.gender===3,onChange:n=>v({...s,gender:parseInt(n.target.value)}),className:"radio radio-primary"}),e.jsx("span",{className:"text-sm",children:"Other"})]})]}),e.jsx("p",{className:"text-red-500 text-sm",children:c.gender||" "})]})]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Address"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-1",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"country",className:"block text-gray-700 font-semibold",children:"Address Type"}),e.jsxs("select",{className:"select select-lg text-sm w-full p-2 border border-gray-300 rounded-md",onChange:n=>_({...b,address_type:Number(n.target.value)}),children:[e.jsx("option",{value:"",selected:!0,disabled:!0,className:"badge-danger badge-outline",children:"Select Type"}),e.jsx("option",{value:"1",children:"Home"}),e.jsx("option",{value:"2",children:"Office"}),e.jsx("option",{value:"3",children:"Other"})]}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:c.address_type||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"area",className:"block text-gray-700 font-semibold",children:"Search Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"relative",children:e.jsx(ie,{value:b.area,onChange:t,onSelect:a,children:({getInputProps:n,suggestions:r,getSuggestionItemProps:d,loading:w})=>e.jsxs(e.Fragment,{children:[e.jsx("input",{...n({className:"w-full input border border-gray-300 rounded-md p-2",id:"area",type:"text",onFocus:()=>x(!0),onBlur:()=>x(!1)})}),i&&r.length>0&&e.jsx("div",{className:"absolute bg-white border z-10 border-gray-200 rounded-lg w-full text-sm max-h-[150px] overflow-y-auto",children:e.jsxs("ul",{className:"custom-ul",children:[w&&e.jsx("li",{className:"block px-4 py-[0.8rem] hover:bg-gray-100 w-full",children:"Loading..."}),!w&&r.map((k,D)=>{const{...E}=d(k);return e.jsx("li",{...E,className:"block px-2 py-[0.8rem] hover:bg-gray-100 w-full cursor-pointer font-style",children:k==null?void 0:k.description},D)})]})})]})})}),c.area&&e.jsx("p",{className:"w-full text-red-500 text-sm",children:c.area||" "})||P&&e.jsx("p",{className:"aam-error-label",children:"please select valid area from dropdown"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"building_number",className:"block text-gray-700 font-semibold",children:"House Number"}),e.jsx("input",{type:"text",id:"building_number",name:"building_number",autoComplete:"off",value:b.building_number,onChange:n=>_({...b,building_number:n.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:c.building_number||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"landmark",className:"block text-gray-700 font-semibold",children:"Landmark"}),e.jsx("input",{type:"text",id:"landmark",name:"landmark",autoComplete:"off",value:b.landmark,onChange:n=>_({...b,landmark:n.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:c.landmark||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"city",className:"block text-gray-700 font-semibold",children:"City"}),e.jsx("input",{type:"text",id:"city",name:"city",autoComplete:"off",value:b.city,onChange:n=>_({...b,city:n.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:c.city||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"pincode",className:"block text-gray-700 font-semibold",children:"Pin code"}),e.jsx("input",{type:"text",id:"pincode",name:"pincode",autoComplete:"off",value:b.pincode,onChange:n=>_({...b,pincode:n.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:c.pincode||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"state",className:"block text-gray-700 font-semibold",children:"State"}),e.jsx("input",{type:"text",id:"state",name:"state",autoComplete:"off",value:b.state,onChange:n=>_({...b,state:n.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:c.state||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"country",className:"block text-gray-700 font-semibold",children:"Country"}),e.jsx("input",{type:"text",id:"country",name:"country",autoComplete:"off",value:b.country,onChange:n=>_({...b,country:n.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:c.country||" "})]})]})]})]}),e.jsxs("div",{className:"flex justify-end mt-6",children:[e.jsx("button",{type:"button",onClick:u,className:"btn btn-light mr-2",disabled:o||g,children:"Cancel"}),e.jsx("button",{type:"button",onClick:l,disabled:o||g,className:`btn btn-primary ${o||g?"opacity-50 cursor-not-allowed":""}`,children:o||g?"Submitting...":"Submit"})]})]})]})]}):null};export{Ie as A,Pe as C,Ce as u};
