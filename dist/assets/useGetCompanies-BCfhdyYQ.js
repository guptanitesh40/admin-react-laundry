import{r as n,B as T,V as h}from"./index-DGXIY8xp.js";const w=(o=1,a=10,s="",r,i,c)=>{const[S,m]=n.useState([]),[g,f]=n.useState(!1),[y,C]=n.useState(0),u=async()=>{var l,d;const E=localStorage.getItem("authToken"),t=new URLSearchParams;o&&t.append("page_number",o.toString()),a&&t.append("per_page",a.toString()),s&&t.append("search",s),r&&t.append("sort_by",r),i&&t.append("order",i),c&&t.append("companies_ownedby",c.toString()),f(!0);try{const p=await fetch(`${T}/companies?${t}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${E}`}}),e=await p.json();if(!p.ok){h.error(e.message,{position:"top-center"});return}m(((l=e==null?void 0:e.data)==null?void 0:l.result)||[]),C(((d=e==null?void 0:e.data)==null?void 0:d.count)||0)}catch{h.error("An error occurred while fetching data")}finally{f(!1)}};return n.useEffect(()=>{u()},[o,a,s,r,i,c]),{companies:S,loading:g,totalCount:y,fetchCompanies:u}};export{w as u};
