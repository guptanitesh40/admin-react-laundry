import{r as j,V as T,B as Fe,a as Ne,x as rt,n as B,d as ee,y as be,z as nt,A as lt,C as ot,j as e,b as we,D as it,E as dt,o as ct,H as ut,v as mt,k as pt,p as gt,f as ht,I as ft}from"./index-B3hfs0zu.js";import{u as bt}from"./useGetCategories--JQxveG9.js";import{u as xt}from"./useGetPrice-2-TApUMN.js";import{u as yt}from"./useGetBranches-22SK2C6W.js";import{u as vt}from"./useGetOrder-BSQ6wPZm.js";import{u as _t}from"./useGetUsersByRole-Cj2mJlDz.js";import{u as jt,c as Nt}from"./userSchema-DzV7CbeH.js";import{u as wt}from"./useGetuser-hLK2mQrk.js";const St="http://3.110.208.70:3000/admin/coupon/apply",kt=()=>{const[c,m]=j.useState(!1);return{applyCoupon:async(y,h,l)=>{const _=localStorage.getItem("authToken");m(!0);try{const u=await fetch(St,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${_}`},body:JSON.stringify({user_id:y,order_Total:h,coupon_code:l})}),o=await u.json();return u.ok?o.data:(T.error(o.message,{position:"top-center"}),!1)}catch{T.error("Unable to apply coupon code!")}finally{m(!1)}},loading:c}},Ct=()=>{const[c,m]=j.useState([]),[v,y]=j.useState(!1),h=async l=>{const _=localStorage.getItem("authToken");y(!0);try{const u=await fetch(`${Fe}/admin/valid-coupons?${l}`,{method:"GET",headers:{Authorization:_?`Bearer ${_}`:""}}),o=await u.json();if(!u.ok){T.error(o.message,{position:"top-center"}),y(!1);return}m(o==null?void 0:o.data)}catch{T.error("Network error: Failed to fetch coupons.")}finally{y(!1)}};return j.useEffect(()=>{h()},[]),{validCoupons:c,fetchValidCoupons:h,loading:v}},At="http://3.110.208.70:3000",Pt=`${At}/admin/orders`,It=()=>{const[c,m]=j.useState(!1);return{addOrder:async y=>{const h=localStorage.getItem("authToken");m(!0);try{const l=await fetch(Pt,{method:"POST",headers:{Authorization:`Bearer ${h}`,"Content-Type":"application/json"},body:JSON.stringify(y)});if(!l.ok){const u=await l.json();return T.error(u.message,{position:"top-center"}),!1}const _=await l.json();return T.success(_.message,{position:"top-center"}),!0}catch(l){return T.error((l==null?void 0:l.message)||"Network error: Failed to fetch.",{position:"top-center"}),!1}finally{m(!1)}},loading:c}},Ot=()=>{const[c,m]=j.useState(!1);return{updateOrder:async(y,h)=>{const l=localStorage.getItem("authToken"),_=`http://3.110.208.70:3000/admin/orders/${y}`;m(!0);try{const u=await fetch(_,{method:"PUT",headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"},body:JSON.stringify(h)});if(u.ok){const P=await u.json();return T.success(P.message,{position:"top-center"}),!0}const o=await u.json();return T.error(o.message,{position:"top-center"}),!1}catch(u){return T.error((u==null?void 0:u.message)||"Network error: Failed to fetch.",{position:"top-center"}),!1}finally{m(!1)}},loading:c}},Dt=()=>{const[c,m]=j.useState([]),[v,y]=j.useState(!1);return{address:c,loading:v,fetchAddress:async l=>{var o;const _=localStorage.getItem("authToken"),u=`http://3.110.208.70:3000/address/${l}/user`;try{const P=await fetch(u,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${_}`}});if(!P.ok){const f=await P.json();T.error(f.message,{position:"top-center"});return}const S=await P.json(),F=((o=S==null?void 0:S.data)==null?void 0:o.result)||[];m(F)}catch(P){T.error((P==null?void 0:P.message)||"Network error: Failed to fetch.",{position:"top-center"})}finally{y(!1)}}}},Et=Ne().shape({category_id:B().nullable().required("Please select a category").test("required","Please select a category",c=>!!c),product_id:B().nullable().required("Please select a product").test("required","Please select a product",c=>!!c),service_id:B().nullable().required("Please select a service").test("required","Please select a service",c=>!!c),price:B().nullable().when(["category_id","product_id","service_id"],([c,m,v],y)=>c&&m&&v?y.required("Price is not available for the combination, please add a price"):y.nullable())}),Tt=Ne().shape({username:ee().required("Please enter username"),address_id:B().required("Please select address").test("required","Please select address",c=>!!c),express_delivery_charges:B().typeError("Express delivery charges must be a number").min(0,"Express delivery charges must be a positive number"),shipping_charges:B().typeError("Shipping charge must be a number").min(0,"Shipping charge must be a positive number"),payment_type:B().required("Please choose payment type").test("required","Please choose order status",c=>!!c),payment_status:B().required("Please choose payment status").test("required","Please choose payment status",c=>!!c),paid_amount:B().typeError("Paid amount must be a number").min(0,"Paid amount must be a positive number"),branch_id:B().required("Please select branch").test("required","Please select branch",c=>!!c),items:rt().of(Et)}),qe=()=>{const[c,m]=j.useState(!1);return{addAddress:async(y,h=!0)=>{var _;const l=localStorage.getItem("authToken");m(!0);try{const u=await fetch(`${Fe}/address/admin`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`},body:JSON.stringify(y)}),o=await u.json();return u.ok?(h&&T.success(o.message,{position:"top-center"}),(_=o==null?void 0:o.data)==null?void 0:_.result):(h&&T.error(o.message,{position:"top-center"}),!1)}catch(u){return T.error((u==null?void 0:u.message)||"Error adding banner",{position:"top-center"}),!1}finally{m(!1)}},loading:c}},$e=Ne().shape({pincode:ee().required("Pin Code is required").matches(/^[0-9]{6}$/,"Pincode must be 6 digit"),address_type:B().required("Address type is required"),building_number:ee().required("Building number is required"),area:ee().required("Area is required"),city:ee().required("City is required"),state:ee().required("State is required"),country:ee().required("Country is required"),landmark:ee().required("Landmark is required")});var z={},xe={},je,Ie;function Ft(){if(Ie)return je;Ie=1;var c="Expected a function",m=NaN,v="[object Symbol]",y=/^\s+|\s+$/g,h=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,_=/^0o[0-7]+$/i,u=parseInt,o=typeof be=="object"&&be&&be.Object===Object&&be,P=typeof self=="object"&&self&&self.Object===Object&&self,S=o||P||Function("return this")(),F=Object.prototype,f=F.toString,A=Math.max,G=Math.min,N=function(){return S.Date.now()};function b(r,d,w){var O,U,H,k,M,K,Q=0,de=!1,W=!1,le=!0;if(typeof r!="function")throw new TypeError(c);d=p(d)||0,C(w)&&(de=!!w.leading,W="maxWait"in w,H=W?A(p(w.maxWait)||0,d):H,le="trailing"in w?!!w.trailing:le);function X(D){var n=O,E=U;return O=U=void 0,Q=D,k=r.apply(E,n),k}function ye(D){return Q=D,M=setTimeout(te,d),de?X(D):k}function Y(D){var n=D-K,E=D-Q,me=d-n;return W?G(me,H-E):me}function R(D){var n=D-K,E=D-Q;return K===void 0||n>=d||n<0||W&&E>=H}function te(){var D=N();if(R(D))return ce(D);M=setTimeout(te,Y(D))}function ce(D){return M=void 0,le&&O?X(D):(O=U=void 0,k)}function ue(){M!==void 0&&clearTimeout(M),Q=0,O=K=U=M=void 0}function ve(){return M===void 0?k:ce(N())}function se(){var D=N(),n=R(D);if(O=arguments,U=this,K=D,n){if(M===void 0)return ye(K);if(W)return M=setTimeout(te,d),X(K)}return M===void 0&&(M=setTimeout(te,d)),k}return se.cancel=ue,se.flush=ve,se}function C(r){var d=typeof r;return!!r&&(d=="object"||d=="function")}function t(r){return!!r&&typeof r=="object"}function a(r){return typeof r=="symbol"||t(r)&&f.call(r)==v}function p(r){if(typeof r=="number")return r;if(a(r))return m;if(C(r)){var d=typeof r.valueOf=="function"?r.valueOf():r;r=C(d)?d+"":d}if(typeof r!="string")return r===0?r:+r;r=r.replace(y,"");var w=l.test(r);return w||_.test(r)?u(r.slice(2),w?2:8):h.test(r)?m:+r}return je=b,je}var oe={},Oe;function qt(){return Oe||(Oe=1,Object.defineProperty(oe,"__esModule",{value:!0}),oe.compose=function(){for(var m=arguments.length,v=Array(m),y=0;y<m;y++)v[y]=arguments[y];return function(){for(var h=arguments.length,l=Array(h),_=0;_<h;_++)l[_]=arguments[_];v.forEach(function(u){return u&&u.apply(void 0,l)})}},oe.pick=function(m){for(var v=arguments.length,y=Array(v>1?v-1:0),h=1;h<v;h++)y[h-1]=arguments[h];return y.reduce(function(l,_){return m&&m.hasOwnProperty(_)&&(l[_]=m[_]),l},{})}),oe}var De;function $t(){if(De)return xe;De=1,Object.defineProperty(xe,"__esModule",{value:!0});var c=Object.assign||function(N){for(var b=1;b<arguments.length;b++){var C=arguments[b];for(var t in C)Object.prototype.hasOwnProperty.call(C,t)&&(N[t]=C[t])}return N},m=function(){function N(b,C){for(var t=0;t<C.length;t++){var a=C[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(b,a.key,a)}}return function(b,C,t){return C&&N(b.prototype,C),t&&N(b,t),b}}(),v=nt(),y=P(v),h=lt(),l=P(h),_=Ft(),u=P(_),o=qt();function P(N){return N&&N.__esModule?N:{default:N}}function S(N,b){if(!(N instanceof b))throw new TypeError("Cannot call a class as a function")}function F(N,b){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:N}function f(N,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);N.prototype=Object.create(b&&b.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(N,b):N.__proto__=b)}var A=function(b){return{mainText:b.main_text,secondaryText:b.secondary_text}},G=function(N){f(b,N);function b(C){S(this,b);var t=F(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,C));return t.init=function(){if(!window.google)throw new Error("[react-places-autocomplete]: Google Maps JavaScript API library must be loaded. See: https://github.com/kenny-hibino/react-places-autocomplete#load-google-library");if(!window.google.maps.places)throw new Error("[react-places-autocomplete]: Google Maps Places library must be loaded. Please add `libraries=places` to the src URL. See: https://github.com/kenny-hibino/react-places-autocomplete#load-google-library");t.autocompleteService=new window.google.maps.places.AutocompleteService,t.autocompleteOK=window.google.maps.places.PlacesServiceStatus.OK,t.setState(function(a){return a.ready?null:{ready:!0}})},t.autocompleteCallback=function(a,p){if(t.setState({loading:!1}),p!==t.autocompleteOK){t.props.onError(p,t.clearSuggestions);return}var r=t.props.highlightFirstSuggestion;t.setState({suggestions:a.map(function(d,w){return{id:d.id,description:d.description,placeId:d.place_id,active:!!(r&&w===0),index:w,formattedSuggestion:A(d.structured_formatting),matchedSubstrings:d.matched_substrings,terms:d.terms,types:d.types}})})},t.fetchPredictions=function(){var a=t.props.value;a.length&&(t.setState({loading:!0}),t.autocompleteService.getPlacePredictions(c({},t.props.searchOptions,{input:a}),t.autocompleteCallback))},t.clearSuggestions=function(){t.setState({suggestions:[]})},t.clearActive=function(){t.setState({suggestions:t.state.suggestions.map(function(a){return c({},a,{active:!1})})})},t.handleSelect=function(a,p,r){t.clearSuggestions(),t.props.onSelect?t.props.onSelect(a,p,r):t.props.onChange(a)},t.getActiveSuggestion=function(){return t.state.suggestions.find(function(a){return a.active})},t.selectActiveAtIndex=function(a){var p=t.state.suggestions.find(function(r){return r.index===a}).description;t.setActiveAtIndex(a),t.props.onChange(p)},t.selectUserInputValue=function(){t.clearActive(),t.props.onChange(t.state.userInputValue)},t.handleEnterKey=function(){var a=t.getActiveSuggestion();a===void 0?t.handleSelect(t.props.value,null,null):t.handleSelect(a.description,a.placeId,a)},t.handleDownKey=function(){if(t.state.suggestions.length!==0){var a=t.getActiveSuggestion();a===void 0?t.selectActiveAtIndex(0):a.index===t.state.suggestions.length-1?t.selectUserInputValue():t.selectActiveAtIndex(a.index+1)}},t.handleUpKey=function(){if(t.state.suggestions.length!==0){var a=t.getActiveSuggestion();a===void 0?t.selectActiveAtIndex(t.state.suggestions.length-1):a.index===0?t.selectUserInputValue():t.selectActiveAtIndex(a.index-1)}},t.handleInputKeyDown=function(a){switch(a.key){case"Enter":a.preventDefault(),t.handleEnterKey();break;case"ArrowDown":a.preventDefault(),t.handleDownKey();break;case"ArrowUp":a.preventDefault(),t.handleUpKey();break;case"Escape":t.clearSuggestions();break}},t.setActiveAtIndex=function(a){t.setState({suggestions:t.state.suggestions.map(function(p,r){return r===a?c({},p,{active:!0}):c({},p,{active:!1})})})},t.handleInputChange=function(a){var p=a.target.value;if(t.props.onChange(p),t.setState({userInputValue:p}),!p){t.clearSuggestions();return}t.props.shouldFetchSuggestions&&t.debouncedFetchPredictions()},t.handleInputOnBlur=function(){t.mousedownOnSuggestion||t.clearSuggestions()},t.getActiveSuggestionId=function(){var a=t.getActiveSuggestion();return a?"PlacesAutocomplete__suggestion-"+a.placeId:void 0},t.getIsExpanded=function(){return t.state.suggestions.length>0},t.getInputProps=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(a.hasOwnProperty("value"))throw new Error("[react-places-autocomplete]: getInputProps does not accept `value`. Use `value` prop instead");if(a.hasOwnProperty("onChange"))throw new Error("[react-places-autocomplete]: getInputProps does not accept `onChange`. Use `onChange` prop instead");var p={type:"text",autoComplete:"off",role:"combobox","aria-autocomplete":"list","aria-expanded":t.getIsExpanded(),"aria-activedescendant":t.getActiveSuggestionId(),disabled:!t.state.ready};return c({},p,a,{onKeyDown:(0,o.compose)(t.handleInputKeyDown,a.onKeyDown),onBlur:(0,o.compose)(t.handleInputOnBlur,a.onBlur),value:t.props.value,onChange:function(d){t.handleInputChange(d)}})},t.getSuggestionItemProps=function(a){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.handleSuggestionMouseEnter.bind(t,a.index),d=t.handleSuggestionClick.bind(t,a);return c({},p,{key:a.id,id:t.getActiveSuggestionId(),role:"option",onMouseEnter:(0,o.compose)(r,p.onMouseEnter),onMouseLeave:(0,o.compose)(t.handleSuggestionMouseLeave,p.onMouseLeave),onMouseDown:(0,o.compose)(t.handleSuggestionMouseDown,p.onMouseDown),onMouseUp:(0,o.compose)(t.handleSuggestionMouseUp,p.onMouseUp),onTouchStart:(0,o.compose)(t.handleSuggestionTouchStart,p.onTouchStart),onTouchEnd:(0,o.compose)(t.handleSuggestionMouseUp,p.onTouchEnd),onClick:(0,o.compose)(d,p.onClick)})},t.handleSuggestionMouseEnter=function(a){t.setActiveAtIndex(a)},t.handleSuggestionMouseLeave=function(){t.mousedownOnSuggestion=!1,t.clearActive()},t.handleSuggestionMouseDown=function(a){a.preventDefault(),t.mousedownOnSuggestion=!0},t.handleSuggestionTouchStart=function(){t.mousedownOnSuggestion=!0},t.handleSuggestionMouseUp=function(){t.mousedownOnSuggestion=!1},t.handleSuggestionClick=function(a,p){p&&p.preventDefault&&p.preventDefault();var r=a.description,d=a.placeId;t.handleSelect(r,d,a),setTimeout(function(){t.mousedownOnSuggestion=!1})},t.state={loading:!1,suggestions:[],userInputValue:C.value,ready:!C.googleCallbackName},t.debouncedFetchPredictions=(0,u.default)(t.fetchPredictions,C.debounce),t}return m(b,[{key:"componentDidMount",value:function(){var t=this.props.googleCallbackName;if(t){var a=window.google&&window.google.maps&&window.google.maps.places;a?this.init():window[t]=this.init}else this.init()}},{key:"componentWillUnmount",value:function(){var t=this.props.googleCallbackName;t&&window[t]&&delete window[t]}},{key:"render",value:function(){return this.props.children({getInputProps:this.getInputProps,getSuggestionItemProps:this.getSuggestionItemProps,loading:this.state.loading,suggestions:this.state.suggestions})}}]),b}(y.default.Component);return G.propTypes={onChange:l.default.func.isRequired,value:l.default.string.isRequired,children:l.default.func.isRequired,onError:l.default.func,onSelect:l.default.func,searchOptions:l.default.shape({bounds:l.default.object,componentRestrictions:l.default.object,location:l.default.object,offset:l.default.oneOfType([l.default.number,l.default.string]),radius:l.default.oneOfType([l.default.number,l.default.string]),types:l.default.array}),debounce:l.default.number,highlightFirstSuggestion:l.default.bool,shouldFetchSuggestions:l.default.bool,googleCallbackName:l.default.string},G.defaultProps={onError:function(b,C){return console.error(`[react-places-autocomplete]: error happened when fetching data from Google Maps API.
Please check the docs here (https://developers.google.com/maps/documentation/javascript/places#place_details_responses)
Status: `,b)},searchOptions:{},debounce:200,highlightFirstSuggestion:!1,shouldFetchSuggestions:!0},xe.default=G,xe}var ne={},Ee;function Lt(){return Ee||(Ee=1,Object.defineProperty(ne,"__esModule",{value:!0}),ne.geocodeByAddress=function(m){var v=new window.google.maps.Geocoder,y=window.google.maps.GeocoderStatus.OK;return new Promise(function(h,l){v.geocode({address:m},function(_,u){u!==y&&l(u),h(_)})})},ne.getLatLng=function(m){return new Promise(function(v,y){try{var h={lat:m.geometry.location.lat(),lng:m.geometry.location.lng()};v(h)}catch(l){y(l)}})},ne.geocodeByPlaceId=function(m){var v=new window.google.maps.Geocoder,y=window.google.maps.GeocoderStatus.OK;return new Promise(function(h,l){v.geocode({placeId:m},function(_,u){u!==y&&l(u),h(_)})})}),ne}var Te;function Ut(){if(Te)return z;Te=1,Object.defineProperty(z,"__esModule",{value:!0}),z.getLatLng=z.geocodeByPlaceId=z.geocodeByAddress=void 0;var c=$t(),m=y(c),v=Lt();function y(h){return h&&h.__esModule?h:{default:h}}return z.geocodeByAddress=v.geocodeByAddress,z.geocodeByPlaceId=v.geocodeByPlaceId,z.getLatLng=v.getLatLng,z.default=m.default,z}var ie=Ut();const Le=ot(ie),Mt=({isOpen:c,onClose:m,userId:v,setIsSubmit:y,onAddressAdded:h,fullname:l})=>{const{addAddress:_,loading:u}=qe(),[o,P]=j.useState({}),[S,F]=j.useState(!1),[f,A]=j.useState({building_number:"",area:"",lat:null,long:null,landmark:"",pincode:"",city:"",state:"",country:"",user_id:null,address_type:null,full_name:""}),[G,N]=j.useState(!1);j.useEffect(()=>{c?v&&A(a=>({...a,user_id:v,full_name:l})):(A({building_number:"",area:"",landmark:"",pincode:"",city:"",lat:null,long:null,state:"",country:"",user_id:null,address_type:null,full_name:""}),P({}))},[c,v]);const b=a=>{A({...f,area:a}),N(!0)},C=async a=>{A({...f,area:a});try{const p=await ie.geocodeByAddress(a),r=await ie.getLatLng(p[0]);r&&A(d=>({...d,lat:r==null?void 0:r.lat,long:r==null?void 0:r.lng}))}catch{T.error("Failed to fetch address detail",{className:"toast-error"})}},t=async a=>{a.preventDefault();try{if(await $e.validate(f,{abortEarly:!1}),v){const p=await _(f);p&&(h(p),m(),y(!0))}}catch(p){if(p instanceof we){const r={};p.inner.forEach(d=>{r[d.path||""]=d.message}),P(r)}else T.error("Failed to submit the form. Please try again.")}};if(c)return e.jsxs("div",{className:"fixed inset-0 grid overflow-auto items-center justify-center z-50 p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black opacity-50",onClick:m}),e.jsxs("div",{className:"bg-white p-5 rounded-lg shadow-lg max-w-lg smobile:min-w-[85%] z-10 relative",children:[e.jsx("button",{className:"btn btn-sm btn-icon btn-light btn-outline absolute top-0 right-0 mr-5 mt-5 lg:mr-5 shadow-default",onClick:m,children:e.jsx("i",{className:"ki-filled ki-cross"})}),e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Add New Address"}),e.jsxs("form",{onSubmit:t,children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"country",className:"block text-gray-700 font-semibold",children:"Address Type"}),e.jsxs("select",{className:"select select-lg text-sm",onChange:a=>A({...f,address_type:Number(a.target.value)}),children:[e.jsx("option",{value:"",selected:!0,disabled:!0,className:"badge-danger badge-outline",children:"Select Address Type"}),e.jsx("option",{value:"1",children:"Home"}),e.jsx("option",{value:"2",children:"Office"}),e.jsx("option",{value:"3",children:"Other"})]}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:o.address_type||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"building_number",className:"block text-gray-700 font-semibold",children:"Building Number"}),e.jsx("input",{type:"text",id:"building_number",name:"building_number",value:f.building_number,onChange:a=>A({...f,building_number:a.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:o.building_number||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"area",className:"block text-gray-700 font-semibold",children:"Area"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"relative",children:e.jsx(Le,{value:f.area,onChange:b,onSelect:C,children:({getInputProps:a,suggestions:p,getSuggestionItemProps:r,loading:d})=>e.jsxs(e.Fragment,{children:[e.jsx("input",{...a({className:"w-full input border border-gray-300 rounded-md p-2",id:"area",type:"text",onFocus:()=>N(!0),onBlur:()=>N(!1)})}),G&&p.length>0&&e.jsx("div",{className:"absolute bg-white border z-10 border-gray-200 rounded-lg w-full text-sm max-h-[150px] overflow-y-auto",children:e.jsxs("ul",{className:"custom-ul",children:[d&&e.jsx("li",{className:"block px-4 py-[0.8rem] hover:bg-gray-100 w-full",children:"Loading..."}),!d&&p.map((w,O)=>{const{...U}=r(w);return e.jsx("li",{...U,className:"block px-2 py-[0.8rem] hover:bg-gray-100 w-full cursor-pointer font-style",children:w==null?void 0:w.description},O)})]})})]})})}),o.area&&e.jsx("p",{className:"w-full text-red-500 text-sm",children:o.area||" "})||S&&e.jsx("p",{className:"aam-error-label",children:"please select valid area from dropdown"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"landmark",className:"block text-gray-700 font-semibold",children:"Landmark"}),e.jsx("input",{type:"text",id:"landmark",name:"landmark",value:f.landmark,onChange:a=>A({...f,landmark:a.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:o.landmark||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"pincode",className:"block text-gray-700 font-semibold",children:"Pin code"}),e.jsx("input",{type:"text",id:"pincode",name:"pincode",value:f.pincode,onChange:a=>A({...f,pincode:a.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:o.pincode||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"city",className:"block text-gray-700 font-semibold",children:"City"}),e.jsx("input",{type:"text",id:"city",name:"city",value:f.city,onChange:a=>A({...f,city:a.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:o.city||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"state",className:"block text-gray-700 font-semibold",children:"State"}),e.jsx("input",{type:"text",id:"state",name:"state",value:f.state,onChange:a=>A({...f,state:a.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:o.state||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"country",className:"block text-gray-700 font-semibold",children:"Country"}),e.jsx("input",{type:"text",id:"country",name:"country",value:f.country,onChange:a=>A({...f,country:a.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:o.country||" "})]})]}),e.jsxs("div",{className:"flex justify-end mt-6",children:[e.jsx("button",{type:"button",onClick:m,className:"btn btn-light mr-2",disabled:u,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:u,className:`btn btn-primary ${u?"opacity-50 cursor-not-allowed":""}`,children:u?"Submitting...":"Submit"})]})]})]})]})},Rt=({isOpen:c,onClose:m,setIsSubmit:v,onCustomerCreated:y})=>{const{addUser:h,loading:l}=jt(),{addAddress:_,loading:u}=qe(),[o,P]=j.useState({first_name:"",last_name:"",email:"",mobile_number:"",gender:null,role_id:5}),[S,F]=j.useState({building_number:"",area:"",landmark:"",pincode:"",city:"",state:"",country:"",user_id:null,full_name:"",address_type:null}),[f,A]=j.useState({}),[G,N]=j.useState(!1),[b,C]=j.useState(!1);j.useEffect(()=>{c||(P({first_name:"",last_name:"",email:"",mobile_number:"",gender:null,role_id:5}),F({building_number:"",area:"",landmark:"",pincode:"",city:"",state:"",country:"",user_id:null,full_name:"",address_type:null}),A({}))},[c]);const t=r=>{F({...S,area:r}),C(!0)},a=async r=>{F({...S,area:r});try{const d=await ie.geocodeByAddress(r),w=await ie.getLatLng(d[0]);w&&F(O=>({...O,lat:w==null?void 0:w.lat,long:w==null?void 0:w.lng}))}catch{T.error("Failed to fetch address detail",{className:"toast-error"})}},p=async r=>{r.preventDefault();try{await Nt().validate(o,{abortEarly:!1}),await $e.validate(S,{abortEarly:!1});const d=await h(o);if(d!=null&&d.user_id){const w={...S,user_id:d.user_id,full_name:`${d.first_name} ${d.last_name}`},O=await _(w,!1);O&&(y(d,O),m(),v(!0))}}catch(d){if(d instanceof we){const w={};d.inner.forEach(O=>{w[O.path||""]=O.message}),A(w)}else T.error("Failed to submit the form. Please try again.")}};return c?e.jsxs("div",{className:"fixed inset-0 grid overflow-auto items-center justify-center z-50 p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black opacity-50",onClick:m}),e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg max-w-5xl w-full smobile:min-w-[85%] z-10 relative",children:[e.jsx("button",{className:"btn btn-sm btn-icon btn-light btn-outline absolute top-0 right-0 mr-5 mt-5 lg:mr-5 shadow-default",onClick:m,children:e.jsx("i",{className:"ki-filled ki-cross"})}),e.jsxs("form",{children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Customer Info"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-1",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"first_name",className:"block text-gray-700 font-semibold",children:"First name"}),e.jsx("input",{type:"text",id:"first_name",name:"first_name",value:o.first_name||"",onChange:r=>P({...o,first_name:r.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"text-red-500 text-sm",children:f.first_name||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"last_name",className:"block text-gray-700 font-semibold",children:"Last name"}),e.jsx("input",{type:"text",id:"last_name",name:"last_name",value:o.last_name,onChange:r=>P({...o,last_name:r.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"text-red-500 text-sm",children:f.last_name||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-gray-700 font-semibold",children:"Email"}),e.jsx("input",{type:"text",id:"email",name:"email",value:o.email,onChange:r=>P({...o,email:r.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"text-red-500 text-sm",children:f.email||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"mobile_number",className:"block text-gray-700 font-semibold",children:"Mobile Number"}),e.jsx("input",{type:"text",id:"mobile_number",name:"mobile_number",value:o.mobile_number,onChange:r=>P({...o,mobile_number:r.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"text-red-500 text-sm",children:f.mobile_number||" "})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"mb-2 block text-gray-700 font-semibold",children:"Gender"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:"gender",value:1,checked:o.gender===1,onChange:r=>P({...o,gender:parseInt(r.target.value)}),className:"radio radio-primary"}),e.jsx("span",{className:"text-sm",children:"Male"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:"gender",value:2,checked:o.gender===2,onChange:r=>P({...o,gender:parseInt(r.target.value)}),className:"radio radio-primary"}),e.jsx("span",{className:"text-sm",children:"Female"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:"gender",value:3,checked:o.gender===3,onChange:r=>P({...o,gender:parseInt(r.target.value)}),className:"radio radio-primary"}),e.jsx("span",{className:"text-sm",children:"Other"})]})]}),e.jsx("p",{className:"text-red-500 text-sm",children:f.gender||" "})]})]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Address"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-1",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"country",className:"block text-gray-700 font-semibold",children:"Address Type"}),e.jsxs("select",{className:"select select-lg text-sm w-full p-2 border border-gray-300 rounded-md",onChange:r=>F({...S,address_type:Number(r.target.value)}),children:[e.jsx("option",{value:"",selected:!0,disabled:!0,className:"badge-danger badge-outline",children:"Select Address Type"}),e.jsx("option",{value:"1",children:"Home"}),e.jsx("option",{value:"2",children:"Office"}),e.jsx("option",{value:"3",children:"Other"})]}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:f.address_type||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"building_number",className:"block text-gray-700 font-semibold",children:"Building Number"}),e.jsx("input",{type:"text",id:"building_number",name:"building_number",value:S.building_number,onChange:r=>F({...S,building_number:r.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:f.building_number||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"area",className:"block text-gray-700 font-semibold",children:"Area"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"relative",children:e.jsx(Le,{value:S.area,onChange:t,onSelect:a,children:({getInputProps:r,suggestions:d,getSuggestionItemProps:w,loading:O})=>e.jsxs(e.Fragment,{children:[e.jsx("input",{...r({className:"w-full input border border-gray-300 rounded-md p-2",id:"area",type:"text",onFocus:()=>C(!0),onBlur:()=>C(!1)})}),b&&d.length>0&&e.jsx("div",{className:"absolute bg-white border z-10 border-gray-200 rounded-lg w-full text-sm max-h-[150px] overflow-y-auto",children:e.jsxs("ul",{className:"custom-ul",children:[O&&e.jsx("li",{className:"block px-4 py-[0.8rem] hover:bg-gray-100 w-full",children:"Loading..."}),!O&&d.map((U,H)=>{const{...k}=w(U);return e.jsx("li",{...k,className:"block px-2 py-[0.8rem] hover:bg-gray-100 w-full cursor-pointer font-style",children:U==null?void 0:U.description},H)})]})})]})})}),f.area&&e.jsx("p",{className:"w-full text-red-500 text-sm",children:f.area||" "})||G&&e.jsx("p",{className:"aam-error-label",children:"please select valid area from dropdown"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"landmark",className:"block text-gray-700 font-semibold",children:"Landmark"}),e.jsx("input",{type:"text",id:"landmark",name:"landmark",value:S.landmark,onChange:r=>F({...S,landmark:r.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:f.landmark||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"pincode",className:"block text-gray-700 font-semibold",children:"Pin code"}),e.jsx("input",{type:"text",id:"pincode",name:"pincode",value:S.pincode,onChange:r=>F({...S,pincode:r.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:f.pincode||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"city",className:"block text-gray-700 font-semibold",children:"City"}),e.jsx("input",{type:"text",id:"city",name:"city",value:S.city,onChange:r=>F({...S,city:r.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:f.city||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"state",className:"block text-gray-700 font-semibold",children:"State"}),e.jsx("input",{type:"text",id:"state",name:"state",value:S.state,onChange:r=>F({...S,state:r.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:f.state||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"country",className:"block text-gray-700 font-semibold",children:"Country"}),e.jsx("input",{type:"text",id:"country",name:"country",value:S.country,onChange:r=>F({...S,country:r.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:f.country||" "})]})]})]})]}),e.jsxs("div",{className:"flex justify-end mt-6",children:[e.jsx("button",{type:"button",onClick:m,className:"btn btn-light mr-2",disabled:l||u,children:"Cancel"}),e.jsx("button",{type:"button",onClick:p,disabled:l||u,className:`btn btn-primary ${l||u?"opacity-50 cursor-not-allowed":""}`,children:l||u?"Submitting...":"Submit"})]})]})]})]}):null},Qt=()=>{const{prices:c}=xt(),{categories:m}=bt(),{fetchProductsOnId:v}=it(),{fetchServicesOnId:y}=dt(),[h,l]=j.useState(""),[_,u]=j.useState(!0),{id:o}=ct(),{updateOrder:P,loading:S}=Ot(),{addOrder:F,loading:f}=It(),A=Number(o),G=1e3,N=1,[b,C]=j.useState(!1),[t,a]=j.useState(!1),[p,r]=j.useState(!1),{users:d,fetchUsersByRole:w}=_t(),{validCoupons:O,fetchValidCoupons:U}=Ct(),{branches:H}=yt(N,G),{order:k,fetchOrder:M}=vt(),{address:K,fetchAddress:Q}=Dt(),{applyCoupon:de}=kt(),{userData:W,fetchUser:le}=wt(),{transactionId:X,generatePaymentLink:ye}=ut(),Y=W==null?void 0:W.user,R=mt(),[te,ce]=j.useState({}),[ue,ve]=j.useState({}),se=j.useRef(null),D=pt(),[n,E]=j.useState({coupon_code:"",coupon_discount:null,express_delivery_charges:null,normal_delivery_charges:null,payment_type:null,payment_status:null,sub_total:0,paid_amount:null,transaction_id:"",address_id:null,username:"",user_id:null,items:[{category_id:null,product_id:null,service_id:null,product_name:"",service_name:"",description:null,price:null,quantity:1,item_Total:null,showDescription:!1}],total:0,branch_id:null,order_status:null}),[me,Ue]=j.useState({coupon_code:"",coupon_discount:null,express_delivery_charges:null,normal_delivery_charges:null,payment_type:null,payment_status:null,sub_total:0,paid_amount:null,transaction_id:"",address_id:null,username:"",user_id:null,items:[{category_id:null,product_id:null,service_id:null,product_name:"",service_name:"",description:null,price:null,quantity:1,item_Total:null,showDescription:!1}],total:0,branch_id:null,order_status:null}),[L,Me]=j.useState({});j.useEffect(()=>{const s=i=>{se.current&&!se.current.contains(i.target)&&u(!1)};return document.addEventListener("mousedown",s),()=>{document.removeEventListener("mousedown",s)}},[]),j.useEffect(()=>{(async()=>{await M(A)})()},[A]),j.useEffect(()=>{(async()=>{n.user_id&&(await Q(n.user_id),await U(n.user_id),await le(n.user_id)),p&&(await Q(n.user_id),r(!1))})()},[n.user_id,p]),j.useEffect(()=>{X&&E({...n,transaction_id:X})},[X]),j.useEffect(()=>{A||E(s=>({...s,payment_status:n.payment_type===1?1:null}))},[n.payment_type]),j.useEffect(()=>{(async()=>{h&&_&&await w(5,h)})()},[h,_]),j.useEffect(()=>{if(k){const s=`${k.user.first_name} ${k.user.last_name}`;l(s),u(!1);const i={coupon_code:k.coupon_code||"",coupon_discount:k.coupon_discount||null,express_delivery_charges:k.express_delivery_charges||null,normal_delivery_charges:k.normal_delivery_charges||null,payment_type:k.payment_type||null,payment_status:k.payment_status||null,sub_total:k.sub_total||0,paid_amount:k.paid_amount||null,transaction_id:k.transaction_id||"",address_id:k.address_id,username:s,user_id:k.user_id||null,items:k.items.map(g=>{var pe,re,ge,q;const I=g.category.category_id,x=((pe=g.product)==null?void 0:pe.product_id)||null,V=((re=g.service)==null?void 0:re.service_id)||null,ae=((ge=g.product)==null?void 0:ge.name)||"",$=((q=g.service)==null?void 0:q.name)||"";return{category_id:I,product_id:x,service_id:V,product_name:ae,service_name:$,description:g.description||null,price:g.price,quantity:g.quantity,item_Total:g.price*g.quantity,showDescription:!!g.description}}),total:(k.sub_total||0)+(k.express_delivery_charges||0)+(k.normal_delivery_charges||0),branch_id:k.branch_id,order_status:k.order_status};E(i),Ue(i)}},[k]);const Re=async s=>{var i,g;s.preventDefault();try{const I=n.items.map($=>({category_id:Number($.category_id),product_id:Number($.product_id),service_id:Number($.service_id),description:$.description,price:Number($.price),quantity:Number($.quantity)})),x={...n,address_id:Number(n.address_id),coupon_discount:Number(n.coupon_discount),normal_delivery_charges:Number(n.normal_delivery_charges),paid_amount:Number(n.paid_amount),express_delivery_charges:Number(n.express_delivery_charges),payment_type:Number(n.payment_type),payment_status:Number(n.payment_status),order_status:4,items:I};if(await Tt.validate(x,{abortEarly:!1}),!Object.keys(n).some($=>n[$]!==me[$])){D(`${(i=R==null?void 0:R.state)==null?void 0:i.prevUrl}`);return}let ae;k?ae=await P(A,x):ae=await F(x),ae&&D(`${(g=R==null?void 0:R.state)==null?void 0:g.prevUrl}`)}catch(I){if(I instanceof we){const x={};I.inner.forEach(V=>{x[V.path||""]=V.message}),Me(x)}else T.error("Failed to submit the form. Please try again.")}},Be=s=>{l(s.target.value),u(!0)},Ge=s=>{const i=`${s.first_name} ${s.last_name}`;l(i),u(!1),E({...n,username:i,user_id:s.user_id})},Ke=()=>{var s;D(`${(s=R==null?void 0:R.state)==null?void 0:s.prevUrl}`)},Ve=()=>{E(s=>({...s,items:[...s.items,{category_id:null,product_id:null,product_name:"",service_id:null,service_name:"",description:null,price:null,quantity:1,item_Total:null,showDescription:!1}]}))},ze=s=>{E(i=>{const g=i.items.filter((ae,$)=>$!==s),I={...i,items:g,coupon_code:"",coupon_discount:0},x=_e(I),V=x+Number(n.express_delivery_charges||0)+Number(n.normal_delivery_charges||0);return{...I,sub_total:x,total:V}})},Z=async(s,i,g)=>{["category_id","product_id","service_id","price","quantity"].includes(i)&&E(I=>({...I,coupon_code:"",coupon_discount:0})),E(I=>{const x=I.items.map((re,ge)=>{if(ge===s){const q={...re,[i]:g};i==="showDescription"&&(q.showDescription=g);const ke=Number(q.category_id),Ce=Number(q.product_id),Ae=Number(q.service_id),Pe=Number(q.quantity)||1;if(i==="category_id"){const J=Number(g);te[J]||v(J).then(he=>{ce(fe=>({...fe,[J]:he}))}),q.product_id=null,q.service_id=null}if(i==="product_id"){const J=Number(re.category_id),he=Number(g),fe=`${J}_${he}`;ue[fe]||y(J,he).then(st=>{ve(at=>({...at,[fe]:st}))}),q.service_id=null}if(["category_id","product_id","service_id"].includes(i))if(ke&&Ce&&Ae){const J=He(ke,Ce,Ae);q.price=J,q.item_Total=J*Pe}else q.price=null,q.item_Total=null;else i==="price"?q.item_Total=g*Pe:i==="quantity"&&(q.item_Total=q.price*Number(g));return q}return re}),V={...I,items:x},$=_e(V)-I.coupon_discount,pe=$+Number(I.express_delivery_charges||0)+Number(I.normal_delivery_charges||0);return{...V,sub_total:$,total:pe}})},He=(s,i,g)=>{const I=`${s}_${i}_${g}`;return c[I]||0},We=async s=>{const i=_e(n),g=await de(n.user_id,i,s),I=Number(g.finalTotal||0)+Number(n.express_delivery_charges||0)+Number(n.normal_delivery_charges||0);g&&E(x=>({...x,coupon_code:s,coupon_discount:g.discountAmount,sub_total:g.finalTotal,total:I}))},_e=s=>s.items.reduce((i,g)=>i+(g.item_Total||0),0),Se=(s,i)=>{E(g=>{const I={...g,[s]:i},x=Number(I.sub_total||0)+Number(I.express_delivery_charges||0)+Number(I.normal_delivery_charges||0);return{...I,total:x}})},Je=s=>{const i=s.target.value;E(g=>({...g,address_id:Number(i)}))},Qe=s=>{s.preventDefault(),n.user_id?C(!0):T.error("Please select the user to add address")},Xe=s=>{s.preventDefault(),a(!0)},Ye=()=>{D(`/order/${A}`)},Ze=async()=>{const s=[];if(n.paid_amount||s.push("Paid amount"),n.username||s.push("Customer name"),s.length>0){T.error(`Please add Missing Fields: ${s.join(", ")}`);return}const i={amount:n.paid_amount,currency:"INR",user_id:n.user_id,customer:{name:n.username,mobile_number:Number(Y==null?void 0:Y.mobile_number),email:Y==null?void 0:Y.email}};await ye(i)},et=(s,i)=>{if(s){const g=`${s.first_name} ${s.last_name}`;l(g),u(!1),E({...n,username:g,user_id:s.user_id})}i&&E(g=>({...g,address_id:i.address_id}))},tt=s=>{s&&E(i=>({...i,address_id:s.address_id}))};return e.jsx("div",{className:"container-fixed",children:e.jsxs("div",{className:"card max-w-5xl mx-auto p-6 bg-white shadow-md",children:[e.jsxs("div",{className:"flex",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:k?"Edit Order":"Add Order"}),!isNaN(A)&&e.jsxs("button",{className:"btn bg-gray-200 ml-4 text-gray-700 text-sm font-bold rounded-md",onClick:Ye,children:[e.jsx(gt,{size:20}),"View Order"]})]}),e.jsxs("form",{onSubmit:Re,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-y-1 gap-x-6 mt-4",children:[e.jsxs("div",{className:"relative col-span-1",children:[e.jsxs("span",{className:"flex justify-between items-center",children:[e.jsx("label",{htmlFor:"username",className:"block text-gray-700 text-sm font-bold mb-2",children:"Customer name"}),e.jsx("button",{className:"btn btn-sm btn-primary -mt-6 sm:btn-lg",onClick:Xe,children:"Add Customer"})]}),e.jsx("input",{type:"text",id:"username",autoComplete:"off",value:h||"",onChange:Be,className:"input border border-gray-300 rounded-md p-2 w-full mb-2",placeholder:"Search customer..."}),d&&h&&_&&e.jsx("ul",{ref:se,className:"absolute -mt-2 bg-white border z-10 border-gray-300 rounded-md p-2 w-full text-sm max-h-[400px] overflow-y-auto",children:d.length>0?d.map(s=>e.jsxs("li",{className:"p-2 hover:bg-gray-100 cursor-pointer",onClick:()=>Ge(s),children:[s.first_name," ",s.last_name," (",s.mobile_number,")"]},s.user_id)):e.jsx("li",{className:"p-2 text-gray-500",children:"No users found"})}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:L.username||" "})]}),e.jsxs("div",{className:"relative col-span-1",children:[e.jsxs("span",{className:"flex justify-between items-center",children:[e.jsx("label",{htmlFor:"address",className:"block text-gray-700 text-sm font-bold mb-2",children:"Customer address"}),e.jsx("button",{className:"btn btn-sm btn-primary -mt-6",onClick:Qe,children:"Add address"})]}),e.jsxs("select",{id:"address",value:n.address_id,onChange:Je,className:"select border border-gray-300 rounded-md w-full text-sm",children:[e.jsx("option",{value:"",selected:!0,disabled:!0,children:"Select Address"}),K.length>0?K.map(s=>e.jsxs("option",{value:s.address_id,children:[s.building_number,", ",s.area,", ",s.landmark,","," ",s.city,", ",s.state,",",s.country,", ",s.pincode]},s.address_id)):e.jsx("option",{disabled:!0,children:"No Address Available"})]}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:L.address_id||" "})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{htmlFor:"branch",className:"block text-gray-700 text-sm font-bold mb-2",children:"Branch"}),e.jsxs("select",{id:"branch",className:"select border border-gray-300 rounded-md p-2 w-full text-sm",value:n.branch_id||"",onChange:s=>E({...n,branch_id:s.target.value?Number(s.target.value):null}),children:[e.jsx("option",{value:"",disabled:!0,children:"Select Branch"}),H.length>0?H.map(s=>e.jsx("option",{value:s.branch_id,children:s.branch_name},s.branch_id)):e.jsx("option",{children:"No Data Available"})]}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:L.branch_id||" "})]})]}),e.jsx("div",{className:"flex flex-wrap",children:e.jsx("h1",{className:"text-xl font-semibold leading-none text-gray-900 mt-6 mb-5 ml-1",children:"Item"})}),n.items.map((s,i)=>{var g,I;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"border border-gray-200 rounded-xl mt-4 p-4",children:[e.jsx("div",{children:e.jsxs("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(150px,4fr))] gap-x-5 gap-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"category",className:"block text-gray-700 text-sm font-bold mb-2",children:"Category"}),e.jsxs("select",{id:"category",value:s.category_id??"",onChange:x=>Z(i,"category_id",x.target.value),className:"select border border-gray-300 rounded-md p-2 w-full text-sm",children:[e.jsx("option",{value:"",disabled:!0,children:"Select Category"}),m.map(x=>e.jsx("option",{value:x.category_id,children:x.name},x.category_id))]}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:L[`items[${i}].category_id`]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"product",className:"block text-gray-700 text-sm font-bold mb-2",children:"Product"}),e.jsxs("select",{id:"product",value:s.product_id??"",onChange:x=>Z(i,"product_id",x.target.value),className:"select border border-gray-300 rounded-md p-2 w-full text-sm",children:[e.jsx("option",{value:"",disabled:!0,children:"Select Product"}),((g=te[s.category_id])==null?void 0:g.map(x=>e.jsx("option",{value:x.product_product_id,children:x.product_name},x.product_product_id)))||s.product_id&&e.jsx("option",{value:s.product_id,children:s.product_name},s.product_id)]}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:L[`items[${i}].product_id`]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"service",className:"block text-gray-700 text-sm font-bold mb-2",children:"Service"}),e.jsxs("select",{id:"service",value:s.service_id??"",onChange:x=>Z(i,"service_id",x.target.value),className:"select border border-gray-300 rounded-md p-2 w-full text-sm",children:[e.jsx("option",{value:"",disabled:!0,children:"Select Service"}),(I=ue[`${s.category_id}_${s.product_id}`])==null?void 0:I.map(x=>e.jsx("option",{value:x.service_service_id,children:x.service_name},x.service_service_id))]}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:L[`items[${i}].service_id`]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Price"}),e.jsx("input",{type:"text",value:s.price||"",onChange:x=>Z(i,"price",x.target.value),className:`input border rounded-md p-2 w-full ${isNaN(A)?"border-gray-300 bg-gray-100 text-sm text-gray-600 cursor-not-allowed focus:outline-none":"border-gray-300"}`,readOnly:isNaN(A)}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:L[`items[${i}].price`]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Quantity"}),e.jsx("input",{type:"text",value:s.quantity??1,onChange:x=>Z(i,"quantity",x.target.value),className:"input border border-gray-300 rounded-md p-2 w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Item total"}),e.jsx("input",{type:"text",value:s.item_Total??"",onChange:x=>Z(i,"item_Total",x.target.value),min:"0",step:"0.01",readOnly:!0,className:"input w-full border border-gray-300 bg-gray-100 text-sm text-gray-600 rounded-md p-2 cursor-not-allowed focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description_checkbox",className:"block text-gray-700 text-sm font-bold mb-2",children:"Description"}),e.jsx("input",{className:"checkbox checkbox-lg mt-2 ml-5",id:"description_checkbox","data-datatable-check":"true",type:"checkbox",checked:s.showDescription,onChange:x=>Z(i,"showDescription",x.target.checked)}),e.jsx("p",{className:" text-red-500 text-sm",children:" "})]})]})},i),e.jsxs("div",{className:"flex justify-between sm:items-center smmobile:flex-col gap-y-2 smmobile:w-full",children:[e.jsx("div",{children:s.showDescription&&e.jsx("div",{children:e.jsxs("div",{className:"flex smmobile:w-[100%] smmobile:justify-self-start flex-col md:w-[350px] lg:w-[420px] sm:w-[300px] h-[80px] mb-2",children:[e.jsx("label",{htmlFor:"description",className:"block text-gray-700 text-sm font-bold mb-2",children:"Description"}),e.jsx("textarea",{id:"description",value:s.description||"",onChange:x=>Z(i,"description",x.target.value),className:"h-full input border border-gray-300 rounded-md p-2 w-full"})]})})}),e.jsx("div",{className:"flex block-element flex-end smmobile:justify-self-end justify-end relative",children:e.jsx("div",{children:e.jsx("button",{type:"button",className:`p-2 rounded-full ${n.items.length>1?"bg-red-100 hover:bg-red-200":"bg-gray-200 cursor-not-allowed"}`,onClick:()=>ze(i),disabled:n.items.length===1,children:e.jsx(ht,{className:`${n.items.length>1?"text-red-500":"text-gray-400"}`})})})})]})]})})}),e.jsx("button",{type:"button",onClick:Ve,className:"btn btn-secondary mb-6 mt-4",children:"Add Item"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Coupon Code"}),e.jsxs("select",{id:"coupon_code",className:"select border border-gray-300 rounded-md p-2 w-full text-sm",value:n.coupon_code??"",onChange:s=>{const i=O.find(g=>g.code===s.target.value);We(i==null?void 0:i.code)},children:[e.jsx("option",{value:"",disabled:!0,children:"Select Coupon Code"}),O&&O.length>0?O.map(s=>e.jsx("option",{value:s.code,children:s.code},s.coupon_id)):e.jsx("option",{children:"No Coupons available"})]}),e.jsx("p",{className:"text-red-500 text-sm",children:L.coupon_code||" "})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Coupon Discount"}),e.jsx("input",{type:"text",value:n.coupon_discount||"",readOnly:!0,className:"input border border-gray-300 bg-gray-100 text-sm text-gray-600 rounded-md p-2 cursor-not-allowed focus:outline-none"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:L.coupon_discount||" "})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"express_delivery_charges",className:"block text-gray-700 text-sm font-bold mb-2",children:"Express Delivery Charge"}),e.jsx("input",{type:"text",id:"express_delivery_charges",min:"0",value:n.express_delivery_charges||"",onChange:s=>Se("express_delivery_charges",s.target.value),className:`${n.normal_delivery_charges>0?"input border border-gray-300 rounded-md p-2 bg-gray-100 cursor-not-allowed focus:outline-none":"input border border-gray-300 rounded-md p-2"}`,readOnly:n.normal_delivery_charges>0}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:L.express_delivery_charges||" "})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"normal_delivery_charges",className:"block text-gray-700 text-sm font-bold mb-2",children:"Normal Delivery Charge"}),e.jsx("input",{type:"text",id:"normal_delivery_charges",min:"0",value:n.normal_delivery_charges||"",onChange:s=>Se("normal_delivery_charges",s.target.value),className:`${n.express_delivery_charges>0?"input border border-gray-300 rounded-md p-2 bg-gray-100 cursor-not-allowed focus:outline-none":"input border border-gray-300 rounded-md p-2"}`,readOnly:n.express_delivery_charges>0}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:L.normal_delivery_charges||" "})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Sub Total"}),e.jsx("input",{type:"text",value:n.sub_total||"",readOnly:!0,className:"input border border-gray-300 bg-gray-100 text-sm text-gray-600 rounded-md p-2 cursor-not-allowed focus:outline-none"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:L.sub_total||" "})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Total"}),e.jsx("input",{type:"text",value:n.total||"",readOnly:!0,className:"input border border-gray-300 bg-gray-100 text-sm text-gray-600 rounded-md p-2 cursor-not-allowed focus:outline-none"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"paid_amount",className:"block text-gray-700 text-sm font-bold mb-2",children:"Paid amount"}),e.jsx("input",{type:"text",id:"paid_amount",value:n.paid_amount||"",onChange:s=>{E({...n,paid_amount:Number(s.target.value)})},className:"input border border-gray-300 rounded-md p-2",min:"0",step:"0.01"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:L.paid_amount||" "})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"payment_method",className:"block text-gray-700 text-sm font-bold mb-2",children:"Payment Method"}),e.jsxs("select",{className:"select border border-gray-300 rounded-md p-2 w-full text-sm",id:"payment_method",value:n.payment_type??"",onChange:s=>E({...n,payment_type:Number(s.target.value)}),children:[e.jsx("option",{value:"",disabled:!0,children:"Select Payment Type"}),e.jsx("option",{value:1,children:"Cash on Delivery"}),e.jsx("option",{value:2,children:"Online Payment"})]}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:L.payment_type||" "}),!A&&n.payment_type===2&&e.jsx("div",{children:e.jsxs("button",{type:"button",className:"-mt-2 badge text-sm badge-info badge-outline",onClick:Ze,children:[e.jsx(ft,{color:"blue"}),"  "," Send Payment Link"]})})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"payment_status",className:"block text-gray-700 text-sm font-bold mb-2",children:"Payment Status"}),e.jsxs("select",{className:"select border border-gray-300 rounded-md p-2 w-full text-sm",id:"payment_status",value:n.payment_status??"",onChange:s=>E({...n,payment_status:Number(s.target.value)}),children:[e.jsx("option",{value:"",disabled:!0,children:"Select Payment Status"}),e.jsx("option",{value:1,children:"Pending"}),e.jsx("option",{value:2,children:"Received"}),e.jsx("option",{value:3,children:"Partial Received"})]}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:L.payment_status||" "})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"transaction_id",className:"block text-gray-700 text-sm font-bold mb-2",children:"Transaction ID"}),e.jsx("input",{type:"text",id:"transaction_id",value:X||"",className:"input border border-gray-300 bg-gray-100 text-sm text-gray-600 rounded-md p-2 cursor-not-allowed focus:outline-none",readOnly:!0})]})]}),e.jsxs("div",{className:"mt-6 flex gap-4",children:[e.jsx("button",{type:"submit",className:`btn btn-primary ${f||S?"opacity-50 cursor-not-allowed":""}`,disabled:f||S,children:f||S?f?"Adding...":"Updating...":A?"Update Order":"Add Order"}),e.jsx("button",{type:"button",onClick:Ke,className:"btn btn-secondary",disabled:f||S,children:"Cancel"})]})]}),e.jsx(Mt,{onAddressAdded:tt,isOpen:b,setIsSubmit:r,onClose:()=>C(!1),userId:n.user_id,fullname:n.username}),e.jsx(Rt,{onCustomerCreated:et,isOpen:t,setIsSubmit:r,onClose:()=>a(!1)})]})})};export{Qt as default};
