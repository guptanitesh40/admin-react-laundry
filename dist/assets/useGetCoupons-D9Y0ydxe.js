import{r as e,n as S}from"./index-DctR2NZY.js";const j="http://35.154.167.170:3000/admin/coupon",U=(a,s,r="",p,i,c,f)=>{const[g,C]=e.useState([]),[m,u]=e.useState(!1),[w,E]=e.useState(0),l=async()=>{var d,h;const T=localStorage.getItem("authToken"),o=new URLSearchParams;a&&o.append("page_number",a.toString()),s&&o.append("per_page",s.toString()),r&&o.append("search",r),p&&o.append("sort_by",p),i&&o.append("order",i),c&&o.append("discount_type",c.toString()),f&&f.forEach(t=>o.append("coupon_type",t.toString())),u(!0);try{const t=await fetch(`${j}?${o}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${T}`}});if(!t.ok){const $=await t.json();S.error($.message,{position:"top-center"});return}const n=await t.json(),k=((d=n==null?void 0:n.data)==null?void 0:d.result)||[],y=((h=n==null?void 0:n.data)==null?void 0:h.count)||0;C(k),E(y)}catch(t){S.error((t==null?void 0:t.message)||"Network error: Failed to fetch.",{position:"top-center"})}finally{u(!1)}};return e.useEffect(()=>{l()},[a,s,r,p,i,f,c]),{coupons:g,totalCoupons:w,loading:m,fetchCoupons:l}};export{U as u};
