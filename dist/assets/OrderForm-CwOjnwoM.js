import{r as g,B as _e,V as P,a as Be,d as re,o as z,I as Dt,J as Ie,K as Ft,M as Et,N as $t,j as e,b as Ge,p as qt,A as Lt,z as Mt,Q as Rt,H as Ut,g as Bt,l as Gt,L as Xe,x as Kt,S as zt,f as Vt,q as Ht,U as Yt,i as et}from"./index-DF9T0g0D.js";import{u as Jt}from"./useGetCategories-DzCuJxgE.js";import{u as Wt}from"./useGetPrice-Dgmx_6bG.js";import{u as Zt}from"./useGetCompanies-DMOA_PMp.js";import{u as Qt}from"./useGetOrder-DKq4-zXR.js";import{u as Xt,c as es}from"./userSchema-DeI1jic8.js";import{u as ts}from"./useGetuser-CoKGwVJn.js";const ss=()=>{const[i,u]=g.useState(!1);return{loading:i,fetchProductsOnId:async b=>{const v=localStorage.getItem("authToken");u(!0);try{const d=await fetch(`${_e}/category/${b}/product`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${v}`}}),h=await d.json();if(!d.ok){P.error(h.message,{position:"top-center"}),u(!1);return}return(h==null?void 0:h.data)||[]}catch(d){return P.error((d==null?void 0:d.message)||"Network error: Failed to fetch.",{position:"top-center"}),[]}finally{u(!1)}}}},as=()=>{const[i,u]=g.useState(!1);return{loading:i,fetchServicesOnId:async(b,v)=>{const d=localStorage.getItem("authToken");u(!0);try{const h=await fetch(`${_e}/category/${b}/product/${v}/service`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d}`}}),p=await h.json();if(!h.ok){P.error(p.message,{position:"top-center"}),u(!1);return}return(p==null?void 0:p.data)||[]}catch(h){return P.error((h==null?void 0:h.message)||"Network error: Failed to fetch.",{position:"top-center"}),[]}finally{u(!1)}}}},rs="http://35.154.167.170:3000/admin/coupon/apply",ns=()=>{const[i,u]=g.useState(!1);return{applyCoupon:async(b,v,d)=>{const h=localStorage.getItem("authToken");u(!0);try{const p=await fetch(rs,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${h}`},body:JSON.stringify({user_id:b,order_Total:v,coupon_code:d})}),c=await p.json();return p.ok?c.data:(P.error(c.message,{position:"top-center"}),!1)}catch{P.error("Unable to apply coupon code!")}finally{u(!1)}},loading:i}},os=()=>{const[i,u]=g.useState([]),[_,b]=g.useState(!1),v=async d=>{const h=localStorage.getItem("authToken");b(!0);try{const p=await fetch(`${_e}/admin/valid-coupons?${d}`,{method:"GET",headers:{Authorization:h?`Bearer ${h}`:""}}),c=await p.json();if(!p.ok){P.error(c.message,{position:"top-center"}),b(!1);return}u(c==null?void 0:c.data)}catch{P.error("Network error: Failed to fetch coupons.")}finally{b(!1)}};return g.useEffect(()=>{v()},[]),{validCoupons:i,fetchValidCoupons:v,loading:_}},ls="http://35.154.167.170:3000",is=`${ls}/admin/orders`,ds=()=>{const[i,u]=g.useState(!1);return{addOrder:async b=>{const v=localStorage.getItem("authToken");u(!0);try{const d=await fetch(is,{method:"POST",headers:{Authorization:`Bearer ${v}`,"Content-Type":"application/json"},body:JSON.stringify(b)});if(!d.ok){const p=await d.json();return P.error(p.message,{position:"top-center"}),!1}const h=await d.json();return P.success(h.message,{position:"top-center"}),!0}catch(d){return P.error((d==null?void 0:d.message)||"Network error: Failed to fetch.",{position:"top-center"}),!1}finally{u(!1)}},loading:i}},cs=()=>{const[i,u]=g.useState(!1);return{updateOrder:async(b,v)=>{const d=localStorage.getItem("authToken"),h=`http://35.154.167.170:3000/admin/orders/${b}`;u(!0);try{const p=await fetch(h,{method:"PUT",headers:{Authorization:`Bearer ${d}`,"Content-Type":"application/json"},body:JSON.stringify(v)});if(p.ok){const O=await p.json();return P.success(O.message,{position:"top-center"}),!0}const c=await p.json();return P.error(c.message,{position:"top-center"}),!1}catch(p){return P.error((p==null?void 0:p.message)||"Network error: Failed to fetch.",{position:"top-center"}),!1}finally{u(!1)}},loading:i}},us=()=>{const[i,u]=g.useState([]),[_,b]=g.useState(!1);return{address:i,loading:_,fetchAddress:async d=>{var c;const h=localStorage.getItem("authToken"),p=`http://35.154.167.170:3000/address/${d}/user`;try{const O=await fetch(p,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${h}`}});if(!O.ok){const N=await O.json();P.error(N.message,{position:"top-center"});return}const T=await O.json(),F=((c=T==null?void 0:T.data)==null?void 0:c.result)||[];u(F)}catch(O){P.error((O==null?void 0:O.message)||"Network error: Failed to fetch.",{position:"top-center"})}finally{b(!1)}}}},ms=Be().shape({category_id:z().nullable().required("Please select a category").test("required","Please select a category",i=>!!i),product_id:z().nullable().required("Please select a product").test("required","Please select a product",i=>!!i),service_id:z().nullable().required("Please select a service").test("required","Please select a service",i=>!!i),price:z().nullable().when(["category_id","product_id","service_id"],([i,u,_],b)=>i&&u&&_?b.required("Price is not available for the combination, please add a price"):b.nullable())}),ps=Be().shape({username:re().required("Please enter username"),address_id:z().required("Please select address").test("required","Please select address",i=>!!i),express_delivery_charges:z().typeError("Express delivery charges must be a number").min(0,"Express delivery charges must be a positive number"),shipping_charges:z().typeError("Shipping charge must be a number").min(0,"Shipping charge must be a positive number"),payment_type:z().required("Please choose payment type").test("required","Please choose payment type",i=>!!i),payment_status:z().required("Please choose payment status").test("required","Please choose payment status",i=>!!i),paid_amount:z().typeError("Paid amount must be a number").min(0,"Paid amount must be a positive number").test("max-paid","Paid amount cannot be greater than the total amount",function(i){var u;return i==null||i===0?!0:i<=((u=this.options.context)==null?void 0:u.total)}),branch_id:z().required("Please select branch").test("required","Please select branch",i=>!!i),items:Dt().of(ms),company_id:z().typeError("Company must be selected").required("Company is required"),gstin:re().transform(i=>i===""?null:i).nullable().matches(/^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/,"Please enter a valid GSTIN"),gst_company_name:re().when("gstin",{is:i=>!!i,then:i=>i.required("Company name is required when GSTIN is provided"),otherwise:i=>i.notRequired()})}),ot=()=>{const[i,u]=g.useState(!1);return{addAddress:async(b,v=!0)=>{var h;const d=localStorage.getItem("authToken");u(!0);try{const p=await fetch(`${_e}/address/admin`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d}`},body:JSON.stringify(b)}),c=await p.json();return p.ok?(v&&P.success(c.message,{position:"top-center"}),(h=c==null?void 0:c.data)==null?void 0:h.result):(v&&P.error(c.message,{position:"top-center"}),!1)}catch(p){return P.error((p==null?void 0:p.message)||"Error adding banner",{position:"top-center"}),!1}finally{u(!1)}},loading:i}},lt=Be().shape({pincode:re().optional().test("is-valid-pincode","Pincode must be exactly 6 digits",i=>!i||/^[0-9]{6}$/.test(i)),address_type:z().required("Address type is required"),building_number:re().required("House number is required"),area:re().required("Area is required"),city:re().required("City is required"),state:re().required("State is required"),country:re().required("Country is required")});var te={},Pe={},Ue,tt;function gs(){if(tt)return Ue;tt=1;var i="Expected a function",u=NaN,_="[object Symbol]",b=/^\s+|\s+$/g,v=/^[-+]0x[0-9a-f]+$/i,d=/^0b[01]+$/i,h=/^0o[0-7]+$/i,p=parseInt,c=typeof Ie=="object"&&Ie&&Ie.Object===Object&&Ie,O=typeof self=="object"&&self&&self.Object===Object&&self,T=c||O||Function("return this")(),F=Object.prototype,N=F.toString,q=Math.max,G=Math.min,A=function(){return T.Date.now()};function j(o,f,w){var $,M,ne,J,K,W,se=0,ge=!1,Q=!1,he=!0;if(typeof o!="function")throw new TypeError(i);f=y(f)||0,S(w)&&(ge=!!w.leading,Q="maxWait"in w,ne=Q?q(y(w.maxWait)||0,f):ne,he="trailing"in w?!!w.trailing:he);function V(L){var X=$,oe=M;return $=M=void 0,se=L,J=o.apply(oe,X),J}function ve(L){return se=L,K=setTimeout(ie,f),ge?V(L):J}function k(L){var X=L-W,oe=L-se,B=f-X;return Q?G(B,ne-oe):B}function je(L){var X=L-W,oe=L-se;return W===void 0||X>=f||X<0||Q&&oe>=ne}function ie(){var L=A();if(je(L))return Z(L);K=setTimeout(ie,k(L))}function Z(L){return K=void 0,he&&$?V(L):($=M=void 0,J)}function Ne(){K!==void 0&&clearTimeout(K),se=0,$=W=M=K=void 0}function Oe(){return K===void 0?J:Z(A())}function le(){var L=A(),X=je(L);if($=arguments,M=this,W=L,X){if(K===void 0)return ve(W);if(Q)return K=setTimeout(ie,f),V(W)}return K===void 0&&(K=setTimeout(ie,f)),J}return le.cancel=Ne,le.flush=Oe,le}function S(o){var f=typeof o;return!!o&&(f=="object"||f=="function")}function s(o){return!!o&&typeof o=="object"}function n(o){return typeof o=="symbol"||s(o)&&N.call(o)==_}function y(o){if(typeof o=="number")return o;if(n(o))return u;if(S(o)){var f=typeof o.valueOf=="function"?o.valueOf():o;o=S(f)?f+"":f}if(typeof o!="string")return o===0?o:+o;o=o.replace(b,"");var w=d.test(o);return w||h.test(o)?p(o.slice(2),w?2:8):v.test(o)?u:+o}return Ue=j,Ue}var be={},st;function hs(){return st||(st=1,Object.defineProperty(be,"__esModule",{value:!0}),be.compose=function(){for(var u=arguments.length,_=Array(u),b=0;b<u;b++)_[b]=arguments[b];return function(){for(var v=arguments.length,d=Array(v),h=0;h<v;h++)d[h]=arguments[h];_.forEach(function(p){return p&&p.apply(void 0,d)})}},be.pick=function(u){for(var _=arguments.length,b=Array(_>1?_-1:0),v=1;v<_;v++)b[v-1]=arguments[v];return b.reduce(function(d,h){return u&&u.hasOwnProperty(h)&&(d[h]=u[h]),d},{})}),be}var at;function fs(){if(at)return Pe;at=1,Object.defineProperty(Pe,"__esModule",{value:!0});var i=Object.assign||function(A){for(var j=1;j<arguments.length;j++){var S=arguments[j];for(var s in S)Object.prototype.hasOwnProperty.call(S,s)&&(A[s]=S[s])}return A},u=function(){function A(j,S){for(var s=0;s<S.length;s++){var n=S[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(j,n.key,n)}}return function(j,S,s){return S&&A(j.prototype,S),s&&A(j,s),j}}(),_=Ft(),b=O(_),v=Et(),d=O(v),h=gs(),p=O(h),c=hs();function O(A){return A&&A.__esModule?A:{default:A}}function T(A,j){if(!(A instanceof j))throw new TypeError("Cannot call a class as a function")}function F(A,j){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j&&(typeof j=="object"||typeof j=="function")?j:A}function N(A,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof j);A.prototype=Object.create(j&&j.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(A,j):A.__proto__=j)}var q=function(j){return{mainText:j.main_text,secondaryText:j.secondary_text}},G=function(A){N(j,A);function j(S){T(this,j);var s=F(this,(j.__proto__||Object.getPrototypeOf(j)).call(this,S));return s.init=function(){if(!window.google)throw new Error("[react-places-autocomplete]: Google Maps JavaScript API library must be loaded. See: https://github.com/kenny-hibino/react-places-autocomplete#load-google-library");if(!window.google.maps.places)throw new Error("[react-places-autocomplete]: Google Maps Places library must be loaded. Please add `libraries=places` to the src URL. See: https://github.com/kenny-hibino/react-places-autocomplete#load-google-library");s.autocompleteService=new window.google.maps.places.AutocompleteService,s.autocompleteOK=window.google.maps.places.PlacesServiceStatus.OK,s.setState(function(n){return n.ready?null:{ready:!0}})},s.autocompleteCallback=function(n,y){if(s.setState({loading:!1}),y!==s.autocompleteOK){s.props.onError(y,s.clearSuggestions);return}var o=s.props.highlightFirstSuggestion;s.setState({suggestions:n.map(function(f,w){return{id:f.id,description:f.description,placeId:f.place_id,active:!!(o&&w===0),index:w,formattedSuggestion:q(f.structured_formatting),matchedSubstrings:f.matched_substrings,terms:f.terms,types:f.types}})})},s.fetchPredictions=function(){var n=s.props.value;n.length&&(s.setState({loading:!0}),s.autocompleteService.getPlacePredictions(i({},s.props.searchOptions,{input:n}),s.autocompleteCallback))},s.clearSuggestions=function(){s.setState({suggestions:[]})},s.clearActive=function(){s.setState({suggestions:s.state.suggestions.map(function(n){return i({},n,{active:!1})})})},s.handleSelect=function(n,y,o){s.clearSuggestions(),s.props.onSelect?s.props.onSelect(n,y,o):s.props.onChange(n)},s.getActiveSuggestion=function(){return s.state.suggestions.find(function(n){return n.active})},s.selectActiveAtIndex=function(n){var y=s.state.suggestions.find(function(o){return o.index===n}).description;s.setActiveAtIndex(n),s.props.onChange(y)},s.selectUserInputValue=function(){s.clearActive(),s.props.onChange(s.state.userInputValue)},s.handleEnterKey=function(){var n=s.getActiveSuggestion();n===void 0?s.handleSelect(s.props.value,null,null):s.handleSelect(n.description,n.placeId,n)},s.handleDownKey=function(){if(s.state.suggestions.length!==0){var n=s.getActiveSuggestion();n===void 0?s.selectActiveAtIndex(0):n.index===s.state.suggestions.length-1?s.selectUserInputValue():s.selectActiveAtIndex(n.index+1)}},s.handleUpKey=function(){if(s.state.suggestions.length!==0){var n=s.getActiveSuggestion();n===void 0?s.selectActiveAtIndex(s.state.suggestions.length-1):n.index===0?s.selectUserInputValue():s.selectActiveAtIndex(n.index-1)}},s.handleInputKeyDown=function(n){switch(n.key){case"Enter":n.preventDefault(),s.handleEnterKey();break;case"ArrowDown":n.preventDefault(),s.handleDownKey();break;case"ArrowUp":n.preventDefault(),s.handleUpKey();break;case"Escape":s.clearSuggestions();break}},s.setActiveAtIndex=function(n){s.setState({suggestions:s.state.suggestions.map(function(y,o){return o===n?i({},y,{active:!0}):i({},y,{active:!1})})})},s.handleInputChange=function(n){var y=n.target.value;if(s.props.onChange(y),s.setState({userInputValue:y}),!y){s.clearSuggestions();return}s.props.shouldFetchSuggestions&&s.debouncedFetchPredictions()},s.handleInputOnBlur=function(){s.mousedownOnSuggestion||s.clearSuggestions()},s.getActiveSuggestionId=function(){var n=s.getActiveSuggestion();return n?"PlacesAutocomplete__suggestion-"+n.placeId:void 0},s.getIsExpanded=function(){return s.state.suggestions.length>0},s.getInputProps=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(n.hasOwnProperty("value"))throw new Error("[react-places-autocomplete]: getInputProps does not accept `value`. Use `value` prop instead");if(n.hasOwnProperty("onChange"))throw new Error("[react-places-autocomplete]: getInputProps does not accept `onChange`. Use `onChange` prop instead");var y={type:"text",autoComplete:"off",role:"combobox","aria-autocomplete":"list","aria-expanded":s.getIsExpanded(),"aria-activedescendant":s.getActiveSuggestionId(),disabled:!s.state.ready};return i({},y,n,{onKeyDown:(0,c.compose)(s.handleInputKeyDown,n.onKeyDown),onBlur:(0,c.compose)(s.handleInputOnBlur,n.onBlur),value:s.props.value,onChange:function(f){s.handleInputChange(f)}})},s.getSuggestionItemProps=function(n){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=s.handleSuggestionMouseEnter.bind(s,n.index),f=s.handleSuggestionClick.bind(s,n);return i({},y,{key:n.id,id:s.getActiveSuggestionId(),role:"option",onMouseEnter:(0,c.compose)(o,y.onMouseEnter),onMouseLeave:(0,c.compose)(s.handleSuggestionMouseLeave,y.onMouseLeave),onMouseDown:(0,c.compose)(s.handleSuggestionMouseDown,y.onMouseDown),onMouseUp:(0,c.compose)(s.handleSuggestionMouseUp,y.onMouseUp),onTouchStart:(0,c.compose)(s.handleSuggestionTouchStart,y.onTouchStart),onTouchEnd:(0,c.compose)(s.handleSuggestionMouseUp,y.onTouchEnd),onClick:(0,c.compose)(f,y.onClick)})},s.handleSuggestionMouseEnter=function(n){s.setActiveAtIndex(n)},s.handleSuggestionMouseLeave=function(){s.mousedownOnSuggestion=!1,s.clearActive()},s.handleSuggestionMouseDown=function(n){n.preventDefault(),s.mousedownOnSuggestion=!0},s.handleSuggestionTouchStart=function(){s.mousedownOnSuggestion=!0},s.handleSuggestionMouseUp=function(){s.mousedownOnSuggestion=!1},s.handleSuggestionClick=function(n,y){y&&y.preventDefault&&y.preventDefault();var o=n.description,f=n.placeId;s.handleSelect(o,f,n),setTimeout(function(){s.mousedownOnSuggestion=!1})},s.state={loading:!1,suggestions:[],userInputValue:S.value,ready:!S.googleCallbackName},s.debouncedFetchPredictions=(0,p.default)(s.fetchPredictions,S.debounce),s}return u(j,[{key:"componentDidMount",value:function(){var s=this.props.googleCallbackName;if(s){var n=window.google&&window.google.maps&&window.google.maps.places;n?this.init():window[s]=this.init}else this.init()}},{key:"componentWillUnmount",value:function(){var s=this.props.googleCallbackName;s&&window[s]&&delete window[s]}},{key:"render",value:function(){return this.props.children({getInputProps:this.getInputProps,getSuggestionItemProps:this.getSuggestionItemProps,loading:this.state.loading,suggestions:this.state.suggestions})}}]),j}(b.default.Component);return G.propTypes={onChange:d.default.func.isRequired,value:d.default.string.isRequired,children:d.default.func.isRequired,onError:d.default.func,onSelect:d.default.func,searchOptions:d.default.shape({bounds:d.default.object,componentRestrictions:d.default.object,location:d.default.object,offset:d.default.oneOfType([d.default.number,d.default.string]),radius:d.default.oneOfType([d.default.number,d.default.string]),types:d.default.array}),debounce:d.default.number,highlightFirstSuggestion:d.default.bool,shouldFetchSuggestions:d.default.bool,googleCallbackName:d.default.string},G.defaultProps={onError:function(j,S){return console.error(`[react-places-autocomplete]: error happened when fetching data from Google Maps API.
Please check the docs here (https://developers.google.com/maps/documentation/javascript/places#place_details_responses)
Status: `,j)},searchOptions:{},debounce:200,highlightFirstSuggestion:!1,shouldFetchSuggestions:!0},Pe.default=G,Pe}var pe={},rt;function xs(){return rt||(rt=1,Object.defineProperty(pe,"__esModule",{value:!0}),pe.geocodeByAddress=function(u){var _=new window.google.maps.Geocoder,b=window.google.maps.GeocoderStatus.OK;return new Promise(function(v,d){_.geocode({address:u},function(h,p){p!==b&&d(p),v(h)})})},pe.getLatLng=function(u){return new Promise(function(_,b){try{var v={lat:u.geometry.location.lat(),lng:u.geometry.location.lng()};_(v)}catch(d){b(d)}})},pe.geocodeByPlaceId=function(u){var _=new window.google.maps.Geocoder,b=window.google.maps.GeocoderStatus.OK;return new Promise(function(v,d){_.geocode({placeId:u},function(h,p){p!==b&&d(p),v(h)})})}),pe}var nt;function bs(){if(nt)return te;nt=1,Object.defineProperty(te,"__esModule",{value:!0}),te.getLatLng=te.geocodeByPlaceId=te.geocodeByAddress=void 0;var i=fs(),u=b(i),_=xs();function b(v){return v&&v.__esModule?v:{default:v}}return te.geocodeByAddress=_.geocodeByAddress,te.geocodeByPlaceId=_.geocodeByPlaceId,te.getLatLng=_.getLatLng,te.default=u.default,te}var ye=bs();const it=$t(ye),ys=({isOpen:i,onClose:u,userId:_,setIsSubmit:b,onAddressAdded:v,fullname:d})=>{const{addAddress:h,loading:p}=ot(),[c,O]=g.useState({}),[T,F]=g.useState(!1),[N,q]=g.useState({building_number:"",area:"",lat:null,long:null,landmark:"",pincode:"",city:"",state:"",country:"",user_id:null,address_type:null,full_name:""}),[G,A]=g.useState(!1);g.useEffect(()=>{i?_&&q(n=>({...n,user_id:_,full_name:d})):(q({building_number:"",area:"",landmark:"",pincode:"",city:"",lat:null,long:null,state:"",country:"",user_id:null,address_type:null,full_name:""}),O({}))},[i,_]);const j=n=>{q({...N,area:n}),A(!0)},S=async n=>{q({...N,area:n});try{const y=await ye.geocodeByAddress(n),o=await ye.getLatLng(y[0]);o&&q(f=>({...f,lat:o==null?void 0:o.lat,long:o==null?void 0:o.lng}))}catch{P.error("Failed to fetch address detail",{className:"toast-error"})}},s=async n=>{n.preventDefault();const y={...N};y.pincode||delete y.pincode,y.landmark||delete y.landmark;try{if(await lt.validate(N,{abortEarly:!1}),O({}),_){const o=await h(y);o&&(v(o),u(),b(!0))}}catch(o){if(o instanceof Ge){const f={};o.inner.forEach(w=>{f[w.path||""]=w.message}),O(f)}else P.error("Failed to submit the form. Please try again.")}};if(i)return e.jsxs("div",{className:"fixed inset-0 grid overflow-auto items-center justify-center z-50 p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black opacity-50",onClick:u}),e.jsxs("div",{className:"bg-white p-5 rounded-lg shadow-lg min-w-[450px] !max-w-full z-10 relative",children:[e.jsx("button",{className:"btn btn-sm btn-icon btn-light btn-outline absolute top-0 right-0 mr-5 mt-5 lg:mr-5 shadow-default",onClick:u,children:e.jsx("i",{className:"ki-filled ki-cross"})}),e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Add New Address"}),e.jsxs("form",{onSubmit:s,children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"country",className:"block text-gray-700 font-semibold",children:"Address Type"}),e.jsxs("select",{className:"select select-lg text-sm",onChange:n=>q({...N,address_type:Number(n.target.value)}),children:[e.jsx("option",{value:"",selected:!0,disabled:!0,className:"badge-danger badge-outline",children:"Select Address Type"}),e.jsx("option",{value:"1",children:"Home"}),e.jsx("option",{value:"2",children:"Office"}),e.jsx("option",{value:"3",children:"Other"})]}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:c.address_type||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"area",className:"block text-gray-700 font-semibold",children:"Search Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"relative",children:e.jsx(it,{value:N.area,onChange:j,onSelect:S,children:({getInputProps:n,suggestions:y,getSuggestionItemProps:o,loading:f})=>e.jsxs(e.Fragment,{children:[e.jsx("input",{...n({className:"w-full input border border-gray-300 rounded-md p-2",id:"area",type:"text",onFocus:()=>A(!0),onBlur:()=>A(!1)})}),G&&y.length>0&&e.jsx("div",{className:"absolute bg-white border z-10 border-gray-200 rounded-lg w-full text-sm max-h-[150px] overflow-y-auto",children:e.jsxs("ul",{className:"custom-ul",children:[f&&e.jsx("li",{className:"block px-4 py-[0.8rem] hover:bg-gray-100 w-full",children:"Loading..."}),!f&&y.map((w,$)=>{const{...M}=o(w);return e.jsx("li",{...M,className:"block px-2 py-[0.8rem] hover:bg-gray-100 w-full cursor-pointer font-style",children:w==null?void 0:w.description},$)})]})})]})})}),c.area&&e.jsx("p",{className:"w-full text-red-500 text-sm",children:c.area||" "})||T&&e.jsx("p",{className:"aam-error-label",children:"please select valid area from dropdown"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"building_number",className:"block text-gray-700 font-semibold",children:"House Number and Society"}),e.jsx("input",{type:"text",id:"building_number",name:"building_number",autoComplete:"off",value:N.building_number,onChange:n=>q({...N,building_number:n.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:c.building_number||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"landmark",className:"block text-gray-700 font-semibold",children:"Landmark"}),e.jsx("input",{type:"text",id:"landmark",name:"landmark",autoComplete:"off",value:N.landmark,onChange:n=>q({...N,landmark:n.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:c.landmark||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"city",className:"block text-gray-700 font-semibold",children:"City"}),e.jsx("input",{type:"text",id:"city",name:"city",autoComplete:"off",value:N.city,onChange:n=>q({...N,city:n.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:c.city||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"pincode",className:"block text-gray-700 font-semibold",children:"Pin code"}),e.jsx("input",{type:"text",id:"pincode",name:"pincode",autoComplete:"off",value:N.pincode,onChange:n=>q({...N,pincode:n.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:c.pincode||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"state",className:"block text-gray-700 font-semibold",children:"State"}),e.jsx("input",{type:"text",id:"state",name:"state",autoComplete:"off",value:N.state,onChange:n=>q({...N,state:n.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:c.state||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"country",className:"block text-gray-700 font-semibold",children:"Country"}),e.jsx("input",{type:"text",id:"country",name:"country",autoComplete:"off",value:N.country,onChange:n=>q({...N,country:n.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:c.country||" "})]})]}),e.jsxs("div",{className:"flex justify-end mt-6",children:[e.jsx("button",{type:"button",onClick:u,className:"btn btn-light mr-2",disabled:p,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:p,className:`btn btn-primary ${p?"opacity-50 cursor-not-allowed":""}`,children:p?"Submitting...":"Submit"})]})]})]})]})},_s=({isOpen:i,onClose:u,setIsSubmit:_,onCustomerCreated:b})=>{const{addUser:v,loading:d}=Xt(),{addAddress:h,loading:p}=ot(),[c,O]=g.useState({first_name:"",last_name:"",email:"",mobile_number:"",gender:null,role_id:5}),[T,F]=g.useState({building_number:"",area:"",landmark:"",pincode:"",city:"",state:"",country:"",user_id:null,full_name:"",address_type:null}),[N,q]=g.useState({}),[G,A]=g.useState(!1),[j,S]=g.useState(!1);g.useEffect(()=>{i||(O({first_name:"",last_name:"",email:"",mobile_number:"",gender:null,role_id:5}),F({building_number:"",area:"",landmark:"",pincode:"",city:"",state:"",country:"",user_id:null,full_name:"",address_type:null}),q({}))},[i]);const s=o=>{F({...T,area:o}),S(!0)},n=async o=>{F({...T,area:o});try{const f=await ye.geocodeByAddress(o),w=await ye.getLatLng(f[0]);w&&F($=>({...$,lat:w==null?void 0:w.lat,long:w==null?void 0:w.lng}))}catch{P.error("Failed to fetch address detail",{className:"toast-error"})}},y=async o=>{o.preventDefault();try{await es().validate(c,{abortEarly:!1}),await lt.validate(T,{abortEarly:!1}),q({});const f={...c};f.email||delete f.email;const w=await v(f);if(w!=null&&w.user_id){const $={...T,user_id:w.user_id,full_name:`${w.first_name} ${w.last_name}`};$.landmark||delete $.landmark,$.pincode||delete $.pincode;const M=await h($,!1);M&&(b(w,M),u(),_(!0))}}catch(f){if(f instanceof Ge){const w={};f.inner.forEach($=>{w[$.path||""]=$.message}),q(w)}else P.error("Failed to submit the form. Please try again.")}};return i?e.jsxs("div",{className:"fixed inset-0 grid overflow-auto items-center justify-center z-50 p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black opacity-50",onClick:u}),e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg max-w-5xl w-full smobile:min-w-[85%] z-10 relative",children:[e.jsx("button",{className:"btn btn-sm btn-icon btn-light btn-outline absolute top-0 right-0 mr-5 mt-5 lg:mr-5 shadow-default",onClick:u,children:e.jsx("i",{className:"ki-filled ki-cross"})}),e.jsxs("form",{children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Customer Info"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-1",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"first_name",className:"block text-gray-700 font-semibold",children:"First name"}),e.jsx("input",{type:"text",id:"first_name",name:"first_name",autoComplete:"off",value:c.first_name||"",onChange:o=>O({...c,first_name:o.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"text-red-500 text-sm",children:N.first_name||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"last_name",className:"block text-gray-700 font-semibold",children:"Last name"}),e.jsx("input",{type:"text",id:"last_name",name:"last_name",autoComplete:"off",value:c.last_name,onChange:o=>O({...c,last_name:o.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"text-red-500 text-sm",children:N.last_name||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-gray-700 font-semibold",children:"Email"}),e.jsx("input",{type:"text",id:"email",name:"email",autoComplete:"off",value:c.email,onChange:o=>O({...c,email:o.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"text-red-500 text-sm",children:N.email||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"mobile_number",className:"block text-gray-700 font-semibold",children:"Mobile Number"}),e.jsx("input",{type:"text",id:"mobile_number",name:"mobile_number",autoComplete:"off",value:c.mobile_number,onChange:o=>O({...c,mobile_number:o.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"text-red-500 text-sm",children:N.mobile_number||" "})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"mb-2 block text-gray-700 font-semibold",children:"Gender"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:"gender",value:1,checked:c.gender===1,onChange:o=>O({...c,gender:parseInt(o.target.value)}),className:"radio radio-primary"}),e.jsx("span",{className:"text-sm",children:"Male"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:"gender",value:2,checked:c.gender===2,onChange:o=>O({...c,gender:parseInt(o.target.value)}),className:"radio radio-primary"}),e.jsx("span",{className:"text-sm",children:"Female"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:"gender",value:3,checked:c.gender===3,onChange:o=>O({...c,gender:parseInt(o.target.value)}),className:"radio radio-primary"}),e.jsx("span",{className:"text-sm",children:"Other"})]})]}),e.jsx("p",{className:"text-red-500 text-sm",children:N.gender||" "})]})]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Address"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-1",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"country",className:"block text-gray-700 font-semibold",children:"Address Type"}),e.jsxs("select",{className:"select select-lg text-sm w-full p-2 border border-gray-300 rounded-md",onChange:o=>F({...T,address_type:Number(o.target.value)}),children:[e.jsx("option",{value:"",selected:!0,disabled:!0,className:"badge-danger badge-outline",children:"Select Type"}),e.jsx("option",{value:"1",children:"Home"}),e.jsx("option",{value:"2",children:"Office"}),e.jsx("option",{value:"3",children:"Other"})]}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:N.address_type||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"area",className:"block text-gray-700 font-semibold",children:"Search Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"relative",children:e.jsx(it,{value:T.area,onChange:s,onSelect:n,children:({getInputProps:o,suggestions:f,getSuggestionItemProps:w,loading:$})=>e.jsxs(e.Fragment,{children:[e.jsx("input",{...o({className:"w-full input border border-gray-300 rounded-md p-2",id:"area",type:"text",onFocus:()=>S(!0),onBlur:()=>S(!1)})}),j&&f.length>0&&e.jsx("div",{className:"absolute bg-white border z-10 border-gray-200 rounded-lg w-full text-sm max-h-[150px] overflow-y-auto",children:e.jsxs("ul",{className:"custom-ul",children:[$&&e.jsx("li",{className:"block px-4 py-[0.8rem] hover:bg-gray-100 w-full",children:"Loading..."}),!$&&f.map((M,ne)=>{const{...J}=w(M);return e.jsx("li",{...J,className:"block px-2 py-[0.8rem] hover:bg-gray-100 w-full cursor-pointer font-style",children:M==null?void 0:M.description},ne)})]})})]})})}),N.area&&e.jsx("p",{className:"w-full text-red-500 text-sm",children:N.area||" "})||G&&e.jsx("p",{className:"aam-error-label",children:"please select valid area from dropdown"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"building_number",className:"block text-gray-700 font-semibold",children:"House Number"}),e.jsx("input",{type:"text",id:"building_number",name:"building_number",autoComplete:"off",value:T.building_number,onChange:o=>F({...T,building_number:o.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:N.building_number||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"landmark",className:"block text-gray-700 font-semibold",children:"Landmark"}),e.jsx("input",{type:"text",id:"landmark",name:"landmark",autoComplete:"off",value:T.landmark,onChange:o=>F({...T,landmark:o.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:N.landmark||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"city",className:"block text-gray-700 font-semibold",children:"City"}),e.jsx("input",{type:"text",id:"city",name:"city",autoComplete:"off",value:T.city,onChange:o=>F({...T,city:o.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:N.city||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"pincode",className:"block text-gray-700 font-semibold",children:"Pin code"}),e.jsx("input",{type:"text",id:"pincode",name:"pincode",autoComplete:"off",value:T.pincode,onChange:o=>F({...T,pincode:o.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:N.pincode||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"state",className:"block text-gray-700 font-semibold",children:"State"}),e.jsx("input",{type:"text",id:"state",name:"state",autoComplete:"off",value:T.state,onChange:o=>F({...T,state:o.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:N.state||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"country",className:"block text-gray-700 font-semibold",children:"Country"}),e.jsx("input",{type:"text",id:"country",name:"country",autoComplete:"off",value:T.country,onChange:o=>F({...T,country:o.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:N.country||" "})]})]})]})]}),e.jsxs("div",{className:"flex justify-end mt-6",children:[e.jsx("button",{type:"button",onClick:u,className:"btn btn-light mr-2",disabled:d||p,children:"Cancel"}),e.jsx("button",{type:"button",onClick:y,disabled:d||p,className:`btn btn-primary ${d||p?"opacity-50 cursor-not-allowed":""}`,children:d||p?"Submitting...":"Submit"})]})]})]})]}):null},vs=()=>{const[i,u]=g.useState(null),[_,b]=g.useState(!0),v=async()=>{const d=localStorage.getItem("authToken");if(!d){P.error("Authentication token not found!"),b(!1);return}try{const h=await fetch(`${_e}/admin/settings`,{method:"GET",headers:{Authorization:`Bearer ${d}`}}),p=await h.json();if(!h.ok){P.error((p==null?void 0:p.message)||"Failed to fetch settings",{position:"top-center"});return}u((p==null?void 0:p.data)||{})}catch{P.error("Network Error: Failed to fetch settings")}finally{b(!1)}};return g.useEffect(()=>{v()},[]),{settings:i,loading:_}},Is=()=>{var Ze;const{prices:i,loading:u}=Wt(),{categories:_,loading:b}=Jt(),{fetchProductsOnId:v,loading:d}=ss(),{fetchServicesOnId:h,loading:p}=as(),[c,O]=g.useState(""),[T,F]=g.useState(!0),{id:N}=qt(),{updateOrder:q,loading:G}=cs(),{addOrder:A,loading:j}=ds(),S=Number(N),s=1e3,n=1,{companies:y,loading:o}=Zt(n,s),[f,w]=g.useState(!1),[$,M]=g.useState(!1),[ne,J]=g.useState(!1),[K,W]=g.useState(!1),{users:se,fetchUsersByRole:ge}=Lt(),{validCoupons:Q,fetchValidCoupons:he}=os(),{branches:V,loading:ve}=Mt(n,s),{order:k,loading:je,fetchOrder:ie}=Qt(),{address:Z,fetchAddress:Ne}=us(),{applyCoupon:Oe}=ns(),{userData:le,fetchUser:L}=ts(),{generatePaymentLink:X,loading:oe}=Rt(),{settings:B,loading:Te}=vs(),de=le==null?void 0:le.user,we=Ut(),De=((Ze=we==null?void 0:we.state)==null?void 0:Ze.prevUrl)||"/orders",Fe=g.useRef(null),[fe,Ee]=g.useState({}),[Se,Ke]=g.useState({}),$e=g.useRef(null),[ze,Ve]=g.useState(!1),[He,qe]=g.useState(null),[Le,Ye]=g.useState(null),Me=Bt(t=>t==null?void 0:t.user),ke=Gt(),[a,C]=g.useState({coupon_code:"",coupon_discount:null,express_delivery_charges:null,express_delivery_hour:null,normal_delivery_charges:null,delivery_by:2,payment_type:1,payment_status:null,sub_total:0,paid_amount:null,kasar_amount:null,transaction_id:"",address_id:null,username:"",user_id:null,items:[{category_id:null,product_id:null,service_id:null,product_name:"",service_name:"",description:null,price:null,quantity:1,item_Total:null,showDescription:!1}],total:0,branch_id:null,order_status:null,company_id:null,gstin:"",gst_company_name:"",description:""}),[dt,ct]=g.useState({coupon_code:"",coupon_discount:null,express_delivery_charges:null,express_delivery_hour:null,normal_delivery_charges:null,delivery_by:null,payment_type:null,payment_status:null,sub_total:0,paid_amount:null,kasar_amount:null,transaction_id:"",address_id:null,username:"",user_id:null,items:[{category_id:null,product_id:null,service_id:null,product_name:"",service_name:"",description:null,price:null,quantity:1,item_Total:null,showDescription:!1}],total:0,branch_id:null,order_status:null,company_id:null,gstin:"",gst_company_name:"",description:""}),[U,Je]=g.useState({});g.useEffect(()=>{const t=r=>{$e.current&&!$e.current.contains(r.target)&&Fe.current&&!Fe.current.contains(r.target)&&(F(!1),Ve(!1))};return document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[]),g.useEffect(()=>{(async()=>{await ie(S)})()},[S]),g.useEffect(()=>{if(Z!=null&&Z.length){const t=Z.find(r=>r.is_default)||Z[0];C(r=>({...r,address_id:t?t.address_id:null}))}},[Z]),g.useEffect(()=>{(async()=>{a.user_id&&(await Ne(a.user_id),await he(a.user_id),await L(a.user_id)),K&&(await Ne(a.user_id),W(!1))})()},[a.user_id,K]),g.useEffect(()=>{S||C(t=>({...t,payment_status:a.payment_type===1?1:null}))},[a.payment_type]),g.useEffect(()=>{(async()=>{ze&&(!c||c.trim()==="")?(F(!0),await ge(5)):c&&T&&await ge(5,c)})()},[ze,c,T]),g.useEffect(()=>{if(k){const t=`${k.user.first_name} ${k.user.last_name}`;O(t),F(!1);const r={coupon_code:k.coupon_code||"",coupon_discount:k.coupon_discount||null,express_delivery_charges:k.express_delivery_charges||null,express_delivery_hour:k.express_delivery_hour||null,normal_delivery_charges:k.normal_delivery_charges||null,payment_type:k.payment_type||null,payment_status:k.payment_status||null,sub_total:k.sub_total||0,paid_amount:k.paid_amount||null,kasar_amount:k.kasar_amount||null,transaction_id:k.transaction_id||"",address_id:k.address_id,username:t,user_id:k.user_id||null,items:k.items.map(l=>{var Y,ce,E,xe;console.log(l);const x=l.category.category_id,m=((Y=l.product)==null?void 0:Y.product_id)||null,I=((ce=l.service)==null?void 0:ce.service_id)||null,R=((E=l.product)==null?void 0:E.name)||"",D=((xe=l.service)==null?void 0:xe.name)||"";fe[x]||v(x).then(ue=>{Ee(me=>({...me,[x]:ue}))});const H=`${x}_${m}`;return Se[H]||h(x,m).then(ue=>{Ke(me=>({...me,[H]:ue}))}),{category_id:x,product_id:m,service_id:I,product_name:R,service_name:D,description:l.description||null,price:l.price,quantity:l.quantity,item_Total:l.price*l.quantity,showDescription:!!l.description}}),total:(k.sub_total||0)+(k.express_delivery_charges||0)+(k.normal_delivery_charges||0),branch_id:k.branch_id,order_status:k.order_status,delivery_by:k.delivery_by,company_id:k.company_id,gstin:k.gstin,gst_company_name:k.gst_company_name,description:k==null?void 0:k.description};C(r),ct(r),k.gst_company_name&&k.gstin&&w(!0)}},[k]),g.useEffect(()=>{const t=(a.paid_amount||0)+(a.kasar_amount||0),r=a.total-t;let l=a.payment_status;a.total>0&&t===a.total?(l=2,qe(0)):t>0&&t<a.total?(l=3,qe(r)):t===0&&a.total>0&&(l=1,qe(r)),C(x=>({...x,payment_status:l}))},[a.paid_amount,a.kasar_amount,a.total]);const ut=async t=>{t.preventDefault();try{const r=a.items.map(D=>({category_id:Number(D.category_id),product_id:Number(D.product_id),service_id:Number(D.service_id),description:D.description,price:Number(D.price),quantity:Number(D.quantity)})),l={...a,address_id:Number(a.address_id),coupon_discount:Number(a.coupon_discount),normal_delivery_charges:Number(a.normal_delivery_charges),kasar_amount:Number(a.kasar_amount),paid_amount:Number(a.paid_amount),express_delivery_charges:Number(a.express_delivery_charges),payment_type:Number(a.payment_type),payment_status:Number(a.payment_status),order_status:S?a.order_status:4,items:r,company_id:a.company_id,gstin:a.gstin,gst_company_name:a.gst_company_name},x=a.total;if(await ps.validate(l,{abortEarly:!1,context:{total:x}}),Je({}),!Object.keys(a).some(D=>a[D]!==dt[D])){ke(`${De}`);return}let I;const R={...l};R.company_id||delete R.company_id,k?I=await q(S,R):I=await A(l),I&&ke(`${De}`)}catch(r){if(r instanceof Ge){const l={};r.inner.forEach(x=>{l[x.path||""]=x.message}),Je(l)}else P.error("Failed to submit the form. Please try again.")}},mt=t=>{t.target.value===""&&C(r=>({...r,address_id:null,user_id:null})),O(t.target.value),F(!0)},pt=t=>{const r=`${t.first_name} ${t.last_name}`;O(r),F(!1),C({...a,username:r,user_id:t.user_id})},gt=()=>{ke(`${De}`)},ht=()=>{C(t=>{const r=t.items[t.items.length-1];return{...t,items:[...t.items,{category_id:(r==null?void 0:r.category_id)||null,product_id:null,product_name:"",service_id:null,service_name:"",description:null,price:null,quantity:1,item_Total:null,showDescription:!1}]}})},ft=t=>{C(r=>{const l=r.items.filter((R,D)=>D!==t),x={...r,items:l,coupon_code:"",coupon_discount:0},m=Re(x),I=m+Number(a.express_delivery_charges||0)+Number(a.normal_delivery_charges||0);return{...x,sub_total:m,total:I}})},ee=async(t,r,l)=>{["category_id","product_id","service_id","price","quantity"].includes(r)&&C(x=>({...x,coupon_code:"",coupon_discount:0})),C(x=>{const m=x.items.map((Y,ce)=>{if(ce===t){const E={...Y,[r]:l};r==="showDescription"&&(E.showDescription=l);const xe=Number(E.category_id),ue=Number(E.product_id),me=Number(E.service_id),Qe=Number(E.quantity)||1;if(r==="category_id"){const ae=Number(l);fe[ae]||v(ae).then(Ce=>{Ee(Ae=>({...Ae,[ae]:Ce}))}),E.product_id=null,E.service_id=null,E.price=null,E.quantity=1,E.item_Total=null}if(r==="product_id"){const ae=Number(Y.category_id),Ce=Number(l),Ae=`${ae}_${Ce}`;Se[Ae]||h(ae,Ce).then(Ot=>{Ke(Tt=>({...Tt,[Ae]:Ot}))}),E.service_id=null,E.price=null,E.quantity=1,E.item_Total=null}if(["category_id","product_id","service_id"].includes(r)&&r!=="category_id"&&r!=="product_id")if(xe&&ue&&me){const ae=xt(xe,ue,me);E.price=ae,E.item_Total=ae*Qe}else E.price=null,E.item_Total=null;else r==="price"?E.item_Total=l*Qe:r==="quantity"&&(E.item_Total=E.price*Number(l));return E}return Y}),I={...x,items:m},D=Re(I)-x.coupon_discount,H=D+Number(x.express_delivery_charges||0)+Number(x.normal_delivery_charges||0);return{...I,sub_total:D,total:H}})},xt=(t,r,l)=>{const x=`${t}_${r}_${l}`;return i[x]||0},bt=async t=>{const r=Re(a);if(!r){P.error("Please add items first to apply the coupon code.");return}const l=await Oe(a.user_id,r,t),x=Number(l.finalTotal||0)+Number(a.express_delivery_charges||0)+Number(a.normal_delivery_charges||0);if(l&&(l&&C(m=>({...m,coupon_code:t,coupon_discount:l.discountAmount,sub_total:l.finalTotal,total:x})),a.express_delivery_hour)){const m=`express_delivery_${a.express_delivery_hour}hrs`,I=B[m],R=Number(I)/100;if(isNaN(R)){P.error("Invalid delivery charge percentage!");return}C(D=>{const H=Math.floor(D.sub_total*R);return{...D,express_delivery_charges:H,total:D.sub_total+H}})}},Re=t=>t.items.reduce((r,l)=>r+(l.item_Total||0),0),We=(t,r)=>{C(l=>{const x={...l,[t]:r},m=Number(x.sub_total||0)+Number(x.express_delivery_charges||0)+Number(x.normal_delivery_charges||0);return{...x,total:m}})},yt=t=>{const r=t.target.value;C(l=>({...l,address_id:Number(r)}))},_t=t=>{t.preventDefault(),a.user_id?M(!0):P.error("Please select the user to add address")},vt=t=>{t.preventDefault(),J(!0)},jt=()=>{ke(`/order/${S}`)},Nt=async()=>{const t=[];if(a.total||t.push("item total"),a.username||t.push("customer name"),t.length>0){P.error(`Please add required fields: ${t.join(", ")}`);return}const r={amount:a.total,currency:"INR",user_id:a.user_id,customer:{name:a.username,contact:de==null?void 0:de.mobile_number,email:de==null?void 0:de.email}};await X(r)},wt=(t,r)=>{if(t){const l=`${t.first_name} ${t.last_name}`;O(l),F(!1),C({...a,username:l,user_id:t.user_id})}r&&C(l=>({...l,address_id:r.address_id}))},St=t=>{t&&C(r=>({...r,address_id:t.address_id}))},kt=()=>{var r,l;const t=(l=(r=a==null?void 0:a.items)==null?void 0:r[0])==null?void 0:l.item_Total;return typeof t=="number"&&t>0?a.items.length:0},Ct=()=>{var r,l,x;return Number((l=(r=a==null?void 0:a.items)==null?void 0:r[0])==null?void 0:l.item_Total)>0?(x=a==null?void 0:a.items)==null?void 0:x.reduce((m,I)=>m+Number(I.quantity||0),0):0},At=t=>{if(!a.sub_total){P.error("Please add items first");return}if(B&&!Te){if(a.normal_delivery_charges&&C(I=>({...I,normal_delivery_charges:null})),!t){C(I=>({...I,total:I.total-I.express_delivery_charges,express_delivery_hour:null,express_delivery_charges:null,normal_delivery_charges:null}));return}const r=`express_delivery_${t}hrs`,l=B[r],x=Number(l)/100;if(isNaN(x)){P.error("Invalid delivery charge percentage!");return}const m=Math.floor(a.sub_total*x);C(I=>({...I,express_delivery_hour:t,express_delivery_charges:m,total:I.sub_total+m}))}else P("Settings data not found!")};g.useEffect(()=>{if(a.express_delivery_hour&&B&&!Te&&a.sub_total>0){const t=`express_delivery_${a.express_delivery_hour}hrs`,r=B[t],l=Number(r)/100;if(!isNaN(l)){const x=Math.floor(a.sub_total*l);C(m=>({...m,express_delivery_charges:x,total:m.sub_total+x}))}}},[a.sub_total]),g.useEffect(()=>{if(!N&&(V!=null&&V.length)&&Me&&!ve){const t=Me.user_branch||[];if(t.length){const r=V.find(l=>l.branch_id===t[0]);r&&C(l=>({...l,branch_id:r.branch_id}))}else C(r=>({...r,branch_id:V[0].branch_id}))}},[N,V,Me,ve]),g.useEffect(()=>{if(!o&&y.length>0&&!N){const t=y.find(r=>r.gst_percentage===6);t&&C({...a,company_id:t.company_id})}},[y]);const It=async()=>{const t=["men","women","kids","household"],r=[..._].sort((m,I)=>{const R=t.indexOf(m.name.toLowerCase()),D=t.indexOf(I.name.toLowerCase());return(R===-1?1/0:R)-(D===-1?1/0:D)})[0];if(!r)return;const l=r==null?void 0:r.category_id;C(m=>{const I=[...m.items];return I[0]={...I[0],category_id:l},{...m,items:I}});let x=fe[l];x||(x=await v(l),Ee(m=>({...m,[l]:x})))};g.useEffect(()=>{we.pathname==="/order/add"&&(_!=null&&_.length)&&!b&&It()},[_]);const Pt=({express_delivery_charges:t,express_delivery_hour:r})=>{if(Te||!(B!=null&&B.estimate_delivery_normal_day))return null;const l=Number(B==null?void 0:B.estimate_delivery_normal_day);return t&&r?et().add(r,"hour").format("DD/MM/YYYY"):et().add(l,"day").format("DD/MM/YYYY")};return g.useEffect(()=>{const t=Pt({express_delivery_charges:a==null?void 0:a.express_delivery_charges,express_delivery_hour:a==null?void 0:a.express_delivery_hour});Ye(t||null)},[a==null?void 0:a.express_delivery_charges,a==null?void 0:a.express_delivery_hour,B]),je&&N?e.jsx(Xe,{}):u?e.jsx(Xe,{}):e.jsx("div",{className:"container-fixed",children:e.jsxs("div",{className:"card max-w-5xl mx-auto bg-white shadow-md lg:!p-4 xl:!p-6 sm:!p-5 p-3.5",children:[e.jsxs("div",{className:"flex",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:k?"Edit Order":"Add Order"}),!isNaN(S)&&e.jsxs("button",{className:"btn bg-gray-200 ml-4 text-gray-700 text-sm font-bold rounded-md",onClick:jt,children:[e.jsx(Kt,{size:20}),"View Order"]})]}),e.jsxs("form",{onSubmit:ut,children:[e.jsxs("div",{className:"grid md:grid-cols-2 cs1:gap-x-6 gap-x-4  gap-y-5 mt-4 grid-cols-1",children:[e.jsxs("div",{className:"md:!col-span-2 grid md:!grid-cols-3 cs1:gap-x-6 gap-x-4 items-start grid-cols-1",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"company_id",children:"Company"}),e.jsxs("select",{id:"company_id",className:"select border border-gray-300 rounded-md p-2 w-full text-sm",value:a.company_id||"",onChange:t=>{C({...a,company_id:t.target.value?Number(t.target.value):null})},children:[e.jsx("option",{value:"",disabled:!0,children:"Select Company"}),o?e.jsx("option",{children:"loading..."}):y.length>0?y.map(t=>e.jsx("option",{value:t.company_id,children:`${t.company_name} (${t.gst_percentage}%)`},t.company_id)):e.jsx("option",{children:"No Data available"})]}),e.jsx("p",{className:"text-red-500 text-sm",children:U.company_id||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"branch",className:"!block text-gray-700 text-sm font-bold mb-2",children:"Branch"}),e.jsxs("select",{id:"branch",className:"select border border-gray-300 rounded-md p-2 w-full text-sm",value:a.branch_id||"",onChange:t=>C({...a,branch_id:t.target.value?Number(t.target.value):null}),children:[e.jsx("option",{value:"",disabled:!0,children:"Select Branch"}),V.length>0?V.map(t=>e.jsx("option",{value:t.branch_id,children:t.branch_name},t.branch_id)):e.jsx("option",{children:"No Data Available"})]}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:U.branch_id||" "})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"delivery_by",className:"block text-gray-700 text-sm font-bold mb-2",children:"Delivery By"}),e.jsxs("select",{className:"select border border-gray-300 rounded-md p-2 w-full text-sm",id:"delivery_by",value:a.delivery_by||"",onChange:t=>{C({...a,delivery_by:Number(t.target.value)})},children:[e.jsx("option",{value:"",disabled:!0,children:"Select Delivery By"}),e.jsx("option",{value:1,children:"Home"}),e.jsx("option",{value:2,children:"Shop"})]})]})]}),e.jsxs("div",{className:"relative col-span-1",children:[e.jsxs("span",{className:"flex justify-between items-center",children:[e.jsx("label",{htmlFor:"username",className:"block text-gray-700 text-sm font-bold mb-2",children:"Customer name"}),e.jsx("button",{type:"button",className:"btn btn-sm btn-primary -mt-6 sm:btn-lg",onClick:vt,children:"Add Customer"})]}),e.jsx("input",{type:"text",id:"username",ref:Fe,autoComplete:"off",value:c||"",onChange:mt,className:"input border border-gray-300 rounded-md p-2 w-full mb-2",placeholder:"Search customer...",onFocus:()=>{Ve(!0),F(!0)}}),se&&T&&e.jsx("ul",{ref:$e,className:"absolute -mt-2 bg-white border z-10 border-gray-300 rounded-md p-2 w-full text-sm max-h-[400px] overflow-y-auto",children:se.length>0?se.map(t=>e.jsxs("li",{className:"p-2 hover:bg-gray-200 cursor-pointer rounded",onClick:()=>pt(t),children:[t.first_name," ",t.last_name," (",t.mobile_number,")"]},t.user_id)):e.jsx("li",{className:"p-2 text-gray-500",children:"No users found"})}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:U.username||" "})]}),e.jsxs("div",{className:"relative col-span-1",children:[e.jsxs("span",{className:"flex justify-between items-center",children:[e.jsx("label",{htmlFor:"address",className:"block text-gray-700 text-sm font-bold mb-2",children:"Customer address"}),e.jsx("button",{type:"button",className:"btn btn-sm btn-primary -mt-6",onClick:_t,children:"Add address"})]}),e.jsxs("select",{id:"address",value:a.address_id??"",onChange:yt,className:"select border border-gray-300 rounded-md w-full text-sm",children:[e.jsx("option",{value:"",disabled:!0,children:"Select Address"}),Z.length>0&&c?Z.map(t=>{const{building_number:r,area:l,landmark:x,city:m,state:I,country:R,pincode:D}=t,Y=[r,l,x,m,I,R,D].filter(Boolean).join(", ");return e.jsx("option",{value:t.address_id,children:Y},t.address_id)}):e.jsx("option",{disabled:!0,children:"No Address Available"})]}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:U.address_id||" "})]})]}),e.jsx("div",{className:"flex flex-wrap",children:e.jsx("h1",{className:"text-xl font-semibold leading-none text-gray-900 mt-6 mb-5 ml-1",children:"Item"})}),a.items.map((t,r)=>{var l,x;return e.jsx(zt.Fragment,{children:e.jsxs("div",{className:"border border-gray-200 rounded-xl mt-4 xl:!p-4 space-y-2 p-3.5 max-w-full overflow-hidden",children:[e.jsx("div",{children:e.jsxs("div",{className:"grid res-item-container",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:`category${r}`,className:"block text-gray-700 text-sm font-bold mb-2",children:"Category"}),e.jsxs("select",{id:`category${r}`,value:t.category_id??"",onChange:m=>ee(r,"category_id",m.target.value),className:"select border border-gray-300 rounded-md p-2 w-full text-sm",children:[e.jsx("option",{value:"",disabled:!0,children:"Select Category"}),b?e.jsx(e.Fragment,{children:e.jsx("option",{children:"Loading..."})}):_.length>0?_.sort((m,I)=>{const R=["men","women","kids","household"],D=ce=>ce.trim().toLowerCase(),H=R.indexOf(D(m.name)),Y=R.indexOf(D(I.name));return H===-1&&Y===-1?m.name.localeCompare(I.name):(H===-1?1/0:H)-(Y===-1?1/0:Y)}).map(m=>e.jsx("option",{value:m.category_id,children:m.name},m.category_id)):e.jsx("option",{children:"No Category Available"})]}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:U[`items[${r}].category_id`]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:`product${r}`,className:"block text-gray-700 text-sm font-bold mb-2",children:"Product"}),e.jsxs("select",{id:`product${r}`,value:t.product_id??"",onChange:m=>ee(r,"product_id",m.target.value),className:"select border border-gray-300 rounded-md p-2 w-full text-sm",children:[e.jsx("option",{value:"",disabled:!0,children:"Select Product"}),t.category_id?d?e.jsx("option",{children:"Loading..."}):((l=fe[t.category_id])==null?void 0:l.length)>0?fe[t.category_id].map(m=>e.jsx("option",{value:m.product_product_id,children:m.product_name},m.product_product_id)):t.product_id?e.jsx("option",{value:t.product_id,children:t.product_name},t.product_id):e.jsx("option",{children:"No Product Available"}):e.jsx("option",{disabled:!0,children:"Please select a category"})]}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:U[`items[${r}].product_id`]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:`service${r}`,className:"block text-gray-700 text-sm font-bold mb-2",children:"Service"}),e.jsxs("select",{id:`service${r}`,value:t.service_id??"",onChange:m=>ee(r,"service_id",m.target.value),className:"select border border-gray-300 rounded-md p-2 w-full text-sm",children:[e.jsx("option",{value:"",disabled:!0,children:"Select Service"}),t.product_id?p?e.jsx("option",{children:"Loading..."}):((x=Se[`${t.category_id}_${t.product_id}`])==null?void 0:x.length)>0?Se[`${t.category_id}_${t.product_id}`].map(m=>e.jsx("option",{value:m.service_service_id,children:m.service_name},m.service_service_id)):t.service_id?e.jsx("option",{value:t.service_id,children:t.service_name},t.service_id):e.jsx("option",{children:"No service available"}):e.jsx("option",{disabled:!0,children:"Please select a product"})]}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:U[`items[${r}].service_id`]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:`price${r}`,children:"Price"}),e.jsx("input",{type:"text",id:`price${r}`,value:t.price||"",onChange:m=>ee(r,"price",Number(m.target.value)),className:"input border rounded-md p-2 w-full border-gray-300 bg-gray-100 text-sm text-gray-600"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:U[`items[${r}].price`]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:`quantity${r}`,children:"Quantity"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",id:`quantity${r}`,autoComplete:"off",value:t.quantity??1,onChange:m=>ee(r,"quantity",Number(m.target.value)),className:"w-full p-2 text-sm focus:outline-none input text-center"}),e.jsx("button",{type:"button",className:"absolute top-1/2 left-1.5 -translate-y-1/2 p-1 rounded hover:bg-gray-200 transition",onClick:()=>ee(r,"quantity",Math.max(1,(t.quantity??1)-1)),children:e.jsx("i",{className:"ki-filled ki-minus text-gray-600 text-base"})}),e.jsx("button",{type:"button",className:"absolute top-1/2 right-1.5 -translate-y-1/2 p-1 rounded hover:bg-gray-200 transition",onClick:()=>ee(r,"quantity",(t.quantity??1)+1),children:e.jsx("i",{className:"ki-filled ki-plus text-gray-500 text-base"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Item total"}),e.jsx("input",{type:"text",value:t.item_Total??"",onChange:m=>ee(r,"item_Total",m.target.value),min:"0",step:"0.01",readOnly:!0,className:"input w-full border border-gray-300 bg-gray-100 text-sm text-gray-600 rounded-md p-2 cursor-not-allowed focus:!border-gray-300"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:`description_checkbox${r}`,className:"block text-gray-700 text-sm font-bold mb-2",children:"Remarks"}),e.jsx("div",{className:"h-full w-full flex items-center cs2:justify-center justify-start cs2:ml-0 lgmobile:!ml-4 ml-[9px]",children:e.jsx("input",{className:"checkbox checkbox-lg",id:`description_checkbox${r}`,"data-datatable-check":"true",type:"checkbox",checked:t.showDescription,onChange:m=>ee(r,"showDescription",m.target.checked)})})]}),e.jsxs("div",{className:"flex flex-col items-center max-w-[40px]",children:[e.jsx("label",{className:"text-gray-700 text-sm font-bold mb-2 lgmobile:block hidden",children:" "}),e.jsx("div",{className:"grow flex justify-center items-center",children:e.jsx("button",{type:"button",className:`p-2 rounded-full ${a.items.length>1?"bg-red-100 hover:bg-red-200":"bg-gray-200 cursor-not-allowed"}`,onClick:()=>ft(r),disabled:a.items.length===1,children:e.jsx(Vt,{className:`${a.items.length>1?"text-red-500":"text-gray-400"}`})})})]})]})}),e.jsx("div",{className:"flex justify-between sm:items-center smmobile:flex-col gap-y-2 smmobile:w-full",children:e.jsx("div",{children:t.showDescription&&e.jsx("div",{children:e.jsxs("div",{className:"flex mt-2 smmobile:w-[100%] smmobile:justify-self-start flex-col md:w-[350px] lg:w-[420px] sm:w-[300px] h-[80px] mb-2",children:[e.jsx("label",{htmlFor:"description",className:"block text-gray-700 text-sm font-bold mb-2",children:"Description"}),e.jsx("textarea",{id:"description",value:t.description||"",onChange:m=>ee(r,"description",m.target.value),className:"h-full input border border-gray-300 rounded-md p-2 w-full"})]})})})})]})},r)}),e.jsxs("div",{className:"flex bndesktop:!items-center justify-start cs2:gap-12 sm:!gap-8 flex-wrap bndesktop:!gap-4 gap-2 bndesktop:!flex-row flex-col items-start mb-2",children:[e.jsx("button",{type:"button",onClick:ht,className:"btn btn-primary bndesktop:!mb-6 mt-4",children:"Add Item"}),e.jsxs("p",{className:"block text-gray-900 text-sm font-bold",children:["Total Items : ",kt()]}),e.jsxs("p",{className:"block text-gray-900 text-sm font-bold",children:["Total Quantity : ",Ct()]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 cs1:!gap-6 gap-4",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block text-gray-700 text-sm font-bold mb-2",children:"Order Note"}),e.jsx("textarea",{rows:3,id:"description",value:a.description,onChange:t=>C({...a,description:t.target.value}),className:"h-full input border border-gray-300 rounded-md p-2 w-full"})]})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"coupon_code",children:"Coupon Code"}),e.jsxs("select",{id:"coupon_code",className:"select border border-gray-300 rounded-md p-2 w-full text-sm",value:a.coupon_code??"",onChange:t=>{const r=Q.find(l=>l.code===t.target.value);bt(r==null?void 0:r.code)},children:[e.jsx("option",{value:"",disabled:!0,children:"Select Coupon Code"}),Q&&Q.length>0?Q.map(t=>e.jsxs("option",{value:t.code,children:[t.code," ",a.coupon_code===t.code?"":`(min: ${t.min_cart_value||0})`]},t.coupon_id)):e.jsx("option",{children:"No Coupons available"})]}),e.jsx("p",{className:"text-red-500 text-sm",children:U.coupon_code||" "})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Coupon Discount"}),e.jsx("input",{type:"text",value:a.coupon_discount||"",readOnly:!0,className:"input border border-gray-300 bg-gray-100 text-sm text-gray-600 rounded-md p-2 cursor-not-allowed focus:outline-none"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:U.coupon_discount||" "})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Sub Total"}),e.jsx("input",{type:"text",value:a.sub_total||"",readOnly:!0,className:"input border border-gray-300 bg-gray-100 text-sm text-gray-600 rounded-md p-2 cursor-not-allowed focus:outline-none"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:U.sub_total||" "})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"kasar_amount",className:"block text-gray-700 text-sm font-bold mb-2",children:"Kasar amount"}),e.jsx("input",{type:"text",id:"kasar_amount",autoComplete:"off",value:a.kasar_amount||"",onChange:t=>{C({...a,kasar_amount:Number(t.target.value)})},className:"input border border-gray-300 rounded-md p-2",min:"0",step:"0.01"})]}),e.jsxs("div",{className:"flex flex-col md:!col-span-2",children:[e.jsxs("div",{className:"md:!col-span-2 grid sm:!grid-cols-3 cs1:!gap-6 gap-4 grid-cols-1",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"exp_delivery_time",className:"block text-gray-700 text-sm font-bold mb-2",children:"Express Delivery Time"}),e.jsxs("select",{className:"select border border-gray-300 rounded-md p-2 w-full text-sm",id:"exp_delivery_time",value:a.express_delivery_hour||"",onChange:t=>{At(Number(t.target.value))},children:[e.jsx("option",{value:"",children:"Select Express Delivery Time"}),e.jsx("option",{value:24,children:"24 Hrs"}),e.jsx("option",{value:48,children:"48 Hrs"}),e.jsx("option",{value:72,children:"72 Hrs"})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"express_delivery_charges",className:"block text-gray-700 text-sm font-bold mb-2",children:"Express Delivery Charge"}),e.jsx("input",{type:"text",id:"express_delivery_charges",autoComplete:"off",min:"0",value:a.express_delivery_charges||"",onChange:t=>We("express_delivery_charges",t.target.value),className:`${a.normal_delivery_charges>0?"input border border-gray-300 rounded-md p-2 bg-gray-100 cursor-not-allowed focus:outline-none":"input border border-gray-300 rounded-md p-2"}`,readOnly:a.normal_delivery_charges>0})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"normal_delivery_charges",className:"block text-gray-700 text-sm font-bold mb-2",children:"Normal Delivery Charge"}),e.jsx("input",{type:"text",id:"normal_delivery_charges",min:"0",autoComplete:"off",value:a.normal_delivery_charges||"",onChange:t=>We("normal_delivery_charges",t.target.value),className:`${a.express_delivery_charges>0?"input border border-gray-300 rounded-md p-2 bg-gray-100 cursor-not-allowed focus:outline-none":"input border border-gray-300 rounded-md p-2"}`,readOnly:a.express_delivery_charges>0})]})]}),Le&&!S&&e.jsx("p",{className:"w-full text-green-500 text-sm font-medium mt-1",children:`Your order will be delivered on ${Le||" "}`})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Total"}),e.jsx("input",{type:"text",value:a.total||"",readOnly:!0,className:"input border border-gray-300 bg-gray-100 text-sm text-gray-600 rounded-md p-2 cursor-not-allowed focus:outline-none"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"payment_method",className:"block text-gray-700 text-sm font-bold mb-2",children:"Payment Method"}),e.jsxs("select",{className:"select border border-gray-300 rounded-md p-2 w-full text-sm",id:"payment_method",value:a.payment_type??"",onChange:t=>C({...a,payment_type:Number(t.target.value)}),children:[e.jsx("option",{value:"",disabled:!0,children:"Select Payment Type"}),e.jsx("option",{value:1,children:"Cash on Delivery"}),e.jsx("option",{value:2,children:"Online Payment"})]}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:U.payment_type||" "}),!S&&a.payment_type===2&&e.jsx("div",{children:e.jsxs("button",{type:"button",className:"relative min-w-[160px] min-h-[40px] flex items-center gap-2 px-4 py-2 text-sm font-medium text-blue-600 border border-blue-500 rounded-lg hover:bg-blue-100 transition disabled:opacity-50",onClick:Nt,disabled:oe,children:[e.jsx("div",{className:"w-4 h-4 flex items-center justify-center",children:oe?e.jsx(Ht,{}):e.jsx(Yt,{className:"w-4 h-4 text-blue-600"})}),e.jsx("span",{children:"Send Payment Link"})]})})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"paid_amount",className:"block text-gray-700 text-sm font-bold mb-2",children:"Paid amount"}),e.jsx("input",{type:"text",id:"paid_amount",autoComplete:"off",value:a.paid_amount||"",onChange:t=>{C({...a,paid_amount:Number(t.target.value)})},className:"input border border-gray-300 rounded-md p-2",min:"0",step:"0.01"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:U.paid_amount||" "})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"payment_status",className:"block text-gray-700 text-sm font-bold mb-2",children:"Payment Status"}),e.jsxs("select",{className:"select border border-gray-300 rounded-md p-2 w-full text-sm",id:"payment_status",value:a.payment_status??"",onChange:t=>C({...a,payment_status:Number(t.target.value)}),children:[e.jsx("option",{value:"",disabled:!0,children:"Select Payment Status"}),e.jsx("option",{value:1,children:"Pending"}),e.jsx("option",{value:2,children:"Received"}),e.jsx("option",{value:3,children:"Partial Received"})]}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:U.payment_status}),a.payment_status===2&&He>0&&e.jsx("p",{className:"w-full text-red-500 text-sm",children:`Remaining amount Rs ${He}`})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"transaction_id",className:"block text-gray-700 text-sm font-bold mb-2",children:"Transaction ID"}),e.jsx("input",{type:"text",id:"transaction_id",autoComplete:"off",value:a.transaction_id??"",onChange:t=>C({...a,transaction_id:t.target.value}),className:"input border border-gray-300 text-sm text-gray-600 rounded-md p-2 focus:outline-none"})]}),e.jsxs("div",{className:"flex flex-col justify-center items-start",children:[e.jsx("label",{htmlFor:"have_gst_cb",className:"block text-gray-700 text-sm font-bold mb-2",children:"Do you have GSTIN ?"}),e.jsx("input",{className:"checkbox",id:"have_gst_cb",name:"check",type:"checkbox",checked:f,onChange:t=>{w(t.target.checked)}})]}),f&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"gstin",className:"block text-gray-700 text-sm font-bold mb-2",children:"GSTIN"}),e.jsx("input",{type:"text",id:"gstin",autoComplete:"off",value:a.gstin,onChange:t=>C({...a,gstin:t.target.value}),className:"uppercase input border border-gray-300 text-sm text-gray-600 rounded-md p-2 focus:outline-none"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:U.gstin||" "})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"gst_company_name",className:"block text-gray-700 text-sm font-bold mb-2",children:"Company Name"}),e.jsx("input",{type:"text",id:"gst_company_name",autoComplete:"off",value:a.gst_company_name,onChange:t=>C({...a,gst_company_name:t.target.value}),className:"input border border-gray-300 text-sm text-gray-600 rounded-md p-2 focus:outline-none"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:U.gst_company_name||" "})]})]})]}),e.jsxs("div",{className:"mt-6 flex gap-4",children:[e.jsx("button",{type:"submit",className:`btn btn-primary ${j||G?"opacity-50 cursor-not-allowed":""}`,disabled:j||G,children:j||G?j?"Adding...":"Updating...":S?"Update Order":"Add Order"}),e.jsx("button",{type:"button",onClick:gt,className:"btn btn-secondary",disabled:j||G,children:"Cancel"})]})]}),e.jsx(ys,{onAddressAdded:St,isOpen:$,setIsSubmit:W,onClose:()=>M(!1),userId:a.user_id,fullname:a.username}),e.jsx(_s,{onCustomerCreated:wt,isOpen:ne,setIsSubmit:W,onClose:()=>J(!1)})]})})};export{Is as default};
