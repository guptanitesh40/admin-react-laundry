import{r as A,V as C,B as ge,a as fe,d as L,p as pe,N as G,Q as he,S as be,U as xe,j as e,b as se}from"./index-Dfkh1Z1C.js";import{u as ye,c as ve}from"./userSchema-BD6waZnX.js";const je="http://35.154.167.170:3000",we=`${je}/admin/orders`,Oe=()=>{const[f,u]=A.useState(!1);return{addOrder:async b=>{const p=localStorage.getItem("authToken");u(!0);try{const r=await fetch(we,{method:"POST",headers:{Authorization:`Bearer ${p}`,"Content-Type":"application/json"},body:JSON.stringify(b)});if(!r.ok){const m=await r.json();return C.error(m.message,{position:"top-center"}),!1}const v=await r.json();return C.success(v.message,{position:"top-center"}),!0}catch(r){return C.error((r==null?void 0:r.message)||"Network error: Failed to fetch.",{position:"top-center"}),!1}finally{u(!1)}},loading:f}},Pe=()=>{const[f,u]=A.useState([]),[h,b]=A.useState(!1);return{address:f,loading:h,fetchAddress:async r=>{var o;const v=localStorage.getItem("authToken"),m=`http://35.154.167.170:3000/address/${r}/user`;try{const j=await fetch(m,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${v}`}});if(!j.ok){const c=await j.json();C.error(c.message,{position:"top-center"});return}const x=await j.json(),_=((o=x==null?void 0:x.data)==null?void 0:o.result)||[];u(_)}catch(j){C.error((j==null?void 0:j.message)||"Network error: Failed to fetch.",{position:"top-center"})}finally{b(!1)}}}},oe=()=>{const[f,u]=A.useState(!1);return{addAddress:async(b,p=!0)=>{var v;const r=localStorage.getItem("authToken");u(!0);try{const m=await fetch(`${ge}/address/admin`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify(b)}),o=await m.json();return m.ok?(p&&C.success(o.message,{position:"top-center"}),(v=o==null?void 0:o.data)==null?void 0:v.result):(p&&C.error(o.message,{position:"top-center"}),!1)}catch(m){return C.error((m==null?void 0:m.message)||"Error adding banner",{position:"top-center"}),!1}finally{u(!1)}},loading:f}},le=fe().shape({pincode:L().optional().test("is-valid-pincode","Pincode must be exactly 6 digits",f=>!f||/^[0-9]{6}$/.test(f)),address_type:pe().required("Address type is required"),building_number:L().required("House number is required"),area:L().required("Area is required"),city:L().required("City is required"),state:L().required("State is required"),country:L().required("Country is required")});var O={},z={},J,ee;function Se(){if(ee)return J;ee=1;var f="Expected a function",u=NaN,h="[object Symbol]",b=/^\s+|\s+$/g,p=/^[-+]0x[0-9a-f]+$/i,r=/^0b[01]+$/i,v=/^0o[0-7]+$/i,m=parseInt,o=typeof G=="object"&&G&&G.Object===Object&&G,j=typeof self=="object"&&self&&self.Object===Object&&self,x=o||j||Function("return this")(),_=Object.prototype,c=_.toString,S=Math.max,P=Math.min,g=function(){return x.Date.now()};function i(n,s,d){var w,k,T,E,I,D,q=0,Q=!1,B=!1,V=!0;if(typeof n!="function")throw new TypeError(f);s=l(s)||0,y(d)&&(Q=!!d.leading,B="maxWait"in d,T=B?S(l(d.maxWait)||0,s):T,V="trailing"in d?!!d.trailing:V);function H(N){var F=w,R=k;return w=k=void 0,q=N,E=n.apply(R,F),E}function de(N){return q=N,I=setTimeout(K,s),Q?H(N):E}function ce(N){var F=N-D,R=N-q,Z=s-F;return B?P(Z,T-R):Z}function X(N){var F=N-D,R=N-q;return D===void 0||F>=s||F<0||B&&R>=T}function K(){var N=g();if(X(N))return Y(N);I=setTimeout(K,ce(N))}function Y(N){return I=void 0,V&&w?H(N):(w=k=void 0,E)}function ue(){I!==void 0&&clearTimeout(I),q=0,w=D=k=I=void 0}function me(){return I===void 0?E:Y(g())}function W(){var N=g(),F=X(N);if(w=arguments,k=this,D=N,F){if(I===void 0)return de(D);if(B)return I=setTimeout(K,s),H(D)}return I===void 0&&(I=setTimeout(K,s)),E}return W.cancel=ue,W.flush=me,W}function y(n){var s=typeof n;return!!n&&(s=="object"||s=="function")}function t(n){return!!n&&typeof n=="object"}function a(n){return typeof n=="symbol"||t(n)&&c.call(n)==h}function l(n){if(typeof n=="number")return n;if(a(n))return u;if(y(n)){var s=typeof n.valueOf=="function"?n.valueOf():n;n=y(s)?s+"":s}if(typeof n!="string")return n===0?n:+n;n=n.replace(b,"");var d=r.test(n);return d||v.test(n)?m(n.slice(2),d?2:8):p.test(n)?u:+n}return J=i,J}var U={},te;function Ne(){return te||(te=1,Object.defineProperty(U,"__esModule",{value:!0}),U.compose=function(){for(var u=arguments.length,h=Array(u),b=0;b<u;b++)h[b]=arguments[b];return function(){for(var p=arguments.length,r=Array(p),v=0;v<p;v++)r[v]=arguments[v];h.forEach(function(m){return m&&m.apply(void 0,r)})}},U.pick=function(u){for(var h=arguments.length,b=Array(h>1?h-1:0),p=1;p<h;p++)b[p-1]=arguments[p];return b.reduce(function(r,v){return u&&u.hasOwnProperty(v)&&(r[v]=u[v]),r},{})}),U}var ae;function _e(){if(ae)return z;ae=1,Object.defineProperty(z,"__esModule",{value:!0});var f=Object.assign||function(g){for(var i=1;i<arguments.length;i++){var y=arguments[i];for(var t in y)Object.prototype.hasOwnProperty.call(y,t)&&(g[t]=y[t])}return g},u=function(){function g(i,y){for(var t=0;t<y.length;t++){var a=y[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(i,a.key,a)}}return function(i,y,t){return y&&g(i.prototype,y),t&&g(i,t),i}}(),h=he(),b=j(h),p=be(),r=j(p),v=Se(),m=j(v),o=Ne();function j(g){return g&&g.__esModule?g:{default:g}}function x(g,i){if(!(g instanceof i))throw new TypeError("Cannot call a class as a function")}function _(g,i){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i&&(typeof i=="object"||typeof i=="function")?i:g}function c(g,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof i);g.prototype=Object.create(i&&i.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(g,i):g.__proto__=i)}var S=function(i){return{mainText:i.main_text,secondaryText:i.secondary_text}},P=function(g){c(i,g);function i(y){x(this,i);var t=_(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,y));return t.init=function(){if(!window.google)throw new Error("[react-places-autocomplete]: Google Maps JavaScript API library must be loaded. See: https://github.com/kenny-hibino/react-places-autocomplete#load-google-library");if(!window.google.maps.places)throw new Error("[react-places-autocomplete]: Google Maps Places library must be loaded. Please add `libraries=places` to the src URL. See: https://github.com/kenny-hibino/react-places-autocomplete#load-google-library");t.autocompleteService=new window.google.maps.places.AutocompleteService,t.autocompleteOK=window.google.maps.places.PlacesServiceStatus.OK,t.setState(function(a){return a.ready?null:{ready:!0}})},t.autocompleteCallback=function(a,l){if(t.setState({loading:!1}),l!==t.autocompleteOK){t.props.onError(l,t.clearSuggestions);return}var n=t.props.highlightFirstSuggestion;t.setState({suggestions:a.map(function(s,d){return{id:s.id,description:s.description,placeId:s.place_id,active:!!(n&&d===0),index:d,formattedSuggestion:S(s.structured_formatting),matchedSubstrings:s.matched_substrings,terms:s.terms,types:s.types}})})},t.fetchPredictions=function(){var a=t.props.value;a.length&&(t.setState({loading:!0}),t.autocompleteService.getPlacePredictions(f({},t.props.searchOptions,{input:a}),t.autocompleteCallback))},t.clearSuggestions=function(){t.setState({suggestions:[]})},t.clearActive=function(){t.setState({suggestions:t.state.suggestions.map(function(a){return f({},a,{active:!1})})})},t.handleSelect=function(a,l,n){t.clearSuggestions(),t.props.onSelect?t.props.onSelect(a,l,n):t.props.onChange(a)},t.getActiveSuggestion=function(){return t.state.suggestions.find(function(a){return a.active})},t.selectActiveAtIndex=function(a){var l=t.state.suggestions.find(function(n){return n.index===a}).description;t.setActiveAtIndex(a),t.props.onChange(l)},t.selectUserInputValue=function(){t.clearActive(),t.props.onChange(t.state.userInputValue)},t.handleEnterKey=function(){var a=t.getActiveSuggestion();a===void 0?t.handleSelect(t.props.value,null,null):t.handleSelect(a.description,a.placeId,a)},t.handleDownKey=function(){if(t.state.suggestions.length!==0){var a=t.getActiveSuggestion();a===void 0?t.selectActiveAtIndex(0):a.index===t.state.suggestions.length-1?t.selectUserInputValue():t.selectActiveAtIndex(a.index+1)}},t.handleUpKey=function(){if(t.state.suggestions.length!==0){var a=t.getActiveSuggestion();a===void 0?t.selectActiveAtIndex(t.state.suggestions.length-1):a.index===0?t.selectUserInputValue():t.selectActiveAtIndex(a.index-1)}},t.handleInputKeyDown=function(a){switch(a.key){case"Enter":a.preventDefault(),t.handleEnterKey();break;case"ArrowDown":a.preventDefault(),t.handleDownKey();break;case"ArrowUp":a.preventDefault(),t.handleUpKey();break;case"Escape":t.clearSuggestions();break}},t.setActiveAtIndex=function(a){t.setState({suggestions:t.state.suggestions.map(function(l,n){return n===a?f({},l,{active:!0}):f({},l,{active:!1})})})},t.handleInputChange=function(a){var l=a.target.value;if(t.props.onChange(l),t.setState({userInputValue:l}),!l){t.clearSuggestions();return}t.props.shouldFetchSuggestions&&t.debouncedFetchPredictions()},t.handleInputOnBlur=function(){t.mousedownOnSuggestion||t.clearSuggestions()},t.getActiveSuggestionId=function(){var a=t.getActiveSuggestion();return a?"PlacesAutocomplete__suggestion-"+a.placeId:void 0},t.getIsExpanded=function(){return t.state.suggestions.length>0},t.getInputProps=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(a.hasOwnProperty("value"))throw new Error("[react-places-autocomplete]: getInputProps does not accept `value`. Use `value` prop instead");if(a.hasOwnProperty("onChange"))throw new Error("[react-places-autocomplete]: getInputProps does not accept `onChange`. Use `onChange` prop instead");var l={type:"text",autoComplete:"off",role:"combobox","aria-autocomplete":"list","aria-expanded":t.getIsExpanded(),"aria-activedescendant":t.getActiveSuggestionId(),disabled:!t.state.ready};return f({},l,a,{onKeyDown:(0,o.compose)(t.handleInputKeyDown,a.onKeyDown),onBlur:(0,o.compose)(t.handleInputOnBlur,a.onBlur),value:t.props.value,onChange:function(s){t.handleInputChange(s)}})},t.getSuggestionItemProps=function(a){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.handleSuggestionMouseEnter.bind(t,a.index),s=t.handleSuggestionClick.bind(t,a);return f({},l,{key:a.id,id:t.getActiveSuggestionId(),role:"option",onMouseEnter:(0,o.compose)(n,l.onMouseEnter),onMouseLeave:(0,o.compose)(t.handleSuggestionMouseLeave,l.onMouseLeave),onMouseDown:(0,o.compose)(t.handleSuggestionMouseDown,l.onMouseDown),onMouseUp:(0,o.compose)(t.handleSuggestionMouseUp,l.onMouseUp),onTouchStart:(0,o.compose)(t.handleSuggestionTouchStart,l.onTouchStart),onTouchEnd:(0,o.compose)(t.handleSuggestionMouseUp,l.onTouchEnd),onClick:(0,o.compose)(s,l.onClick)})},t.handleSuggestionMouseEnter=function(a){t.setActiveAtIndex(a)},t.handleSuggestionMouseLeave=function(){t.mousedownOnSuggestion=!1,t.clearActive()},t.handleSuggestionMouseDown=function(a){a.preventDefault(),t.mousedownOnSuggestion=!0},t.handleSuggestionTouchStart=function(){t.mousedownOnSuggestion=!0},t.handleSuggestionMouseUp=function(){t.mousedownOnSuggestion=!1},t.handleSuggestionClick=function(a,l){l&&l.preventDefault&&l.preventDefault();var n=a.description,s=a.placeId;t.handleSelect(n,s,a),setTimeout(function(){t.mousedownOnSuggestion=!1})},t.state={loading:!1,suggestions:[],userInputValue:y.value,ready:!y.googleCallbackName},t.debouncedFetchPredictions=(0,m.default)(t.fetchPredictions,y.debounce),t}return u(i,[{key:"componentDidMount",value:function(){var t=this.props.googleCallbackName;if(t){var a=window.google&&window.google.maps&&window.google.maps.places;a?this.init():window[t]=this.init}else this.init()}},{key:"componentWillUnmount",value:function(){var t=this.props.googleCallbackName;t&&window[t]&&delete window[t]}},{key:"render",value:function(){return this.props.children({getInputProps:this.getInputProps,getSuggestionItemProps:this.getSuggestionItemProps,loading:this.state.loading,suggestions:this.state.suggestions})}}]),i}(b.default.Component);return P.propTypes={onChange:r.default.func.isRequired,value:r.default.string.isRequired,children:r.default.func.isRequired,onError:r.default.func,onSelect:r.default.func,searchOptions:r.default.shape({bounds:r.default.object,componentRestrictions:r.default.object,location:r.default.object,offset:r.default.oneOfType([r.default.number,r.default.string]),radius:r.default.oneOfType([r.default.number,r.default.string]),types:r.default.array}),debounce:r.default.number,highlightFirstSuggestion:r.default.bool,shouldFetchSuggestions:r.default.bool,googleCallbackName:r.default.string},P.defaultProps={onError:function(i,y){return console.error(`[react-places-autocomplete]: error happened when fetching data from Google Maps API.
Please check the docs here (https://developers.google.com/maps/documentation/javascript/places#place_details_responses)
Status: `,i)},searchOptions:{},debounce:200,highlightFirstSuggestion:!1,shouldFetchSuggestions:!0},z.default=P,z}var M={},ne;function ke(){return ne||(ne=1,Object.defineProperty(M,"__esModule",{value:!0}),M.geocodeByAddress=function(u){var h=new window.google.maps.Geocoder,b=window.google.maps.GeocoderStatus.OK;return new Promise(function(p,r){h.geocode({address:u},function(v,m){m!==b&&r(m),p(v)})})},M.getLatLng=function(u){return new Promise(function(h,b){try{var p={lat:u.geometry.location.lat(),lng:u.geometry.location.lng()};h(p)}catch(r){b(r)}})},M.geocodeByPlaceId=function(u){var h=new window.google.maps.Geocoder,b=window.google.maps.GeocoderStatus.OK;return new Promise(function(p,r){h.geocode({placeId:u},function(v,m){m!==b&&r(m),p(v)})})}),M}var re;function Ae(){if(re)return O;re=1,Object.defineProperty(O,"__esModule",{value:!0}),O.getLatLng=O.geocodeByPlaceId=O.geocodeByAddress=void 0;var f=_e(),u=b(f),h=ke();function b(p){return p&&p.__esModule?p:{default:p}}return O.geocodeByAddress=h.geocodeByAddress,O.geocodeByPlaceId=h.geocodeByPlaceId,O.getLatLng=h.getLatLng,O.default=u.default,O}var $=Ae();const ie=xe($),Ee=({isOpen:f,onClose:u,userId:h,setIsSubmit:b,onAddressAdded:p,fullname:r})=>{const{addAddress:v,loading:m}=oe(),[o,j]=A.useState({}),[x,_]=A.useState(!1),[c,S]=A.useState({building_number:"",area:"",lat:null,long:null,landmark:"",pincode:"",city:"",state:"",country:"",user_id:null,address_type:null,full_name:""}),[P,g]=A.useState(!1);A.useEffect(()=>{f?h&&S(a=>({...a,user_id:h,full_name:r})):(S({building_number:"",area:"",landmark:"",pincode:"",city:"",lat:null,long:null,state:"",country:"",user_id:null,address_type:null,full_name:""}),j({}))},[f,h]);const i=a=>{S({...c,area:a}),g(!0)},y=async a=>{S({...c,area:a});try{const l=await $.geocodeByAddress(a),n=await $.getLatLng(l[0]);n&&S(s=>({...s,lat:n==null?void 0:n.lat,long:n==null?void 0:n.lng}))}catch{C.error("Failed to fetch address detail",{className:"toast-error"})}},t=async a=>{a.preventDefault();const l={...c};l.pincode||delete l.pincode,l.landmark||delete l.landmark;try{if(await le.validate(c,{abortEarly:!1}),j({}),h){const n=await v(l);n&&(p(n),u(),b(!0))}}catch(n){if(n instanceof se){const s={};n.inner.forEach(d=>{s[d.path||""]=d.message}),j(s)}else C.error("Failed to submit the form. Please try again.")}};if(f)return e.jsxs("div",{className:"fixed inset-0 grid overflow-auto items-center justify-center z-50 p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black opacity-50",onClick:u}),e.jsxs("div",{className:"bg-white p-5 rounded-lg shadow-lg min-w-[450px] !max-w-full z-10 relative",children:[e.jsx("button",{className:"btn btn-sm btn-icon btn-light btn-outline absolute top-0 right-0 mr-5 mt-5 lg:mr-5 shadow-default",onClick:u,children:e.jsx("i",{className:"ki-filled ki-cross"})}),e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Add New Address"}),e.jsxs("form",{onSubmit:t,children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"country",className:"block text-gray-700 font-semibold",children:"Address Type"}),e.jsxs("select",{className:"select select-lg text-sm",onChange:a=>S({...c,address_type:Number(a.target.value)}),children:[e.jsx("option",{value:"",selected:!0,disabled:!0,className:"badge-danger badge-outline",children:"Select Address Type"}),e.jsx("option",{value:"1",children:"Home"}),e.jsx("option",{value:"2",children:"Office"}),e.jsx("option",{value:"3",children:"Other"})]}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:o.address_type||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"area",className:"block text-gray-700 font-semibold",children:"Search Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"relative",children:e.jsx(ie,{value:c.area,onChange:i,onSelect:y,children:({getInputProps:a,suggestions:l,getSuggestionItemProps:n,loading:s})=>e.jsxs(e.Fragment,{children:[e.jsx("input",{...a({className:"w-full input border border-gray-300 rounded-md p-2",id:"area",type:"text",onFocus:()=>g(!0),onBlur:()=>g(!1)})}),P&&l.length>0&&e.jsx("div",{className:"absolute bg-white border z-10 border-gray-200 rounded-lg w-full text-sm max-h-[150px] overflow-y-auto",children:e.jsxs("ul",{className:"custom-ul",children:[s&&e.jsx("li",{className:"block px-4 py-[0.8rem] hover:bg-gray-100 w-full",children:"Loading..."}),!s&&l.map((d,w)=>{const{...k}=n(d);return e.jsx("li",{...k,className:"block px-2 py-[0.8rem] hover:bg-gray-100 w-full cursor-pointer font-style",children:d==null?void 0:d.description},w)})]})})]})})}),o.area&&e.jsx("p",{className:"w-full text-red-500 text-sm",children:o.area||" "})||x&&e.jsx("p",{className:"aam-error-label",children:"please select valid area from dropdown"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"building_number",className:"block text-gray-700 font-semibold",children:"House Number and Society"}),e.jsx("input",{type:"text",id:"building_number",name:"building_number",autoComplete:"off",value:c.building_number,onChange:a=>S({...c,building_number:a.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:o.building_number||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"landmark",className:"block text-gray-700 font-semibold",children:"Landmark"}),e.jsx("input",{type:"text",id:"landmark",name:"landmark",autoComplete:"off",value:c.landmark,onChange:a=>S({...c,landmark:a.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:o.landmark||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"city",className:"block text-gray-700 font-semibold",children:"City"}),e.jsx("input",{type:"text",id:"city",name:"city",autoComplete:"off",value:c.city,onChange:a=>S({...c,city:a.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:o.city||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"pincode",className:"block text-gray-700 font-semibold",children:"Pin code"}),e.jsx("input",{type:"text",id:"pincode",name:"pincode",autoComplete:"off",value:c.pincode,onChange:a=>S({...c,pincode:a.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:o.pincode||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"state",className:"block text-gray-700 font-semibold",children:"State"}),e.jsx("input",{type:"text",id:"state",name:"state",autoComplete:"off",value:c.state,onChange:a=>S({...c,state:a.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:o.state||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"country",className:"block text-gray-700 font-semibold",children:"Country"}),e.jsx("input",{type:"text",id:"country",name:"country",autoComplete:"off",value:c.country,onChange:a=>S({...c,country:a.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:o.country||" "})]})]}),e.jsxs("div",{className:"flex justify-end mt-6",children:[e.jsx("button",{type:"button",onClick:u,className:"btn btn-light mr-2",disabled:m,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:m,className:`btn btn-primary ${m?"opacity-50 cursor-not-allowed":""}`,children:m?"Submitting...":"Submit"})]})]})]})]})},Fe=({isOpen:f,onClose:u,setIsSubmit:h,onCustomerCreated:b})=>{const{addUser:p,loading:r}=ye(),{addAddress:v,loading:m}=oe(),[o,j]=A.useState({first_name:"",last_name:"",email:"",mobile_number:"",gender:null,role_id:5}),[x,_]=A.useState({building_number:"",area:"",landmark:"",pincode:"",city:"",state:"",country:"",user_id:null,full_name:"",address_type:null}),[c,S]=A.useState({}),[P,g]=A.useState(!1),[i,y]=A.useState(!1);A.useEffect(()=>{f||(j({first_name:"",last_name:"",email:"",mobile_number:"",gender:null,role_id:5}),_({building_number:"",area:"",landmark:"",pincode:"",city:"",state:"",country:"",user_id:null,full_name:"",address_type:null}),S({}))},[f]);const t=n=>{_({...x,area:n}),y(!0)},a=async n=>{_({...x,area:n});try{const s=await $.geocodeByAddress(n),d=await $.getLatLng(s[0]);d&&_(w=>({...w,lat:d==null?void 0:d.lat,long:d==null?void 0:d.lng}))}catch{C.error("Failed to fetch address detail",{className:"toast-error"})}},l=async n=>{n.preventDefault();try{await ve().validate(o,{abortEarly:!1}),await le.validate(x,{abortEarly:!1}),S({});const s={...o};s.email||delete s.email;const d=await p(s);if(d!=null&&d.user_id){const w={...x,user_id:d.user_id,full_name:`${d.first_name} ${d.last_name}`};w.landmark||delete w.landmark,w.pincode||delete w.pincode;const k=await v(w,!1);k&&(b(d,k),u(),h(!0))}}catch(s){if(s instanceof se){const d={};s.inner.forEach(w=>{d[w.path||""]=w.message}),S(d)}else C.error("Failed to submit the form. Please try again.")}};return f?e.jsxs("div",{className:"fixed inset-0 grid overflow-auto items-center justify-center z-50 p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black opacity-50",onClick:u}),e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg max-w-5xl w-full smobile:min-w-[85%] z-10 relative",children:[e.jsx("button",{className:"btn btn-sm btn-icon btn-light btn-outline absolute top-0 right-0 mr-5 mt-5 lg:mr-5 shadow-default",onClick:u,children:e.jsx("i",{className:"ki-filled ki-cross"})}),e.jsxs("form",{children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Customer Info"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-1",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"first_name",className:"block text-gray-700 font-semibold",children:"First name"}),e.jsx("input",{type:"text",id:"first_name",name:"first_name",autoComplete:"off",value:o.first_name||"",onChange:n=>j({...o,first_name:n.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"text-red-500 text-sm",children:c.first_name||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"last_name",className:"block text-gray-700 font-semibold",children:"Last name"}),e.jsx("input",{type:"text",id:"last_name",name:"last_name",autoComplete:"off",value:o.last_name,onChange:n=>j({...o,last_name:n.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"text-red-500 text-sm",children:c.last_name||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-gray-700 font-semibold",children:"Email"}),e.jsx("input",{type:"text",id:"email",name:"email",autoComplete:"off",value:o.email,onChange:n=>j({...o,email:n.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"text-red-500 text-sm",children:c.email||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"mobile_number",className:"block text-gray-700 font-semibold",children:"Mobile Number"}),e.jsx("input",{type:"text",id:"mobile_number",name:"mobile_number",autoComplete:"off",value:o.mobile_number,onChange:n=>j({...o,mobile_number:n.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"text-red-500 text-sm",children:c.mobile_number||" "})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"mb-2 block text-gray-700 font-semibold",children:"Gender"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:"gender",value:1,checked:o.gender===1,onChange:n=>j({...o,gender:parseInt(n.target.value)}),className:"radio radio-primary"}),e.jsx("span",{className:"text-sm",children:"Male"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:"gender",value:2,checked:o.gender===2,onChange:n=>j({...o,gender:parseInt(n.target.value)}),className:"radio radio-primary"}),e.jsx("span",{className:"text-sm",children:"Female"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:"gender",value:3,checked:o.gender===3,onChange:n=>j({...o,gender:parseInt(n.target.value)}),className:"radio radio-primary"}),e.jsx("span",{className:"text-sm",children:"Other"})]})]}),e.jsx("p",{className:"text-red-500 text-sm",children:c.gender||" "})]})]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Address"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-1",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"country",className:"block text-gray-700 font-semibold",children:"Address Type"}),e.jsxs("select",{className:"select select-lg text-sm w-full p-2 border border-gray-300 rounded-md",onChange:n=>_({...x,address_type:Number(n.target.value)}),children:[e.jsx("option",{value:"",selected:!0,disabled:!0,className:"badge-danger badge-outline",children:"Select Type"}),e.jsx("option",{value:"1",children:"Home"}),e.jsx("option",{value:"2",children:"Office"}),e.jsx("option",{value:"3",children:"Other"})]}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:c.address_type||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"area",className:"block text-gray-700 font-semibold",children:"Search Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"relative",children:e.jsx(ie,{value:x.area,onChange:t,onSelect:a,children:({getInputProps:n,suggestions:s,getSuggestionItemProps:d,loading:w})=>e.jsxs(e.Fragment,{children:[e.jsx("input",{...n({className:"w-full input border border-gray-300 rounded-md p-2",id:"area",type:"text",onFocus:()=>y(!0),onBlur:()=>y(!1)})}),i&&s.length>0&&e.jsx("div",{className:"absolute bg-white border z-10 border-gray-200 rounded-lg w-full text-sm max-h-[150px] overflow-y-auto",children:e.jsxs("ul",{className:"custom-ul",children:[w&&e.jsx("li",{className:"block px-4 py-[0.8rem] hover:bg-gray-100 w-full",children:"Loading..."}),!w&&s.map((k,T)=>{const{...E}=d(k);return e.jsx("li",{...E,className:"block px-2 py-[0.8rem] hover:bg-gray-100 w-full cursor-pointer font-style",children:k==null?void 0:k.description},T)})]})})]})})}),c.area&&e.jsx("p",{className:"w-full text-red-500 text-sm",children:c.area||" "})||P&&e.jsx("p",{className:"aam-error-label",children:"please select valid area from dropdown"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"building_number",className:"block text-gray-700 font-semibold",children:"House Number"}),e.jsx("input",{type:"text",id:"building_number",name:"building_number",autoComplete:"off",value:x.building_number,onChange:n=>_({...x,building_number:n.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:c.building_number||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"landmark",className:"block text-gray-700 font-semibold",children:"Landmark"}),e.jsx("input",{type:"text",id:"landmark",name:"landmark",autoComplete:"off",value:x.landmark,onChange:n=>_({...x,landmark:n.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:c.landmark||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"city",className:"block text-gray-700 font-semibold",children:"City"}),e.jsx("input",{type:"text",id:"city",name:"city",autoComplete:"off",value:x.city,onChange:n=>_({...x,city:n.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:c.city||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"pincode",className:"block text-gray-700 font-semibold",children:"Pin code"}),e.jsx("input",{type:"text",id:"pincode",name:"pincode",autoComplete:"off",value:x.pincode,onChange:n=>_({...x,pincode:n.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:c.pincode||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"state",className:"block text-gray-700 font-semibold",children:"State"}),e.jsx("input",{type:"text",id:"state",name:"state",autoComplete:"off",value:x.state,onChange:n=>_({...x,state:n.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:c.state||" "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"country",className:"block text-gray-700 font-semibold",children:"Country"}),e.jsx("input",{type:"text",id:"country",name:"country",autoComplete:"off",value:x.country,onChange:n=>_({...x,country:n.target.value}),className:"w-full input border border-gray-300 rounded-md p-2"}),e.jsx("p",{className:"w-full text-red-500 text-sm",children:c.country||" "})]})]})]})]}),e.jsxs("div",{className:"flex justify-end mt-6",children:[e.jsx("button",{type:"button",onClick:u,className:"btn btn-light mr-2",disabled:r||m,children:"Cancel"}),e.jsx("button",{type:"button",onClick:l,disabled:r||m,className:`btn btn-primary ${r||m?"opacity-50 cursor-not-allowed":""}`,children:r||m?"Submitting...":"Submit"})]})]})]})]}):null};export{Ee as A,Fe as C,Pe as a,Oe as u};
