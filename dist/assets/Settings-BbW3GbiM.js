import{c as C,aL as d,b4 as P,b5 as F,r as i,j as e,V as R,_ as Y,a as I,h as E,F as O,aN as V,aO as B,aS as M}from"./index-D5VRrQJF.js";const z=C().shape({estimate_pickup_normal_hour:d().typeError("estimate pickup normal hour must be a number").min(0,"estimate pickup normal hour must be a positive number"),estimate_pickup_express_hour:d().typeError("estimate pickup express hour must be a number").min(0,"estimate pickup express hour must be a positive number"),gst_percentage:d().typeError("gst percentage must be a number").min(0,"gst percentage must be a positive number"),estimate_delivery_normal_day:d().typeError("estimate delivery normal day must be a number").min(0,"estimate delivery normal day must be a positive number"),estimate_delivery_express_day:d().typeError("estimate delivery express day must be a number").min(0,"estimate delivery express day must be a positive number"),shipping_charge:d().typeError("shipping charge must be a number").min(0,"shipping charge must be a positive number"),express_delivery_charge:d().typeError("express delivery charge must be a number").min(0,"express delivery charge must be a positive number")}),A=()=>{const{settingsData:p,fetchSetting:j}=P(),{addSetting:k}=F(),[n,_]=i.useState({}),[b,u]=i.useState(!1),[v,N]=i.useState(""),[y,g]=i.useState(""),s=p==null?void 0:p.data,[l,h]=i.useState({estimate_delivery_express_day:"",estimate_delivery_normal_day:"",estimate_pickup_express_hour:"",estimate_pickup_normal_hour:"",gst_percentage:"",shipping_charge:"",express_delivery_charge:""});i.useEffect(()=>{j(),u(!1)},[b]),i.useEffect(()=>{if(s){const a={estimate_delivery_express_day:s.estimate_delivery_express_day,estimate_delivery_normal_day:s.estimate_delivery_normal_day,estimate_pickup_express_hour:s.estimate_pickup_express_hour,estimate_pickup_normal_hour:s.estimate_pickup_normal_hour,gst_percentage:s.gst_percentage,shipping_charge:s.shipping_charge,express_delivery_charge:s.express_delivery_charge};h(a)}},[s]);const w=async a=>{a.preventDefault();try{await z.validate(l,{abortEarly:!1}),await k({setting_key:v,setting_value:y})&&(_({}),u(!0))}catch(m){if(m instanceof R){const f={};m.inner.forEach(t=>{f[t.path||""]=t.message}),_(f)}else Y.error("Failed to submit the form. Please try again.")}},c=(a,m)=>{N(a),g(m),h({...l,[a]:m})};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"col-span-1",children:e.jsxs("div",{className:"card pb-2.5 min-w-full",children:[e.jsx("div",{className:"card-header",id:"basic_settings",children:e.jsx("h3",{className:"card-title",children:"General Settings"})}),e.jsxs("div",{className:"card-body grid gap-1",children:[e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:"flex items-baseline flex-wrap lg:flex-nowrap gap-2.5",children:[e.jsx("label",{className:"form-label flex items-center gap-1 max-w-56",children:"Estimate Pickup Normal Hour (In Hour)"}),e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsx("input",{className:"input",type:"text",value:l.estimate_pickup_normal_hour||"",onChange:a=>c("estimate_pickup_normal_hour",a.target.value)}),e.jsx("p",{className:"text-red-500 text-sm",children:n.estimate_pickup_normal_hour||" "})]})]})}),e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:"flex items-baseline flex-wrap lg:flex-nowrap gap-2.5",children:[e.jsx("label",{className:"form-label flex items-center gap-1 max-w-56",children:"Estimate Pickup Express Hour (In Hour)"}),e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsx("input",{className:"input",type:"text",value:l.estimate_pickup_express_hour||"",onChange:a=>c("estimate_pickup_express_hour",a.target.value)}),e.jsx("p",{className:"text-red-500 text-sm",children:n.estimate_pickup_express_hour||" "})]})]})}),e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:"flex items-baseline flex-wrap lg:flex-nowrap gap-2.5",children:[e.jsx("label",{className:"form-label flex items-center gap-1 max-w-56",children:"GST Percentage (%)"}),e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsx("input",{className:"input",type:"text",value:l.gst_percentage,onChange:a=>c("gst_percentage",a.target.value)}),e.jsx("p",{className:"text-red-500 text-sm",children:n.gst_percentage||" "})]})]})}),e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:"flex items-baseline flex-wrap lg:flex-nowrap gap-2.5",children:[e.jsx("label",{className:"form-label flex items-center gap-1 max-w-56",children:"Estimate Delivery Normal Day (Day)"}),e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsx("input",{className:"input",type:"text",value:l.estimate_delivery_normal_day,onChange:a=>c("estimate_delivery_normal_day",a.target.value)}),e.jsx("p",{className:"text-red-500 text-sm",children:n.estimate_delivery_normal_day||" "})]})]})}),e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:"flex items-baseline flex-wrap lg:flex-nowrap gap-2.5",children:[e.jsx("label",{className:"form-label flex items-center gap-1 max-w-56",children:"Estimate Delivery Express Day (Day)"}),e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsx("input",{className:"input",type:"text",value:l.estimate_delivery_express_day,onChange:a=>c("estimate_delivery_express_day",a.target.value)}),e.jsx("p",{className:"text-red-500 text-sm",children:n.estimate_delivery_express_day||" "})]})]})}),e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:"flex items-baseline flex-wrap lg:flex-nowrap gap-2.5",children:[e.jsx("label",{className:"form-label flex items-center gap-1 max-w-56",children:"Shipping Charge (Rs)"}),e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsx("input",{className:"input",type:"text",value:l.shipping_charge,onChange:a=>c("shipping_charge",a.target.value)}),e.jsx("p",{className:"text-red-500 text-sm",children:n.shipping_charge||" "})]})]})}),e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:"flex items-baseline flex-wrap lg:flex-nowrap gap-2.5",children:[e.jsx("label",{className:"form-label flex items-center gap-1 max-w-56",children:"Express Delivery Charge (Rs)"}),e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsx("input",{className:"input",type:"text",value:l.express_delivery_charge,onChange:a=>c("express_delivery_charge",a.target.value)}),e.jsx("p",{className:"text-red-500 text-sm",children:n.express_delivery_charge||" "})]})]})}),e.jsx("div",{className:"flex justify-end pt-2.5",children:e.jsx("button",{className:"btn btn-primary",onClick:w,children:"Save Changes"})})]})]})})})},G=C().shape({title:I().required("Title is required"),price:d().required("Please enter price").typeError("Price must be a number").min(0,"Price must be a positive number")}),H=()=>{var f;const{settingsData:p,fetchSetting:j,loading:k}=P(),{addSetting:n}=F(),[_,b]=i.useState(null),[u,v]=i.useState({}),[N,y]=i.useState(!1),g=(f=p==null?void 0:p.data)==null?void 0:f.home_promotion_banner_website,[s,l]=i.useState({image:null,title:"",price:"",offer_validity:E()}),[h,w]=i.useState({image:null,title:"",price:"",offer_validity:E()});i.useEffect(()=>{j(),y(!1)},[N]),i.useEffect(()=>{if(g){const t=JSON.parse(g);if(t){const r={image:t.image_url||"",title:t.title||"",price:t.price||"",offer_validity:E(t.offer_validity)};l(r),w(r)}}},[g]);const c=t=>{l(r=>({...r,offer_validity:t}))},a=t=>{var x;const r=(x=t.target.files)==null?void 0:x[0];if(r){const o=URL.createObjectURL(r);b(o),l(D=>({...D,image:r}))}},m=async t=>{t.preventDefault();try{if(await G.validate(s,{abortEarly:!1}),!Object.keys(s).some(S=>S==="image"?s.image instanceof File||s.image!==h.image:s[S]!==h[S]))return;const x="home_promotion_banner_website",o={title:s.title,price:s.price,offer_validity:s.offer_validity.format("DD-MMM-YYYY"),image_url:s.image};await n({setting_key:x,setting_value:JSON.stringify(o)})&&(v({}),y(!0))}catch(r){if(r instanceof R){const x={};r.inner.forEach(o=>{x[o.path||""]=o.message}),v(x)}else Y.error("Failed to submit the form. Please try again.")}};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"col-span-1",children:e.jsxs("div",{className:"card min-w-full pb-2.5",children:[e.jsx("div",{className:"card-header",id:"basic_settings",children:e.jsx("h3",{className:"card-title",children:"Promotion Banner"})}),e.jsxs("div",{className:"card-body grid gap-4",children:[e.jsx("div",{className:"flex items-center flex-wrap gap-2.5",children:e.jsx("div",{className:"flex justify-end flex-wrap grow gap-2.5",children:e.jsxs("div",{className:"image-input","data-image-input":"true",children:[e.jsx("label",{htmlFor:"image-upload",className:"btn btn-icon btn-icon-2xl btn-light absolute z-1 size-8 -top-0.5 -right-0.5 rounded-full",children:e.jsx(O,{className:"text-blue-600"})}),e.jsx("input",{id:"image-upload",type:"file",accept:"image/*",style:{display:"none"},onChange:a}),e.jsx("div",{className:"image-input-placeholder rounded-md border-2",children:e.jsx("img",{className:"h-[200px] w-[300px] rounded-sm",src:_||typeof s.image=="string"&&s.image||"",alt:"Promotion Banner"})})]})})}),e.jsx("div",{children:e.jsxs("div",{className:"flex items-baseline flex-wrap lg:flex-nowrap gap-2.5",children:[e.jsx("label",{className:"form-label flex items-center gap-1 max-w-56",children:"Title"}),e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsx("input",{className:"input",type:"text",value:s.title,onChange:t=>l({...s,title:t.target.value})}),e.jsx("p",{className:"text-red-500 text-sm",children:u.title||" "})]})]})}),e.jsx("div",{children:e.jsxs("div",{className:"flex items-baseline flex-wrap lg:flex-nowrap gap-2.5",children:[e.jsx("label",{className:"form-label flex items-center gap-1 max-w-56",children:"Price (Rs)"}),e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsx("input",{className:"input",type:"text",value:s.price,onChange:t=>l({...s,price:t.target.value})}),e.jsx("p",{className:"text-red-500 text-sm",children:u.price||" "})]})]})}),e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:"flex items-baseline flex-wrap lg:flex-nowrap gap-2.5",children:[e.jsx("label",{className:"form-label flex items-center gap-1 max-w-56",children:"Offer Validity"}),e.jsx(V,{dateAdapter:B,children:e.jsx(M,{value:s.offer_validity,onChange:c,format:"DD-MM-YYYY",slotProps:{textField:{fullWidth:!0,InputProps:{style:{height:"35px",width:"155px",fontSize:"14px"}}}}})})]})}),e.jsx("div",{className:"flex justify-end pt-2.5",children:e.jsx("button",{className:"btn btn-primary",onClick:m,children:"Save Changes"})})]})]})})})},q=()=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"container-fixed",children:e.jsx("div",{className:"flex flex-wrap items-center lg:items-end justify-between gap-5 pb-7.5",children:e.jsx("div",{className:"flex flex-col justify-center gap-2",children:e.jsx("h1",{className:"text-xl font-semibold leading-none text-gray-900",children:"Settings"})})})}),e.jsx("div",{className:"container-fixed",children:e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-5 lg:gap-7.5",children:[e.jsx(A,{}),e.jsx(H,{})]})})]});export{q as default};
